window.jest_html_reporters_callback__({"numFailedTestSuites":31,"numFailedTests":468,"numPassedTestSuites":0,"numPassedTests":0,"numPendingTestSuites":0,"numPendingTests":0,"numRuntimeErrorTestSuites":4,"numTodoTests":0,"numTotalTestSuites":31,"numTotalTests":468,"startTime":1759565207252,"success":false,"testResults":[{"numFailingTests":20,"numPassingTests":0,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":1759565215691,"runtime":8411,"slow":true,"start":1759565207280},"testFilePath":"/home/eric/Projects/accounting-api/tests/integration/audit-logging.test.ts","failureMessage":"  ● Enhanced Audit Logging Integration Tests › User Activity Tracking › should get user activity logs\n\n\n\n\n\n  ● Enhanced Audit Logging Integration Tests › User Activity Tracking › should filter user activities by date range\n\n\n\n\n\n  ● Enhanced Audit Logging Integration Tests › User Activity Tracking › should filter user activities by action type\n\n\n\n\n\n  ● Enhanced Audit Logging Integration Tests › User Activity Tracking › should get user activity summary\n\n\n\n\n\n  ● Enhanced Audit Logging Integration Tests › Session Management › should get active sessions\n\n\n\n\n\n  ● Enhanced Audit Logging Integration Tests › Session Management › should revoke a specific session\n\n\n\n\n\n  ● Enhanced Audit Logging Integration Tests › Session Management › should revoke all sessions for a user\n\n\n\n\n\n  ● Enhanced Audit Logging Integration Tests › Suspicious Activity Detection › should detect suspicious activities\n\n\n\n\n\n  ● Enhanced Audit Logging Integration Tests › Suspicious Activity Detection › should filter suspicious activities by severity\n\n\n\n\n\n  ● Enhanced Audit Logging Integration Tests › Suspicious Activity Detection › should get suspicious activity patterns\n\n\n\n\n\n  ● Enhanced Audit Logging Integration Tests › Security Metrics › should get security metrics overview\n\n\n\n\n\n  ● Enhanced Audit Logging Integration Tests › Security Metrics › should get login security metrics\n\n\n\n\n\n  ● Enhanced Audit Logging Integration Tests › Security Metrics › should get access control metrics\n\n\n\n\n\n  ● Enhanced Audit Logging Integration Tests › Security Metrics › should get compliance metrics\n\n\n\n\n\n  ● Enhanced Audit Logging Integration Tests › Audit Log Export › should export audit logs in CSV format\n\n\n\n\n\n  ● Enhanced Audit Logging Integration Tests › Audit Log Export › should export audit logs in JSON format\n\n\n\n\n\n  ● Enhanced Audit Logging Integration Tests › Real-time Audit Streaming › should get real-time audit stream configuration\n\n\n\n\n\n  ● Enhanced Audit Logging Integration Tests › Real-time Audit Streaming › should update audit stream configuration\n\n\n\n\n\n  ● Enhanced Audit Logging Integration Tests › Access Control and Authorization › should reject unauthorized access to audit endpoints\n\n\n\n\n\n  ● Enhanced Audit Logging Integration Tests › Access Control and Authorization › should enforce role-based access to sensitive audit data\n\n\n\n\n","testResults":[{"ancestorTitles":["Enhanced Audit Logging Integration Tests","User Activity Tracking"],"duration":0,"failureMessages":[""],"fullName":"Enhanced Audit Logging Integration Tests User Activity Tracking should get user activity logs","status":"failed","title":"should get user activity logs"},{"ancestorTitles":["Enhanced Audit Logging Integration Tests","User Activity Tracking"],"duration":0,"failureMessages":[""],"fullName":"Enhanced Audit Logging Integration Tests User Activity Tracking should filter user activities by date range","status":"failed","title":"should filter user activities by date range"},{"ancestorTitles":["Enhanced Audit Logging Integration Tests","User Activity Tracking"],"duration":0,"failureMessages":[""],"fullName":"Enhanced Audit Logging Integration Tests User Activity Tracking should filter user activities by action type","status":"failed","title":"should filter user activities by action type"},{"ancestorTitles":["Enhanced Audit Logging Integration Tests","User Activity Tracking"],"duration":0,"failureMessages":[""],"fullName":"Enhanced Audit Logging Integration Tests User Activity Tracking should get user activity summary","status":"failed","title":"should get user activity summary"},{"ancestorTitles":["Enhanced Audit Logging Integration Tests","Session Management"],"duration":0,"failureMessages":[""],"fullName":"Enhanced Audit Logging Integration Tests Session Management should get active sessions","status":"failed","title":"should get active sessions"},{"ancestorTitles":["Enhanced Audit Logging Integration Tests","Session Management"],"duration":0,"failureMessages":[""],"fullName":"Enhanced Audit Logging Integration Tests Session Management should revoke a specific session","status":"failed","title":"should revoke a specific session"},{"ancestorTitles":["Enhanced Audit Logging Integration Tests","Session Management"],"duration":0,"failureMessages":[""],"fullName":"Enhanced Audit Logging Integration Tests Session Management should revoke all sessions for a user","status":"failed","title":"should revoke all sessions for a user"},{"ancestorTitles":["Enhanced Audit Logging Integration Tests","Suspicious Activity Detection"],"duration":0,"failureMessages":[""],"fullName":"Enhanced Audit Logging Integration Tests Suspicious Activity Detection should detect suspicious activities","status":"failed","title":"should detect suspicious activities"},{"ancestorTitles":["Enhanced Audit Logging Integration Tests","Suspicious Activity Detection"],"duration":0,"failureMessages":[""],"fullName":"Enhanced Audit Logging Integration Tests Suspicious Activity Detection should filter suspicious activities by severity","status":"failed","title":"should filter suspicious activities by severity"},{"ancestorTitles":["Enhanced Audit Logging Integration Tests","Suspicious Activity Detection"],"duration":0,"failureMessages":[""],"fullName":"Enhanced Audit Logging Integration Tests Suspicious Activity Detection should get suspicious activity patterns","status":"failed","title":"should get suspicious activity patterns"},{"ancestorTitles":["Enhanced Audit Logging Integration Tests","Security Metrics"],"duration":0,"failureMessages":[""],"fullName":"Enhanced Audit Logging Integration Tests Security Metrics should get security metrics overview","status":"failed","title":"should get security metrics overview"},{"ancestorTitles":["Enhanced Audit Logging Integration Tests","Security Metrics"],"duration":0,"failureMessages":[""],"fullName":"Enhanced Audit Logging Integration Tests Security Metrics should get login security metrics","status":"failed","title":"should get login security metrics"},{"ancestorTitles":["Enhanced Audit Logging Integration Tests","Security Metrics"],"duration":0,"failureMessages":[""],"fullName":"Enhanced Audit Logging Integration Tests Security Metrics should get access control metrics","status":"failed","title":"should get access control metrics"},{"ancestorTitles":["Enhanced Audit Logging Integration Tests","Security Metrics"],"duration":0,"failureMessages":[""],"fullName":"Enhanced Audit Logging Integration Tests Security Metrics should get compliance metrics","status":"failed","title":"should get compliance metrics"},{"ancestorTitles":["Enhanced Audit Logging Integration Tests","Audit Log Export"],"duration":0,"failureMessages":[""],"fullName":"Enhanced Audit Logging Integration Tests Audit Log Export should export audit logs in CSV format","status":"failed","title":"should export audit logs in CSV format"},{"ancestorTitles":["Enhanced Audit Logging Integration Tests","Audit Log Export"],"duration":1,"failureMessages":[""],"fullName":"Enhanced Audit Logging Integration Tests Audit Log Export should export audit logs in JSON format","status":"failed","title":"should export audit logs in JSON format"},{"ancestorTitles":["Enhanced Audit Logging Integration Tests","Real-time Audit Streaming"],"duration":0,"failureMessages":[""],"fullName":"Enhanced Audit Logging Integration Tests Real-time Audit Streaming should get real-time audit stream configuration","status":"failed","title":"should get real-time audit stream configuration"},{"ancestorTitles":["Enhanced Audit Logging Integration Tests","Real-time Audit Streaming"],"duration":0,"failureMessages":[""],"fullName":"Enhanced Audit Logging Integration Tests Real-time Audit Streaming should update audit stream configuration","status":"failed","title":"should update audit stream configuration"},{"ancestorTitles":["Enhanced Audit Logging Integration Tests","Access Control and Authorization"],"duration":0,"failureMessages":[""],"fullName":"Enhanced Audit Logging Integration Tests Access Control and Authorization should reject unauthorized access to audit endpoints","status":"failed","title":"should reject unauthorized access to audit endpoints"},{"ancestorTitles":["Enhanced Audit Logging Integration Tests","Access Control and Authorization"],"duration":0,"failureMessages":[""],"fullName":"Enhanced Audit Logging Integration Tests Access Control and Authorization should enforce role-based access to sensitive audit data","status":"failed","title":"should enforce role-based access to sensitive audit data"}]},{"numFailingTests":33,"numPassingTests":0,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":1759565216371,"runtime":677,"slow":false,"start":1759565215694},"testFilePath":"/home/eric/Projects/accounting-api/tests/integration/public-appointment.test.ts","failureMessage":"  ● Public Appointment API Integration Tests › GET /api/v1/public/appointments/availability › should fetch available time slots\n\n\n\n\n\n  ● Public Appointment API Integration Tests › GET /api/v1/public/appointments/availability › should return 400 without quoteId\n\n\n\n\n\n  ● Public Appointment API Integration Tests › GET /api/v1/public/appointments/availability › should return 400 without token\n\n\n\n\n\n  ● Public Appointment API Integration Tests › GET /api/v1/public/appointments/availability › should return 404 with invalid token\n\n\n\n\n\n  ● Public Appointment API Integration Tests › GET /api/v1/public/appointments/availability › should filter by date range\n\n\n\n\n\n  ● Public Appointment API Integration Tests › GET /api/v1/public/appointments/availability › should reject expired token\n\n\n\n\n\n  ● Public Appointment API Integration Tests › GET /api/v1/public/appointments/availability › should reject already used token\n\n\n\n\n\n  ● Public Appointment API Integration Tests › POST /api/v1/public/appointments/book › should book appointment with valid token\n\n\n\n\n\n  ● Public Appointment API Integration Tests › POST /api/v1/public/appointments/book › should return 400 without required fields\n\n\n\n\n\n  ● Public Appointment API Integration Tests › POST /api/v1/public/appointments/book › should return 400 with invalid time range\n\n\n\n\n\n  ● Public Appointment API Integration Tests › POST /api/v1/public/appointments/book › should return 400 with past date\n\n\n\n\n\n  ● Public Appointment API Integration Tests › POST /api/v1/public/appointments/book › should return 404 with invalid token\n\n\n\n\n\n  ● Public Appointment API Integration Tests › POST /api/v1/public/appointments/book › should prevent double booking with same token\n\n\n\n\n\n  ● Public Appointment API Integration Tests › POST /api/v1/public/appointments/book › should track IP address on booking\n\n\n\n\n\n  ● Public Appointment API Integration Tests › POST /api/v1/public/appointments/book › should handle Google Meet creation failure gracefully\n\n\n\n\n\n  ● Public Appointment API Integration Tests › POST /api/v1/public/appointments/book › should validate email format\n\n\n\n\n\n  ● Public Appointment API Integration Tests › GET /api/v1/public/appointments/:appointmentId/details › should get appointment details\n\n\n\n\n\n  ● Public Appointment API Integration Tests › GET /api/v1/public/appointments/:appointmentId/details › should return 400 without token\n\n\n\n\n\n  ● Public Appointment API Integration Tests › GET /api/v1/public/appointments/:appointmentId/details › should return 404 with invalid token\n\n\n\n\n\n  ● Public Appointment API Integration Tests › GET /api/v1/public/appointments/:appointmentId/details › should return 404 for non-existent appointment\n\n\n\n\n\n  ● Public Appointment API Integration Tests › GET /api/v1/public/appointments/:appointmentId/details › should include customer and organization info\n\n\n\n\n\n  ● Public Appointment API Integration Tests › POST /api/v1/public/appointments/:appointmentId/cancel › should cancel appointment with valid token\n\n\n\n\n\n  ● Public Appointment API Integration Tests › POST /api/v1/public/appointments/:appointmentId/cancel › should allow cancellation without reason\n\n\n\n\n\n  ● Public Appointment API Integration Tests › POST /api/v1/public/appointments/:appointmentId/cancel › should return 400 without token\n\n\n\n\n\n  ● Public Appointment API Integration Tests › POST /api/v1/public/appointments/:appointmentId/cancel › should return 404 with invalid token\n\n\n\n\n\n  ● Public Appointment API Integration Tests › POST /api/v1/public/appointments/:appointmentId/cancel › should reject cancellation of already cancelled appointment\n\n\n\n\n\n  ● Public Appointment API Integration Tests › POST /api/v1/public/appointments/:appointmentId/cancel › should handle Google Meet cancellation failure gracefully\n\n\n\n\n\n  ● Public Appointment API Integration Tests › Token Security and Validation › should use bcrypt for token verification\n\n\n\n\n\n  ● Public Appointment API Integration Tests › Token Security and Validation › should reject tokens for different quotes\n\n\n\n\n\n  ● Public Appointment API Integration Tests › Rate Limiting › should rate limit availability requests\n\n\n\n\n\n  ● Public Appointment API Integration Tests › Rate Limiting › should rate limit booking requests\n\n\n\n\n\n  ● Public Appointment API Integration Tests › Email Notifications › should send confirmation email on booking\n\n\n\n\n\n  ● Public Appointment API Integration Tests › Email Notifications › should send cancellation email\n\n\n\n\n","testResults":[{"ancestorTitles":["Public Appointment API Integration Tests","GET /api/v1/public/appointments/availability"],"duration":0,"failureMessages":[""],"fullName":"Public Appointment API Integration Tests GET /api/v1/public/appointments/availability should fetch available time slots","status":"failed","title":"should fetch available time slots"},{"ancestorTitles":["Public Appointment API Integration Tests","GET /api/v1/public/appointments/availability"],"duration":0,"failureMessages":[""],"fullName":"Public Appointment API Integration Tests GET /api/v1/public/appointments/availability should return 400 without quoteId","status":"failed","title":"should return 400 without quoteId"},{"ancestorTitles":["Public Appointment API Integration Tests","GET /api/v1/public/appointments/availability"],"duration":0,"failureMessages":[""],"fullName":"Public Appointment API Integration Tests GET /api/v1/public/appointments/availability should return 400 without token","status":"failed","title":"should return 400 without token"},{"ancestorTitles":["Public Appointment API Integration Tests","GET /api/v1/public/appointments/availability"],"duration":0,"failureMessages":[""],"fullName":"Public Appointment API Integration Tests GET /api/v1/public/appointments/availability should return 404 with invalid token","status":"failed","title":"should return 404 with invalid token"},{"ancestorTitles":["Public Appointment API Integration Tests","GET /api/v1/public/appointments/availability"],"duration":0,"failureMessages":[""],"fullName":"Public Appointment API Integration Tests GET /api/v1/public/appointments/availability should filter by date range","status":"failed","title":"should filter by date range"},{"ancestorTitles":["Public Appointment API Integration Tests","GET /api/v1/public/appointments/availability"],"duration":0,"failureMessages":[""],"fullName":"Public Appointment API Integration Tests GET /api/v1/public/appointments/availability should reject expired token","status":"failed","title":"should reject expired token"},{"ancestorTitles":["Public Appointment API Integration Tests","GET /api/v1/public/appointments/availability"],"duration":0,"failureMessages":[""],"fullName":"Public Appointment API Integration Tests GET /api/v1/public/appointments/availability should reject already used token","status":"failed","title":"should reject already used token"},{"ancestorTitles":["Public Appointment API Integration Tests","POST /api/v1/public/appointments/book"],"duration":0,"failureMessages":[""],"fullName":"Public Appointment API Integration Tests POST /api/v1/public/appointments/book should book appointment with valid token","status":"failed","title":"should book appointment with valid token"},{"ancestorTitles":["Public Appointment API Integration Tests","POST /api/v1/public/appointments/book"],"duration":0,"failureMessages":[""],"fullName":"Public Appointment API Integration Tests POST /api/v1/public/appointments/book should return 400 without required fields","status":"failed","title":"should return 400 without required fields"},{"ancestorTitles":["Public Appointment API Integration Tests","POST /api/v1/public/appointments/book"],"duration":0,"failureMessages":[""],"fullName":"Public Appointment API Integration Tests POST /api/v1/public/appointments/book should return 400 with invalid time range","status":"failed","title":"should return 400 with invalid time range"},{"ancestorTitles":["Public Appointment API Integration Tests","POST /api/v1/public/appointments/book"],"duration":0,"failureMessages":[""],"fullName":"Public Appointment API Integration Tests POST /api/v1/public/appointments/book should return 400 with past date","status":"failed","title":"should return 400 with past date"},{"ancestorTitles":["Public Appointment API Integration Tests","POST /api/v1/public/appointments/book"],"duration":0,"failureMessages":[""],"fullName":"Public Appointment API Integration Tests POST /api/v1/public/appointments/book should return 404 with invalid token","status":"failed","title":"should return 404 with invalid token"},{"ancestorTitles":["Public Appointment API Integration Tests","POST /api/v1/public/appointments/book"],"duration":0,"failureMessages":[""],"fullName":"Public Appointment API Integration Tests POST /api/v1/public/appointments/book should prevent double booking with same token","status":"failed","title":"should prevent double booking with same token"},{"ancestorTitles":["Public Appointment API Integration Tests","POST /api/v1/public/appointments/book"],"duration":0,"failureMessages":[""],"fullName":"Public Appointment API Integration Tests POST /api/v1/public/appointments/book should track IP address on booking","status":"failed","title":"should track IP address on booking"},{"ancestorTitles":["Public Appointment API Integration Tests","POST /api/v1/public/appointments/book"],"duration":0,"failureMessages":[""],"fullName":"Public Appointment API Integration Tests POST /api/v1/public/appointments/book should handle Google Meet creation failure gracefully","status":"failed","title":"should handle Google Meet creation failure gracefully"},{"ancestorTitles":["Public Appointment API Integration Tests","POST /api/v1/public/appointments/book"],"duration":0,"failureMessages":[""],"fullName":"Public Appointment API Integration Tests POST /api/v1/public/appointments/book should validate email format","status":"failed","title":"should validate email format"},{"ancestorTitles":["Public Appointment API Integration Tests","GET /api/v1/public/appointments/:appointmentId/details"],"duration":0,"failureMessages":[""],"fullName":"Public Appointment API Integration Tests GET /api/v1/public/appointments/:appointmentId/details should get appointment details","status":"failed","title":"should get appointment details"},{"ancestorTitles":["Public Appointment API Integration Tests","GET /api/v1/public/appointments/:appointmentId/details"],"duration":0,"failureMessages":[""],"fullName":"Public Appointment API Integration Tests GET /api/v1/public/appointments/:appointmentId/details should return 400 without token","status":"failed","title":"should return 400 without token"},{"ancestorTitles":["Public Appointment API Integration Tests","GET /api/v1/public/appointments/:appointmentId/details"],"duration":0,"failureMessages":[""],"fullName":"Public Appointment API Integration Tests GET /api/v1/public/appointments/:appointmentId/details should return 404 with invalid token","status":"failed","title":"should return 404 with invalid token"},{"ancestorTitles":["Public Appointment API Integration Tests","GET /api/v1/public/appointments/:appointmentId/details"],"duration":0,"failureMessages":[""],"fullName":"Public Appointment API Integration Tests GET /api/v1/public/appointments/:appointmentId/details should return 404 for non-existent appointment","status":"failed","title":"should return 404 for non-existent appointment"},{"ancestorTitles":["Public Appointment API Integration Tests","GET /api/v1/public/appointments/:appointmentId/details"],"duration":0,"failureMessages":[""],"fullName":"Public Appointment API Integration Tests GET /api/v1/public/appointments/:appointmentId/details should include customer and organization info","status":"failed","title":"should include customer and organization info"},{"ancestorTitles":["Public Appointment API Integration Tests","POST /api/v1/public/appointments/:appointmentId/cancel"],"duration":1,"failureMessages":[""],"fullName":"Public Appointment API Integration Tests POST /api/v1/public/appointments/:appointmentId/cancel should cancel appointment with valid token","status":"failed","title":"should cancel appointment with valid token"},{"ancestorTitles":["Public Appointment API Integration Tests","POST /api/v1/public/appointments/:appointmentId/cancel"],"duration":0,"failureMessages":[""],"fullName":"Public Appointment API Integration Tests POST /api/v1/public/appointments/:appointmentId/cancel should allow cancellation without reason","status":"failed","title":"should allow cancellation without reason"},{"ancestorTitles":["Public Appointment API Integration Tests","POST /api/v1/public/appointments/:appointmentId/cancel"],"duration":0,"failureMessages":[""],"fullName":"Public Appointment API Integration Tests POST /api/v1/public/appointments/:appointmentId/cancel should return 400 without token","status":"failed","title":"should return 400 without token"},{"ancestorTitles":["Public Appointment API Integration Tests","POST /api/v1/public/appointments/:appointmentId/cancel"],"duration":0,"failureMessages":[""],"fullName":"Public Appointment API Integration Tests POST /api/v1/public/appointments/:appointmentId/cancel should return 404 with invalid token","status":"failed","title":"should return 404 with invalid token"},{"ancestorTitles":["Public Appointment API Integration Tests","POST /api/v1/public/appointments/:appointmentId/cancel"],"duration":0,"failureMessages":[""],"fullName":"Public Appointment API Integration Tests POST /api/v1/public/appointments/:appointmentId/cancel should reject cancellation of already cancelled appointment","status":"failed","title":"should reject cancellation of already cancelled appointment"},{"ancestorTitles":["Public Appointment API Integration Tests","POST /api/v1/public/appointments/:appointmentId/cancel"],"duration":0,"failureMessages":[""],"fullName":"Public Appointment API Integration Tests POST /api/v1/public/appointments/:appointmentId/cancel should handle Google Meet cancellation failure gracefully","status":"failed","title":"should handle Google Meet cancellation failure gracefully"},{"ancestorTitles":["Public Appointment API Integration Tests","Token Security and Validation"],"duration":0,"failureMessages":[""],"fullName":"Public Appointment API Integration Tests Token Security and Validation should use bcrypt for token verification","status":"failed","title":"should use bcrypt for token verification"},{"ancestorTitles":["Public Appointment API Integration Tests","Token Security and Validation"],"duration":0,"failureMessages":[""],"fullName":"Public Appointment API Integration Tests Token Security and Validation should reject tokens for different quotes","status":"failed","title":"should reject tokens for different quotes"},{"ancestorTitles":["Public Appointment API Integration Tests","Rate Limiting"],"duration":0,"failureMessages":[""],"fullName":"Public Appointment API Integration Tests Rate Limiting should rate limit availability requests","status":"failed","title":"should rate limit availability requests"},{"ancestorTitles":["Public Appointment API Integration Tests","Rate Limiting"],"duration":0,"failureMessages":[""],"fullName":"Public Appointment API Integration Tests Rate Limiting should rate limit booking requests","status":"failed","title":"should rate limit booking requests"},{"ancestorTitles":["Public Appointment API Integration Tests","Email Notifications"],"duration":0,"failureMessages":[""],"fullName":"Public Appointment API Integration Tests Email Notifications should send confirmation email on booking","status":"failed","title":"should send confirmation email on booking"},{"ancestorTitles":["Public Appointment API Integration Tests","Email Notifications"],"duration":0,"failureMessages":[""],"fullName":"Public Appointment API Integration Tests Email Notifications should send cancellation email","status":"failed","title":"should send cancellation email"}]},{"numFailingTests":8,"numPassingTests":0,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":1759565217036,"runtime":661,"slow":false,"start":1759565216375},"testFilePath":"/home/eric/Projects/accounting-api/tests/integration/canadian-tax-compliance-permissions.test.ts","failureMessage":"  ● Canadian Tax Compliance Permission Tests › GST/HST Tax Rate Management Permissions › should enforce proper permissions for provincial tax rate configuration\n\n\n\n\n\n  ● Canadian Tax Compliance Permission Tests › GST/HST Tax Rate Management Permissions › should validate tax calculation permissions across provinces\n\n\n\n\n\n  ● Canadian Tax Compliance Permission Tests › CRA Compliance and Tax Filing Permissions › should enforce proper permissions for GST/HST return preparation\n\n\n\n\n\n  ● Canadian Tax Compliance Permission Tests › CRA Compliance and Tax Filing Permissions › should enforce Quebec QST compliance permissions\n\n\n\n\n\n  ● Canadian Tax Compliance Permission Tests › Tax Audit and Compliance Reporting Permissions › should enforce proper permissions for tax audit trails\n\n\n\n\n\n  ● Canadian Tax Compliance Permission Tests › Multi-Currency Tax Compliance Permissions › should enforce permissions for foreign exchange tax calculations\n\n\n\n\n\n  ● Canadian Tax Compliance Permission Tests › Cross-Border Transaction Tax Compliance › should enforce permissions for export/import tax handling\n\n\n\n\n\n  ● Canadian Tax Compliance Permission Tests › Canadian Tax Integration with Financial Statements › should enforce permissions for tax-integrated financial reporting\n\n\n\n\n","testResults":[{"ancestorTitles":["Canadian Tax Compliance Permission Tests","GST/HST Tax Rate Management Permissions"],"duration":0,"failureMessages":[""],"fullName":"Canadian Tax Compliance Permission Tests GST/HST Tax Rate Management Permissions should enforce proper permissions for provincial tax rate configuration","status":"failed","title":"should enforce proper permissions for provincial tax rate configuration"},{"ancestorTitles":["Canadian Tax Compliance Permission Tests","GST/HST Tax Rate Management Permissions"],"duration":0,"failureMessages":[""],"fullName":"Canadian Tax Compliance Permission Tests GST/HST Tax Rate Management Permissions should validate tax calculation permissions across provinces","status":"failed","title":"should validate tax calculation permissions across provinces"},{"ancestorTitles":["Canadian Tax Compliance Permission Tests","CRA Compliance and Tax Filing Permissions"],"duration":1,"failureMessages":[""],"fullName":"Canadian Tax Compliance Permission Tests CRA Compliance and Tax Filing Permissions should enforce proper permissions for GST/HST return preparation","status":"failed","title":"should enforce proper permissions for GST/HST return preparation"},{"ancestorTitles":["Canadian Tax Compliance Permission Tests","CRA Compliance and Tax Filing Permissions"],"duration":0,"failureMessages":[""],"fullName":"Canadian Tax Compliance Permission Tests CRA Compliance and Tax Filing Permissions should enforce Quebec QST compliance permissions","status":"failed","title":"should enforce Quebec QST compliance permissions"},{"ancestorTitles":["Canadian Tax Compliance Permission Tests","Tax Audit and Compliance Reporting Permissions"],"duration":0,"failureMessages":[""],"fullName":"Canadian Tax Compliance Permission Tests Tax Audit and Compliance Reporting Permissions should enforce proper permissions for tax audit trails","status":"failed","title":"should enforce proper permissions for tax audit trails"},{"ancestorTitles":["Canadian Tax Compliance Permission Tests","Multi-Currency Tax Compliance Permissions"],"duration":0,"failureMessages":[""],"fullName":"Canadian Tax Compliance Permission Tests Multi-Currency Tax Compliance Permissions should enforce permissions for foreign exchange tax calculations","status":"failed","title":"should enforce permissions for foreign exchange tax calculations"},{"ancestorTitles":["Canadian Tax Compliance Permission Tests","Cross-Border Transaction Tax Compliance"],"duration":0,"failureMessages":[""],"fullName":"Canadian Tax Compliance Permission Tests Cross-Border Transaction Tax Compliance should enforce permissions for export/import tax handling","status":"failed","title":"should enforce permissions for export/import tax handling"},{"ancestorTitles":["Canadian Tax Compliance Permission Tests","Canadian Tax Integration with Financial Statements"],"duration":0,"failureMessages":[""],"fullName":"Canadian Tax Compliance Permission Tests Canadian Tax Integration with Financial Statements should enforce permissions for tax-integrated financial reporting","status":"failed","title":"should enforce permissions for tax-integrated financial reporting"}]},{"numFailingTests":30,"numPassingTests":0,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":1759565217706,"runtime":668,"slow":false,"start":1759565217038},"testFilePath":"/home/eric/Projects/accounting-api/tests/integration/public-quote.test.ts","failureMessage":"  ● Public Quote API Integration Tests › GET /api/v1/public/quotes/:quoteId/view › should view quote with valid token\n\n\n\n\n\n  ● Public Quote API Integration Tests › GET /api/v1/public/quotes/:quoteId/view › should return 400 without token\n\n\n\n\n\n  ● Public Quote API Integration Tests › GET /api/v1/public/quotes/:quoteId/view › should return 404 with invalid token\n\n\n\n\n\n  ● Public Quote API Integration Tests › GET /api/v1/public/quotes/:quoteId/view › should return 404 if public view disabled\n\n\n\n\n\n  ● Public Quote API Integration Tests › GET /api/v1/public/quotes/:quoteId/view › should return 410 for expired quote\n\n\n\n\n\n  ● Public Quote API Integration Tests › GET /api/v1/public/quotes/:quoteId/view › should include quote items with product/service details\n\n\n\n\n\n  ● Public Quote API Integration Tests › GET /api/v1/public/quotes/:quoteId/view › should not expose sensitive organization data\n\n\n\n\n\n  ● Public Quote API Integration Tests › GET /api/v1/public/quotes/:quoteId/status › should check quote status\n\n\n\n\n\n  ● Public Quote API Integration Tests › GET /api/v1/public/quotes/:quoteId/status › should indicate if quote is expired\n\n\n\n\n\n  ● Public Quote API Integration Tests › POST /api/v1/public/quotes/:quoteId/accept › should accept quote with valid token\n\n\n\n\n\n  ● Public Quote API Integration Tests › POST /api/v1/public/quotes/:quoteId/accept › should return 400 without token\n\n\n\n\n\n  ● Public Quote API Integration Tests › POST /api/v1/public/quotes/:quoteId/accept › should return 404 with invalid token\n\n\n\n\n\n  ● Public Quote API Integration Tests › POST /api/v1/public/quotes/:quoteId/accept › should reject already accepted quote\n\n\n\n\n\n  ● Public Quote API Integration Tests › POST /api/v1/public/quotes/:quoteId/accept › should reject expired token\n\n\n\n\n\n  ● Public Quote API Integration Tests › POST /api/v1/public/quotes/:quoteId/accept › should reject invalidated token\n\n\n\n\n\n  ● Public Quote API Integration Tests › POST /api/v1/public/quotes/:quoteId/accept › should track IP address on acceptance\n\n\n\n\n\n  ● Public Quote API Integration Tests › POST /api/v1/public/quotes/:quoteId/accept › should generate appointment booking token after acceptance\n\n\n\n\n\n  ● Public Quote API Integration Tests › POST /api/v1/public/quotes/:quoteId/reject › should reject quote with valid token\n\n\n\n\n\n  ● Public Quote API Integration Tests › POST /api/v1/public/quotes/:quoteId/reject › should allow rejection without reason\n\n\n\n\n\n  ● Public Quote API Integration Tests › POST /api/v1/public/quotes/:quoteId/reject › should return 400 with invalid token\n\n\n\n\n\n  ● Public Quote API Integration Tests › POST /api/v1/public/quotes/:quoteId/reject › should reject already rejected quote\n\n\n\n\n\n  ● Public Quote API Integration Tests › Quote Token Validation › should validate token format\n\n\n\n\n\n  ● Public Quote API Integration Tests › Quote Token Validation › should handle bcrypt verification correctly\n\n\n\n\n\n  ● Public Quote API Integration Tests › Quote Lifecycle State Transitions › should only accept quote in SENT or DRAFT status\n\n\n\n\n\n  ● Public Quote API Integration Tests › Quote Lifecycle State Transitions › should handle concurrent acceptance attempts\n\n\n\n\n\n  ● Public Quote API Integration Tests › Email Notifications › should send acceptance confirmation to customer\n\n\n\n\n\n  ● Public Quote API Integration Tests › Email Notifications › should send rejection notification to organization\n\n\n\n\n\n  ● Public Quote API Integration Tests › Security Features › should prevent quote viewing without token\n\n\n\n\n\n  ● Public Quote API Integration Tests › Security Features › should not expose deleted quotes\n\n\n\n\n\n  ● Public Quote API Integration Tests › Security Features › should rate limit quote viewing requests\n\n\n\n\n","testResults":[{"ancestorTitles":["Public Quote API Integration Tests","GET /api/v1/public/quotes/:quoteId/view"],"duration":0,"failureMessages":[""],"fullName":"Public Quote API Integration Tests GET /api/v1/public/quotes/:quoteId/view should view quote with valid token","status":"failed","title":"should view quote with valid token"},{"ancestorTitles":["Public Quote API Integration Tests","GET /api/v1/public/quotes/:quoteId/view"],"duration":0,"failureMessages":[""],"fullName":"Public Quote API Integration Tests GET /api/v1/public/quotes/:quoteId/view should return 400 without token","status":"failed","title":"should return 400 without token"},{"ancestorTitles":["Public Quote API Integration Tests","GET /api/v1/public/quotes/:quoteId/view"],"duration":0,"failureMessages":[""],"fullName":"Public Quote API Integration Tests GET /api/v1/public/quotes/:quoteId/view should return 404 with invalid token","status":"failed","title":"should return 404 with invalid token"},{"ancestorTitles":["Public Quote API Integration Tests","GET /api/v1/public/quotes/:quoteId/view"],"duration":0,"failureMessages":[""],"fullName":"Public Quote API Integration Tests GET /api/v1/public/quotes/:quoteId/view should return 404 if public view disabled","status":"failed","title":"should return 404 if public view disabled"},{"ancestorTitles":["Public Quote API Integration Tests","GET /api/v1/public/quotes/:quoteId/view"],"duration":0,"failureMessages":[""],"fullName":"Public Quote API Integration Tests GET /api/v1/public/quotes/:quoteId/view should return 410 for expired quote","status":"failed","title":"should return 410 for expired quote"},{"ancestorTitles":["Public Quote API Integration Tests","GET /api/v1/public/quotes/:quoteId/view"],"duration":0,"failureMessages":[""],"fullName":"Public Quote API Integration Tests GET /api/v1/public/quotes/:quoteId/view should include quote items with product/service details","status":"failed","title":"should include quote items with product/service details"},{"ancestorTitles":["Public Quote API Integration Tests","GET /api/v1/public/quotes/:quoteId/view"],"duration":0,"failureMessages":[""],"fullName":"Public Quote API Integration Tests GET /api/v1/public/quotes/:quoteId/view should not expose sensitive organization data","status":"failed","title":"should not expose sensitive organization data"},{"ancestorTitles":["Public Quote API Integration Tests","GET /api/v1/public/quotes/:quoteId/status"],"duration":0,"failureMessages":[""],"fullName":"Public Quote API Integration Tests GET /api/v1/public/quotes/:quoteId/status should check quote status","status":"failed","title":"should check quote status"},{"ancestorTitles":["Public Quote API Integration Tests","GET /api/v1/public/quotes/:quoteId/status"],"duration":0,"failureMessages":[""],"fullName":"Public Quote API Integration Tests GET /api/v1/public/quotes/:quoteId/status should indicate if quote is expired","status":"failed","title":"should indicate if quote is expired"},{"ancestorTitles":["Public Quote API Integration Tests","POST /api/v1/public/quotes/:quoteId/accept"],"duration":0,"failureMessages":[""],"fullName":"Public Quote API Integration Tests POST /api/v1/public/quotes/:quoteId/accept should accept quote with valid token","status":"failed","title":"should accept quote with valid token"},{"ancestorTitles":["Public Quote API Integration Tests","POST /api/v1/public/quotes/:quoteId/accept"],"duration":0,"failureMessages":[""],"fullName":"Public Quote API Integration Tests POST /api/v1/public/quotes/:quoteId/accept should return 400 without token","status":"failed","title":"should return 400 without token"},{"ancestorTitles":["Public Quote API Integration Tests","POST /api/v1/public/quotes/:quoteId/accept"],"duration":0,"failureMessages":[""],"fullName":"Public Quote API Integration Tests POST /api/v1/public/quotes/:quoteId/accept should return 404 with invalid token","status":"failed","title":"should return 404 with invalid token"},{"ancestorTitles":["Public Quote API Integration Tests","POST /api/v1/public/quotes/:quoteId/accept"],"duration":1,"failureMessages":[""],"fullName":"Public Quote API Integration Tests POST /api/v1/public/quotes/:quoteId/accept should reject already accepted quote","status":"failed","title":"should reject already accepted quote"},{"ancestorTitles":["Public Quote API Integration Tests","POST /api/v1/public/quotes/:quoteId/accept"],"duration":0,"failureMessages":[""],"fullName":"Public Quote API Integration Tests POST /api/v1/public/quotes/:quoteId/accept should reject expired token","status":"failed","title":"should reject expired token"},{"ancestorTitles":["Public Quote API Integration Tests","POST /api/v1/public/quotes/:quoteId/accept"],"duration":0,"failureMessages":[""],"fullName":"Public Quote API Integration Tests POST /api/v1/public/quotes/:quoteId/accept should reject invalidated token","status":"failed","title":"should reject invalidated token"},{"ancestorTitles":["Public Quote API Integration Tests","POST /api/v1/public/quotes/:quoteId/accept"],"duration":0,"failureMessages":[""],"fullName":"Public Quote API Integration Tests POST /api/v1/public/quotes/:quoteId/accept should track IP address on acceptance","status":"failed","title":"should track IP address on acceptance"},{"ancestorTitles":["Public Quote API Integration Tests","POST /api/v1/public/quotes/:quoteId/accept"],"duration":0,"failureMessages":[""],"fullName":"Public Quote API Integration Tests POST /api/v1/public/quotes/:quoteId/accept should generate appointment booking token after acceptance","status":"failed","title":"should generate appointment booking token after acceptance"},{"ancestorTitles":["Public Quote API Integration Tests","POST /api/v1/public/quotes/:quoteId/reject"],"duration":0,"failureMessages":[""],"fullName":"Public Quote API Integration Tests POST /api/v1/public/quotes/:quoteId/reject should reject quote with valid token","status":"failed","title":"should reject quote with valid token"},{"ancestorTitles":["Public Quote API Integration Tests","POST /api/v1/public/quotes/:quoteId/reject"],"duration":0,"failureMessages":[""],"fullName":"Public Quote API Integration Tests POST /api/v1/public/quotes/:quoteId/reject should allow rejection without reason","status":"failed","title":"should allow rejection without reason"},{"ancestorTitles":["Public Quote API Integration Tests","POST /api/v1/public/quotes/:quoteId/reject"],"duration":0,"failureMessages":[""],"fullName":"Public Quote API Integration Tests POST /api/v1/public/quotes/:quoteId/reject should return 400 with invalid token","status":"failed","title":"should return 400 with invalid token"},{"ancestorTitles":["Public Quote API Integration Tests","POST /api/v1/public/quotes/:quoteId/reject"],"duration":0,"failureMessages":[""],"fullName":"Public Quote API Integration Tests POST /api/v1/public/quotes/:quoteId/reject should reject already rejected quote","status":"failed","title":"should reject already rejected quote"},{"ancestorTitles":["Public Quote API Integration Tests","Quote Token Validation"],"duration":0,"failureMessages":[""],"fullName":"Public Quote API Integration Tests Quote Token Validation should validate token format","status":"failed","title":"should validate token format"},{"ancestorTitles":["Public Quote API Integration Tests","Quote Token Validation"],"duration":0,"failureMessages":[""],"fullName":"Public Quote API Integration Tests Quote Token Validation should handle bcrypt verification correctly","status":"failed","title":"should handle bcrypt verification correctly"},{"ancestorTitles":["Public Quote API Integration Tests","Quote Lifecycle State Transitions"],"duration":0,"failureMessages":[""],"fullName":"Public Quote API Integration Tests Quote Lifecycle State Transitions should only accept quote in SENT or DRAFT status","status":"failed","title":"should only accept quote in SENT or DRAFT status"},{"ancestorTitles":["Public Quote API Integration Tests","Quote Lifecycle State Transitions"],"duration":0,"failureMessages":[""],"fullName":"Public Quote API Integration Tests Quote Lifecycle State Transitions should handle concurrent acceptance attempts","status":"failed","title":"should handle concurrent acceptance attempts"},{"ancestorTitles":["Public Quote API Integration Tests","Email Notifications"],"duration":0,"failureMessages":[""],"fullName":"Public Quote API Integration Tests Email Notifications should send acceptance confirmation to customer","status":"failed","title":"should send acceptance confirmation to customer"},{"ancestorTitles":["Public Quote API Integration Tests","Email Notifications"],"duration":0,"failureMessages":[""],"fullName":"Public Quote API Integration Tests Email Notifications should send rejection notification to organization","status":"failed","title":"should send rejection notification to organization"},{"ancestorTitles":["Public Quote API Integration Tests","Security Features"],"duration":0,"failureMessages":[""],"fullName":"Public Quote API Integration Tests Security Features should prevent quote viewing without token","status":"failed","title":"should prevent quote viewing without token"},{"ancestorTitles":["Public Quote API Integration Tests","Security Features"],"duration":0,"failureMessages":[""],"fullName":"Public Quote API Integration Tests Security Features should not expose deleted quotes","status":"failed","title":"should not expose deleted quotes"},{"ancestorTitles":["Public Quote API Integration Tests","Security Features"],"duration":0,"failureMessages":[""],"fullName":"Public Quote API Integration Tests Security Features should rate limit quote viewing requests","status":"failed","title":"should rate limit quote viewing requests"}]},{"numFailingTests":14,"numPassingTests":0,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":1759565218571,"runtime":863,"slow":false,"start":1759565217708},"testFilePath":"/home/eric/Projects/accounting-api/tests/integration/intake-form-v2.test.ts","failureMessage":"  ● Intake Form V2 Integration Tests › Template Management › should create a new intake form template with steps\n\n\n\n\n\n  ● Intake Form V2 Integration Tests › Template Management › should add fields to a template step\n\n\n\n\n\n  ● Intake Form V2 Integration Tests › Template Management › should list all templates for organization\n\n\n\n\n\n  ● Intake Form V2 Integration Tests › Template Management › should prevent duplicate template names\n\n\n\n\n\n  ● Intake Form V2 Integration Tests › Session Management › should create a new anonymous session\n\n\n\n\n\n  ● Intake Form V2 Integration Tests › Session Management › should retrieve session by token\n\n\n\n\n\n  ● Intake Form V2 Integration Tests › Session Management › should update form data in session\n\n\n\n\n\n  ● Intake Form V2 Integration Tests › Session Management › should advance to next step\n\n\n\n\n\n  ● Intake Form V2 Integration Tests › Session Management › should validate required fields on submit\n\n\n\n\n\n  ● Intake Form V2 Integration Tests › Session Management › should complete session with valid data\n\n\n\n\n\n  ● Intake Form V2 Integration Tests › Session Management › should reject expired session\n\n\n\n\n\n  ● Intake Form V2 Integration Tests › Session Management › should track bot detection metrics\n\n\n\n\n\n  ● Intake Form V2 Integration Tests › Security & Rate Limiting › should rate limit session creation requests\n\n\n\n\n\n  ● Intake Form V2 Integration Tests › Security & Rate Limiting › should enforce multi-tenant isolation\n\n\n\n\n","testResults":[{"ancestorTitles":["Intake Form V2 Integration Tests","Template Management"],"duration":0,"failureMessages":[""],"fullName":"Intake Form V2 Integration Tests Template Management should create a new intake form template with steps","status":"failed","title":"should create a new intake form template with steps"},{"ancestorTitles":["Intake Form V2 Integration Tests","Template Management"],"duration":0,"failureMessages":[""],"fullName":"Intake Form V2 Integration Tests Template Management should add fields to a template step","status":"failed","title":"should add fields to a template step"},{"ancestorTitles":["Intake Form V2 Integration Tests","Template Management"],"duration":0,"failureMessages":[""],"fullName":"Intake Form V2 Integration Tests Template Management should list all templates for organization","status":"failed","title":"should list all templates for organization"},{"ancestorTitles":["Intake Form V2 Integration Tests","Template Management"],"duration":0,"failureMessages":[""],"fullName":"Intake Form V2 Integration Tests Template Management should prevent duplicate template names","status":"failed","title":"should prevent duplicate template names"},{"ancestorTitles":["Intake Form V2 Integration Tests","Session Management"],"duration":0,"failureMessages":[""],"fullName":"Intake Form V2 Integration Tests Session Management should create a new anonymous session","status":"failed","title":"should create a new anonymous session"},{"ancestorTitles":["Intake Form V2 Integration Tests","Session Management"],"duration":0,"failureMessages":[""],"fullName":"Intake Form V2 Integration Tests Session Management should retrieve session by token","status":"failed","title":"should retrieve session by token"},{"ancestorTitles":["Intake Form V2 Integration Tests","Session Management"],"duration":0,"failureMessages":[""],"fullName":"Intake Form V2 Integration Tests Session Management should update form data in session","status":"failed","title":"should update form data in session"},{"ancestorTitles":["Intake Form V2 Integration Tests","Session Management"],"duration":0,"failureMessages":[""],"fullName":"Intake Form V2 Integration Tests Session Management should advance to next step","status":"failed","title":"should advance to next step"},{"ancestorTitles":["Intake Form V2 Integration Tests","Session Management"],"duration":0,"failureMessages":[""],"fullName":"Intake Form V2 Integration Tests Session Management should validate required fields on submit","status":"failed","title":"should validate required fields on submit"},{"ancestorTitles":["Intake Form V2 Integration Tests","Session Management"],"duration":0,"failureMessages":[""],"fullName":"Intake Form V2 Integration Tests Session Management should complete session with valid data","status":"failed","title":"should complete session with valid data"},{"ancestorTitles":["Intake Form V2 Integration Tests","Session Management"],"duration":0,"failureMessages":[""],"fullName":"Intake Form V2 Integration Tests Session Management should reject expired session","status":"failed","title":"should reject expired session"},{"ancestorTitles":["Intake Form V2 Integration Tests","Session Management"],"duration":0,"failureMessages":[""],"fullName":"Intake Form V2 Integration Tests Session Management should track bot detection metrics","status":"failed","title":"should track bot detection metrics"},{"ancestorTitles":["Intake Form V2 Integration Tests","Security & Rate Limiting"],"duration":0,"failureMessages":[""],"fullName":"Intake Form V2 Integration Tests Security & Rate Limiting should rate limit session creation requests","status":"failed","title":"should rate limit session creation requests"},{"ancestorTitles":["Intake Form V2 Integration Tests","Security & Rate Limiting"],"duration":0,"failureMessages":[""],"fullName":"Intake Form V2 Integration Tests Security & Rate Limiting should enforce multi-tenant isolation","status":"failed","title":"should enforce multi-tenant isolation"}]},{"numFailingTests":44,"numPassingTests":0,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":1759565219365,"runtime":792,"slow":false,"start":1759565218573},"testFilePath":"/home/eric/Projects/accounting-api/tests/integration/invoice-pdf-generation.test.ts","failureMessage":"  ● Invoice PDF Generation Integration Tests › Basic PDF Generation › should generate PDF with default template and style\n\n\n\n\n\n  ● Invoice PDF Generation Integration Tests › Basic PDF Generation › should generate PDF with A4 format\n\n\n\n\n\n  ● Invoice PDF Generation Integration Tests › Basic PDF Generation › should generate PDF with Letter format\n\n\n\n\n\n  ● Invoice PDF Generation Integration Tests › Basic PDF Generation › should generate PDF with landscape orientation\n\n\n\n\n\n  ● Invoice PDF Generation Integration Tests › Template System Tests › should generate PDF with default template\n\n\n\n\n\n  ● Invoice PDF Generation Integration Tests › Template System Tests › should generate PDF with modern template\n\n\n\n\n\n  ● Invoice PDF Generation Integration Tests › Template System Tests › should generate PDF with minimal template\n\n\n\n\n\n  ● Invoice PDF Generation Integration Tests › Style System Tests › should generate PDF with classic style\n\n\n\n\n\n  ● Invoice PDF Generation Integration Tests › Style System Tests › should generate PDF with modern blue style\n\n\n\n\n\n  ● Invoice PDF Generation Integration Tests › Style System Tests › should generate PDF with corporate gray style\n\n\n\n\n\n  ● Invoice PDF Generation Integration Tests › Organization Branding Tests › should generate PDF with logo display enabled\n\n\n\n\n\n  ● Invoice PDF Generation Integration Tests › Organization Branding Tests › should generate PDF with organization name display enabled\n\n\n\n\n\n  ● Invoice PDF Generation Integration Tests › Organization Branding Tests › should generate PDF with custom color scheme\n\n\n\n\n\n  ● Invoice PDF Generation Integration Tests › Tax Disable Functionality › should generate PDF with taxes disabled\n\n\n\n\n\n  ● Invoice PDF Generation Integration Tests › Tax Disable Functionality › should generate PDF with taxes enabled\n\n\n\n\n\n  ● Invoice PDF Generation Integration Tests › Complex Customization Scenarios › should generate PDF with full customization\n\n\n\n\n\n  ● Invoice PDF Generation Integration Tests › PDF Regeneration Tests › should regenerate PDF with new settings\n\n\n\n\n\n  ● Invoice PDF Generation Integration Tests › PDF Regeneration Tests › should force regeneration with regenerate=true query param\n\n\n\n\n\n  ● Invoice PDF Generation Integration Tests › PDF Status Tracking › should track PDF generation status\n\n\n\n\n\n  ● Invoice PDF Generation Integration Tests › PDF Status Tracking › should filter status by template and style\n\n\n\n\n\n  ● Invoice PDF Generation Integration Tests › Error Handling › should return 404 for non-existent invoice\n\n\n\n\n\n  ● Invoice PDF Generation Integration Tests › Error Handling › should return 403 for wrong organization\n\n\n\n\n\n  ● Invoice PDF Generation Integration Tests › Error Handling › should validate invalid template ID\n\n\n\n\n\n  ● Invoice PDF Generation Integration Tests › Error Handling › should validate invalid style ID\n\n\n\n\n\n  ● Invoice PDF Generation Integration Tests › Performance Tests › should handle concurrent PDF generation requests\n\n\n\n\n\n  ● Invoice PDF Generation Integration Tests › Performance Tests › should cache and reuse PDFs when appropriate\n\n\n\n\n\n  ● Invoice PDF Generation Integration Tests › Template CRUD Operations › should get single template by ID\n\n\n\n\n\n  ● Invoice PDF Generation Integration Tests › Template CRUD Operations › should return 404 for non-existent template\n\n\n\n\n\n  ● Invoice PDF Generation Integration Tests › Template CRUD Operations › should create custom template\n\n\n\n\n\n  ● Invoice PDF Generation Integration Tests › Template CRUD Operations › should update custom template\n\n\n\n\n\n  ● Invoice PDF Generation Integration Tests › Template CRUD Operations › should not update system template\n\n\n\n\n\n  ● Invoice PDF Generation Integration Tests › Template CRUD Operations › should delete custom template\n\n\n\n\n\n  ● Invoice PDF Generation Integration Tests › Template CRUD Operations › should not delete system template\n\n\n\n\n\n  ● Invoice PDF Generation Integration Tests › Style CRUD Operations › should get single style by ID\n\n\n\n\n\n  ● Invoice PDF Generation Integration Tests › Style CRUD Operations › should return 404 for non-existent style\n\n\n\n\n\n  ● Invoice PDF Generation Integration Tests › Style CRUD Operations › should create custom style\n\n\n\n\n\n  ● Invoice PDF Generation Integration Tests › Style CRUD Operations › should update custom style\n\n\n\n\n\n  ● Invoice PDF Generation Integration Tests › Style CRUD Operations › should not update system style\n\n\n\n\n\n  ● Invoice PDF Generation Integration Tests › Style CRUD Operations › should delete custom style\n\n\n\n\n\n  ● Invoice PDF Generation Integration Tests › Style CRUD Operations › should not delete system style\n\n\n\n\n\n  ● Invoice PDF Generation Integration Tests › Style CRUD Operations › should not delete default style\n\n\n\n\n\n  ● Invoice PDF Generation Integration Tests › Security Tests › should require authentication\n\n\n\n\n\n  ● Invoice PDF Generation Integration Tests › Security Tests › should validate organization access\n\n\n\n\n\n  ● Invoice PDF Generation Integration Tests › Security Tests › should validate user permissions for regeneration\n\n\n\n\n","testResults":[{"ancestorTitles":["Invoice PDF Generation Integration Tests","Basic PDF Generation"],"duration":1,"failureMessages":[""],"fullName":"Invoice PDF Generation Integration Tests Basic PDF Generation should generate PDF with default template and style","status":"failed","title":"should generate PDF with default template and style"},{"ancestorTitles":["Invoice PDF Generation Integration Tests","Basic PDF Generation"],"duration":0,"failureMessages":[""],"fullName":"Invoice PDF Generation Integration Tests Basic PDF Generation should generate PDF with A4 format","status":"failed","title":"should generate PDF with A4 format"},{"ancestorTitles":["Invoice PDF Generation Integration Tests","Basic PDF Generation"],"duration":0,"failureMessages":[""],"fullName":"Invoice PDF Generation Integration Tests Basic PDF Generation should generate PDF with Letter format","status":"failed","title":"should generate PDF with Letter format"},{"ancestorTitles":["Invoice PDF Generation Integration Tests","Basic PDF Generation"],"duration":0,"failureMessages":[""],"fullName":"Invoice PDF Generation Integration Tests Basic PDF Generation should generate PDF with landscape orientation","status":"failed","title":"should generate PDF with landscape orientation"},{"ancestorTitles":["Invoice PDF Generation Integration Tests","Template System Tests"],"duration":0,"failureMessages":[""],"fullName":"Invoice PDF Generation Integration Tests Template System Tests should generate PDF with default template","status":"failed","title":"should generate PDF with default template"},{"ancestorTitles":["Invoice PDF Generation Integration Tests","Template System Tests"],"duration":0,"failureMessages":[""],"fullName":"Invoice PDF Generation Integration Tests Template System Tests should generate PDF with modern template","status":"failed","title":"should generate PDF with modern template"},{"ancestorTitles":["Invoice PDF Generation Integration Tests","Template System Tests"],"duration":0,"failureMessages":[""],"fullName":"Invoice PDF Generation Integration Tests Template System Tests should generate PDF with minimal template","status":"failed","title":"should generate PDF with minimal template"},{"ancestorTitles":["Invoice PDF Generation Integration Tests","Style System Tests"],"duration":0,"failureMessages":[""],"fullName":"Invoice PDF Generation Integration Tests Style System Tests should generate PDF with classic style","status":"failed","title":"should generate PDF with classic style"},{"ancestorTitles":["Invoice PDF Generation Integration Tests","Style System Tests"],"duration":0,"failureMessages":[""],"fullName":"Invoice PDF Generation Integration Tests Style System Tests should generate PDF with modern blue style","status":"failed","title":"should generate PDF with modern blue style"},{"ancestorTitles":["Invoice PDF Generation Integration Tests","Style System Tests"],"duration":0,"failureMessages":[""],"fullName":"Invoice PDF Generation Integration Tests Style System Tests should generate PDF with corporate gray style","status":"failed","title":"should generate PDF with corporate gray style"},{"ancestorTitles":["Invoice PDF Generation Integration Tests","Organization Branding Tests"],"duration":0,"failureMessages":[""],"fullName":"Invoice PDF Generation Integration Tests Organization Branding Tests should generate PDF with logo display enabled","status":"failed","title":"should generate PDF with logo display enabled"},{"ancestorTitles":["Invoice PDF Generation Integration Tests","Organization Branding Tests"],"duration":0,"failureMessages":[""],"fullName":"Invoice PDF Generation Integration Tests Organization Branding Tests should generate PDF with organization name display enabled","status":"failed","title":"should generate PDF with organization name display enabled"},{"ancestorTitles":["Invoice PDF Generation Integration Tests","Organization Branding Tests"],"duration":0,"failureMessages":[""],"fullName":"Invoice PDF Generation Integration Tests Organization Branding Tests should generate PDF with custom color scheme","status":"failed","title":"should generate PDF with custom color scheme"},{"ancestorTitles":["Invoice PDF Generation Integration Tests","Tax Disable Functionality"],"duration":0,"failureMessages":[""],"fullName":"Invoice PDF Generation Integration Tests Tax Disable Functionality should generate PDF with taxes disabled","status":"failed","title":"should generate PDF with taxes disabled"},{"ancestorTitles":["Invoice PDF Generation Integration Tests","Tax Disable Functionality"],"duration":0,"failureMessages":[""],"fullName":"Invoice PDF Generation Integration Tests Tax Disable Functionality should generate PDF with taxes enabled","status":"failed","title":"should generate PDF with taxes enabled"},{"ancestorTitles":["Invoice PDF Generation Integration Tests","Complex Customization Scenarios"],"duration":0,"failureMessages":[""],"fullName":"Invoice PDF Generation Integration Tests Complex Customization Scenarios should generate PDF with full customization","status":"failed","title":"should generate PDF with full customization"},{"ancestorTitles":["Invoice PDF Generation Integration Tests","PDF Regeneration Tests"],"duration":0,"failureMessages":[""],"fullName":"Invoice PDF Generation Integration Tests PDF Regeneration Tests should regenerate PDF with new settings","status":"failed","title":"should regenerate PDF with new settings"},{"ancestorTitles":["Invoice PDF Generation Integration Tests","PDF Regeneration Tests"],"duration":0,"failureMessages":[""],"fullName":"Invoice PDF Generation Integration Tests PDF Regeneration Tests should force regeneration with regenerate=true query param","status":"failed","title":"should force regeneration with regenerate=true query param"},{"ancestorTitles":["Invoice PDF Generation Integration Tests","PDF Status Tracking"],"duration":0,"failureMessages":[""],"fullName":"Invoice PDF Generation Integration Tests PDF Status Tracking should track PDF generation status","status":"failed","title":"should track PDF generation status"},{"ancestorTitles":["Invoice PDF Generation Integration Tests","PDF Status Tracking"],"duration":0,"failureMessages":[""],"fullName":"Invoice PDF Generation Integration Tests PDF Status Tracking should filter status by template and style","status":"failed","title":"should filter status by template and style"},{"ancestorTitles":["Invoice PDF Generation Integration Tests","Error Handling"],"duration":0,"failureMessages":[""],"fullName":"Invoice PDF Generation Integration Tests Error Handling should return 404 for non-existent invoice","status":"failed","title":"should return 404 for non-existent invoice"},{"ancestorTitles":["Invoice PDF Generation Integration Tests","Error Handling"],"duration":0,"failureMessages":[""],"fullName":"Invoice PDF Generation Integration Tests Error Handling should return 403 for wrong organization","status":"failed","title":"should return 403 for wrong organization"},{"ancestorTitles":["Invoice PDF Generation Integration Tests","Error Handling"],"duration":0,"failureMessages":[""],"fullName":"Invoice PDF Generation Integration Tests Error Handling should validate invalid template ID","status":"failed","title":"should validate invalid template ID"},{"ancestorTitles":["Invoice PDF Generation Integration Tests","Error Handling"],"duration":0,"failureMessages":[""],"fullName":"Invoice PDF Generation Integration Tests Error Handling should validate invalid style ID","status":"failed","title":"should validate invalid style ID"},{"ancestorTitles":["Invoice PDF Generation Integration Tests","Performance Tests"],"duration":0,"failureMessages":[""],"fullName":"Invoice PDF Generation Integration Tests Performance Tests should handle concurrent PDF generation requests","status":"failed","title":"should handle concurrent PDF generation requests"},{"ancestorTitles":["Invoice PDF Generation Integration Tests","Performance Tests"],"duration":0,"failureMessages":[""],"fullName":"Invoice PDF Generation Integration Tests Performance Tests should cache and reuse PDFs when appropriate","status":"failed","title":"should cache and reuse PDFs when appropriate"},{"ancestorTitles":["Invoice PDF Generation Integration Tests","Template CRUD Operations"],"duration":0,"failureMessages":[""],"fullName":"Invoice PDF Generation Integration Tests Template CRUD Operations should get single template by ID","status":"failed","title":"should get single template by ID"},{"ancestorTitles":["Invoice PDF Generation Integration Tests","Template CRUD Operations"],"duration":0,"failureMessages":[""],"fullName":"Invoice PDF Generation Integration Tests Template CRUD Operations should return 404 for non-existent template","status":"failed","title":"should return 404 for non-existent template"},{"ancestorTitles":["Invoice PDF Generation Integration Tests","Template CRUD Operations"],"duration":0,"failureMessages":[""],"fullName":"Invoice PDF Generation Integration Tests Template CRUD Operations should create custom template","status":"failed","title":"should create custom template"},{"ancestorTitles":["Invoice PDF Generation Integration Tests","Template CRUD Operations"],"duration":0,"failureMessages":[""],"fullName":"Invoice PDF Generation Integration Tests Template CRUD Operations should update custom template","status":"failed","title":"should update custom template"},{"ancestorTitles":["Invoice PDF Generation Integration Tests","Template CRUD Operations"],"duration":0,"failureMessages":[""],"fullName":"Invoice PDF Generation Integration Tests Template CRUD Operations should not update system template","status":"failed","title":"should not update system template"},{"ancestorTitles":["Invoice PDF Generation Integration Tests","Template CRUD Operations"],"duration":0,"failureMessages":[""],"fullName":"Invoice PDF Generation Integration Tests Template CRUD Operations should delete custom template","status":"failed","title":"should delete custom template"},{"ancestorTitles":["Invoice PDF Generation Integration Tests","Template CRUD Operations"],"duration":0,"failureMessages":[""],"fullName":"Invoice PDF Generation Integration Tests Template CRUD Operations should not delete system template","status":"failed","title":"should not delete system template"},{"ancestorTitles":["Invoice PDF Generation Integration Tests","Style CRUD Operations"],"duration":0,"failureMessages":[""],"fullName":"Invoice PDF Generation Integration Tests Style CRUD Operations should get single style by ID","status":"failed","title":"should get single style by ID"},{"ancestorTitles":["Invoice PDF Generation Integration Tests","Style CRUD Operations"],"duration":0,"failureMessages":[""],"fullName":"Invoice PDF Generation Integration Tests Style CRUD Operations should return 404 for non-existent style","status":"failed","title":"should return 404 for non-existent style"},{"ancestorTitles":["Invoice PDF Generation Integration Tests","Style CRUD Operations"],"duration":0,"failureMessages":[""],"fullName":"Invoice PDF Generation Integration Tests Style CRUD Operations should create custom style","status":"failed","title":"should create custom style"},{"ancestorTitles":["Invoice PDF Generation Integration Tests","Style CRUD Operations"],"duration":0,"failureMessages":[""],"fullName":"Invoice PDF Generation Integration Tests Style CRUD Operations should update custom style","status":"failed","title":"should update custom style"},{"ancestorTitles":["Invoice PDF Generation Integration Tests","Style CRUD Operations"],"duration":0,"failureMessages":[""],"fullName":"Invoice PDF Generation Integration Tests Style CRUD Operations should not update system style","status":"failed","title":"should not update system style"},{"ancestorTitles":["Invoice PDF Generation Integration Tests","Style CRUD Operations"],"duration":0,"failureMessages":[""],"fullName":"Invoice PDF Generation Integration Tests Style CRUD Operations should delete custom style","status":"failed","title":"should delete custom style"},{"ancestorTitles":["Invoice PDF Generation Integration Tests","Style CRUD Operations"],"duration":0,"failureMessages":[""],"fullName":"Invoice PDF Generation Integration Tests Style CRUD Operations should not delete system style","status":"failed","title":"should not delete system style"},{"ancestorTitles":["Invoice PDF Generation Integration Tests","Style CRUD Operations"],"duration":0,"failureMessages":[""],"fullName":"Invoice PDF Generation Integration Tests Style CRUD Operations should not delete default style","status":"failed","title":"should not delete default style"},{"ancestorTitles":["Invoice PDF Generation Integration Tests","Security Tests"],"duration":0,"failureMessages":[""],"fullName":"Invoice PDF Generation Integration Tests Security Tests should require authentication","status":"failed","title":"should require authentication"},{"ancestorTitles":["Invoice PDF Generation Integration Tests","Security Tests"],"duration":0,"failureMessages":[""],"fullName":"Invoice PDF Generation Integration Tests Security Tests should validate organization access","status":"failed","title":"should validate organization access"},{"ancestorTitles":["Invoice PDF Generation Integration Tests","Security Tests"],"duration":0,"failureMessages":[""],"fullName":"Invoice PDF Generation Integration Tests Security Tests should validate user permissions for regeneration","status":"failed","title":"should validate user permissions for regeneration"}]},{"numFailingTests":4,"numPassingTests":0,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":1759565220024,"runtime":655,"slow":false,"start":1759565219369},"testFilePath":"/home/eric/Projects/accounting-api/tests/integration/customer-lifecycle-workflow.test.ts","failureMessage":"  ● Complete Customer Lifecycle Workflow Integration Tests › 8-Stage Customer Lifecycle: Complete End-to-End Workflow › should complete all 8 stages of customer lifecycle with comprehensive validations\n\n\n\n\n\n  ● Complete Customer Lifecycle Workflow Integration Tests › 8-Stage Customer Lifecycle: Complete End-to-End Workflow › should handle workflow failures and recovery scenarios\n\n\n\n\n\n  ● Complete Customer Lifecycle Workflow Integration Tests › Role-Based Workflow Permissions › should enforce proper role permissions throughout lifecycle\n\n\n\n\n\n  ● Complete Customer Lifecycle Workflow Integration Tests › Data Integrity and Consistency › should maintain data integrity throughout entire workflow\n\n\n\n\n","testResults":[{"ancestorTitles":["Complete Customer Lifecycle Workflow Integration Tests","8-Stage Customer Lifecycle: Complete End-to-End Workflow"],"duration":0,"failureMessages":[""],"fullName":"Complete Customer Lifecycle Workflow Integration Tests 8-Stage Customer Lifecycle: Complete End-to-End Workflow should complete all 8 stages of customer lifecycle with comprehensive validations","status":"failed","title":"should complete all 8 stages of customer lifecycle with comprehensive validations"},{"ancestorTitles":["Complete Customer Lifecycle Workflow Integration Tests","8-Stage Customer Lifecycle: Complete End-to-End Workflow"],"duration":0,"failureMessages":[""],"fullName":"Complete Customer Lifecycle Workflow Integration Tests 8-Stage Customer Lifecycle: Complete End-to-End Workflow should handle workflow failures and recovery scenarios","status":"failed","title":"should handle workflow failures and recovery scenarios"},{"ancestorTitles":["Complete Customer Lifecycle Workflow Integration Tests","Role-Based Workflow Permissions"],"duration":0,"failureMessages":[""],"fullName":"Complete Customer Lifecycle Workflow Integration Tests Role-Based Workflow Permissions should enforce proper role permissions throughout lifecycle","status":"failed","title":"should enforce proper role permissions throughout lifecycle"},{"ancestorTitles":["Complete Customer Lifecycle Workflow Integration Tests","Data Integrity and Consistency"],"duration":0,"failureMessages":[""],"fullName":"Complete Customer Lifecycle Workflow Integration Tests Data Integrity and Consistency should maintain data integrity throughout entire workflow","status":"failed","title":"should maintain data integrity throughout entire workflow"}]},{"numFailingTests":10,"numPassingTests":0,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":1759565220667,"runtime":641,"slow":false,"start":1759565220026},"testFilePath":"/home/eric/Projects/accounting-api/tests/integration/multi-tenant-isolation.test.ts","failureMessage":"  ● Multi-Tenant Isolation Integration Tests › Data Isolation Between Tenants › should prevent cross-tenant data access for all entities\n\n\n\n\n\n  ● Multi-Tenant Isolation Integration Tests › Data Isolation Between Tenants › should prevent cross-tenant data modification\n\n\n\n\n\n  ● Multi-Tenant Isolation Integration Tests › Data Isolation Between Tenants › should maintain audit log isolation\n\n\n\n\n\n  ● Multi-Tenant Isolation Integration Tests › Role-Based Access Control Across Tenants › should enforce RBAC within tenant boundaries\n\n\n\n\n\n  ● Multi-Tenant Isolation Integration Tests › Role-Based Access Control Across Tenants › should handle role elevation attempts across tenants\n\n\n\n\n\n  ● Multi-Tenant Isolation Integration Tests › API Key and Session Isolation › should isolate API keys between tenants\n\n\n\n\n\n  ● Multi-Tenant Isolation Integration Tests › API Key and Session Isolation › should isolate user sessions between tenants\n\n\n\n\n\n  ● Multi-Tenant Isolation Integration Tests › Cross-Tenant Attack Prevention › should prevent tenant ID manipulation attacks\n\n\n\n\n\n  ● Multi-Tenant Isolation Integration Tests › Cross-Tenant Attack Prevention › should prevent SQL injection across tenant boundaries\n\n\n\n\n\n  ● Multi-Tenant Isolation Integration Tests › Cross-Tenant Attack Prevention › should handle concurrent operations without cross-tenant pollution\n\n\n\n\n","testResults":[{"ancestorTitles":["Multi-Tenant Isolation Integration Tests","Data Isolation Between Tenants"],"duration":0,"failureMessages":[""],"fullName":"Multi-Tenant Isolation Integration Tests Data Isolation Between Tenants should prevent cross-tenant data access for all entities","status":"failed","title":"should prevent cross-tenant data access for all entities"},{"ancestorTitles":["Multi-Tenant Isolation Integration Tests","Data Isolation Between Tenants"],"duration":0,"failureMessages":[""],"fullName":"Multi-Tenant Isolation Integration Tests Data Isolation Between Tenants should prevent cross-tenant data modification","status":"failed","title":"should prevent cross-tenant data modification"},{"ancestorTitles":["Multi-Tenant Isolation Integration Tests","Data Isolation Between Tenants"],"duration":0,"failureMessages":[""],"fullName":"Multi-Tenant Isolation Integration Tests Data Isolation Between Tenants should maintain audit log isolation","status":"failed","title":"should maintain audit log isolation"},{"ancestorTitles":["Multi-Tenant Isolation Integration Tests","Role-Based Access Control Across Tenants"],"duration":0,"failureMessages":[""],"fullName":"Multi-Tenant Isolation Integration Tests Role-Based Access Control Across Tenants should enforce RBAC within tenant boundaries","status":"failed","title":"should enforce RBAC within tenant boundaries"},{"ancestorTitles":["Multi-Tenant Isolation Integration Tests","Role-Based Access Control Across Tenants"],"duration":0,"failureMessages":[""],"fullName":"Multi-Tenant Isolation Integration Tests Role-Based Access Control Across Tenants should handle role elevation attempts across tenants","status":"failed","title":"should handle role elevation attempts across tenants"},{"ancestorTitles":["Multi-Tenant Isolation Integration Tests","API Key and Session Isolation"],"duration":0,"failureMessages":[""],"fullName":"Multi-Tenant Isolation Integration Tests API Key and Session Isolation should isolate API keys between tenants","status":"failed","title":"should isolate API keys between tenants"},{"ancestorTitles":["Multi-Tenant Isolation Integration Tests","API Key and Session Isolation"],"duration":0,"failureMessages":[""],"fullName":"Multi-Tenant Isolation Integration Tests API Key and Session Isolation should isolate user sessions between tenants","status":"failed","title":"should isolate user sessions between tenants"},{"ancestorTitles":["Multi-Tenant Isolation Integration Tests","Cross-Tenant Attack Prevention"],"duration":0,"failureMessages":[""],"fullName":"Multi-Tenant Isolation Integration Tests Cross-Tenant Attack Prevention should prevent tenant ID manipulation attacks","status":"failed","title":"should prevent tenant ID manipulation attacks"},{"ancestorTitles":["Multi-Tenant Isolation Integration Tests","Cross-Tenant Attack Prevention"],"duration":0,"failureMessages":[""],"fullName":"Multi-Tenant Isolation Integration Tests Cross-Tenant Attack Prevention should prevent SQL injection across tenant boundaries","status":"failed","title":"should prevent SQL injection across tenant boundaries"},{"ancestorTitles":["Multi-Tenant Isolation Integration Tests","Cross-Tenant Attack Prevention"],"duration":0,"failureMessages":[""],"fullName":"Multi-Tenant Isolation Integration Tests Cross-Tenant Attack Prevention should handle concurrent operations without cross-tenant pollution","status":"failed","title":"should handle concurrent operations without cross-tenant pollution"}]},{"numFailingTests":13,"numPassingTests":0,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":1759565221316,"runtime":647,"slow":false,"start":1759565220669},"testFilePath":"/home/eric/Projects/accounting-api/tests/integration/multi-tenant-financial-isolation.test.ts","failureMessage":"  ● Multi-Tenant Financial Data Isolation Tests › Financial Transaction Isolation › should isolate payment transactions between organizations\n\n\n\n\n\n  ● Multi-Tenant Financial Data Isolation Tests › Financial Transaction Isolation › should isolate e-Transfer transactions with Canadian compliance\n\n\n\n\n\n  ● Multi-Tenant Financial Data Isolation Tests › Financial Statement and Accounting Isolation › should isolate chart of accounts between organizations\n\n\n\n\n\n  ● Multi-Tenant Financial Data Isolation Tests › Financial Statement and Accounting Isolation › should isolate journal entries and transactions\n\n\n\n\n\n  ● Multi-Tenant Financial Data Isolation Tests › Financial Statement and Accounting Isolation › should isolate financial statements between organizations\n\n\n\n\n\n  ● Multi-Tenant Financial Data Isolation Tests › Canadian Tax Compliance Isolation › should isolate GST/HST calculations between provinces\n\n\n\n\n\n  ● Multi-Tenant Financial Data Isolation Tests › Canadian Tax Compliance Isolation › should isolate tax filing and compliance data\n\n\n\n\n\n  ● Multi-Tenant Financial Data Isolation Tests › Organization-Specific Encryption Key Usage › should use organization-specific encryption keys for sensitive data\n\n\n\n\n\n  ● Multi-Tenant Financial Data Isolation Tests › Organization-Specific Encryption Key Usage › should isolate API keys with organization-specific encryption\n\n\n\n\n\n  ● Multi-Tenant Financial Data Isolation Tests › Cross-Tenant Financial Attack Prevention › should prevent financial data enumeration attacks\n\n\n\n\n\n  ● Multi-Tenant Financial Data Isolation Tests › Cross-Tenant Financial Attack Prevention › should prevent cross-tenant invoice manipulation attacks\n\n\n\n\n\n  ● Multi-Tenant Financial Data Isolation Tests › Cross-Tenant Financial Attack Prevention › should prevent cross-tenant payment processing attacks\n\n\n\n\n\n  ● Multi-Tenant Financial Data Isolation Tests › Concurrent Multi-Tenant Financial Operations › should handle concurrent financial operations without cross-contamination\n\n\n\n\n","testResults":[{"ancestorTitles":["Multi-Tenant Financial Data Isolation Tests","Financial Transaction Isolation"],"duration":0,"failureMessages":[""],"fullName":"Multi-Tenant Financial Data Isolation Tests Financial Transaction Isolation should isolate payment transactions between organizations","status":"failed","title":"should isolate payment transactions between organizations"},{"ancestorTitles":["Multi-Tenant Financial Data Isolation Tests","Financial Transaction Isolation"],"duration":0,"failureMessages":[""],"fullName":"Multi-Tenant Financial Data Isolation Tests Financial Transaction Isolation should isolate e-Transfer transactions with Canadian compliance","status":"failed","title":"should isolate e-Transfer transactions with Canadian compliance"},{"ancestorTitles":["Multi-Tenant Financial Data Isolation Tests","Financial Statement and Accounting Isolation"],"duration":1,"failureMessages":[""],"fullName":"Multi-Tenant Financial Data Isolation Tests Financial Statement and Accounting Isolation should isolate chart of accounts between organizations","status":"failed","title":"should isolate chart of accounts between organizations"},{"ancestorTitles":["Multi-Tenant Financial Data Isolation Tests","Financial Statement and Accounting Isolation"],"duration":0,"failureMessages":[""],"fullName":"Multi-Tenant Financial Data Isolation Tests Financial Statement and Accounting Isolation should isolate journal entries and transactions","status":"failed","title":"should isolate journal entries and transactions"},{"ancestorTitles":["Multi-Tenant Financial Data Isolation Tests","Financial Statement and Accounting Isolation"],"duration":0,"failureMessages":[""],"fullName":"Multi-Tenant Financial Data Isolation Tests Financial Statement and Accounting Isolation should isolate financial statements between organizations","status":"failed","title":"should isolate financial statements between organizations"},{"ancestorTitles":["Multi-Tenant Financial Data Isolation Tests","Canadian Tax Compliance Isolation"],"duration":0,"failureMessages":[""],"fullName":"Multi-Tenant Financial Data Isolation Tests Canadian Tax Compliance Isolation should isolate GST/HST calculations between provinces","status":"failed","title":"should isolate GST/HST calculations between provinces"},{"ancestorTitles":["Multi-Tenant Financial Data Isolation Tests","Canadian Tax Compliance Isolation"],"duration":0,"failureMessages":[""],"fullName":"Multi-Tenant Financial Data Isolation Tests Canadian Tax Compliance Isolation should isolate tax filing and compliance data","status":"failed","title":"should isolate tax filing and compliance data"},{"ancestorTitles":["Multi-Tenant Financial Data Isolation Tests","Organization-Specific Encryption Key Usage"],"duration":0,"failureMessages":[""],"fullName":"Multi-Tenant Financial Data Isolation Tests Organization-Specific Encryption Key Usage should use organization-specific encryption keys for sensitive data","status":"failed","title":"should use organization-specific encryption keys for sensitive data"},{"ancestorTitles":["Multi-Tenant Financial Data Isolation Tests","Organization-Specific Encryption Key Usage"],"duration":0,"failureMessages":[""],"fullName":"Multi-Tenant Financial Data Isolation Tests Organization-Specific Encryption Key Usage should isolate API keys with organization-specific encryption","status":"failed","title":"should isolate API keys with organization-specific encryption"},{"ancestorTitles":["Multi-Tenant Financial Data Isolation Tests","Cross-Tenant Financial Attack Prevention"],"duration":0,"failureMessages":[""],"fullName":"Multi-Tenant Financial Data Isolation Tests Cross-Tenant Financial Attack Prevention should prevent financial data enumeration attacks","status":"failed","title":"should prevent financial data enumeration attacks"},{"ancestorTitles":["Multi-Tenant Financial Data Isolation Tests","Cross-Tenant Financial Attack Prevention"],"duration":0,"failureMessages":[""],"fullName":"Multi-Tenant Financial Data Isolation Tests Cross-Tenant Financial Attack Prevention should prevent cross-tenant invoice manipulation attacks","status":"failed","title":"should prevent cross-tenant invoice manipulation attacks"},{"ancestorTitles":["Multi-Tenant Financial Data Isolation Tests","Cross-Tenant Financial Attack Prevention"],"duration":0,"failureMessages":[""],"fullName":"Multi-Tenant Financial Data Isolation Tests Cross-Tenant Financial Attack Prevention should prevent cross-tenant payment processing attacks","status":"failed","title":"should prevent cross-tenant payment processing attacks"},{"ancestorTitles":["Multi-Tenant Financial Data Isolation Tests","Concurrent Multi-Tenant Financial Operations"],"duration":0,"failureMessages":[""],"fullName":"Multi-Tenant Financial Data Isolation Tests Concurrent Multi-Tenant Financial Operations should handle concurrent financial operations without cross-contamination","status":"failed","title":"should handle concurrent financial operations without cross-contamination"}]},{"numFailingTests":5,"numPassingTests":0,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":1759565221952,"runtime":635,"slow":false,"start":1759565221317},"testFilePath":"/home/eric/Projects/accounting-api/tests/integration/financial-workflow.test.ts","failureMessage":"  ● Financial Workflow Integration Tests › Complete Accounting Cycle: Quote → Invoice → Payment → Journal Entries → Financial Statements › should complete full accounting cycle with double-entry bookkeeping\n\n\n\n\n\n  ● Financial Workflow Integration Tests › Complete Accounting Cycle: Quote → Invoice → Payment → Journal Entries → Financial Statements › should handle complex Canadian tax scenarios\n\n\n\n\n\n  ● Financial Workflow Integration Tests › Complete Accounting Cycle: Quote → Invoice → Payment → Journal Entries → Financial Statements › should handle multi-currency transactions\n\n\n\n\n\n  ● Financial Workflow Integration Tests › Financial Reporting and Analytics › should generate basic financial reports\n\n\n\n\n\n  ● Financial Workflow Integration Tests › Financial Reporting and Analytics › should track project profitability\n\n\n\n\n","testResults":[{"ancestorTitles":["Financial Workflow Integration Tests","Complete Accounting Cycle: Quote → Invoice → Payment → Journal Entries → Financial Statements"],"duration":0,"failureMessages":[""],"fullName":"Financial Workflow Integration Tests Complete Accounting Cycle: Quote → Invoice → Payment → Journal Entries → Financial Statements should complete full accounting cycle with double-entry bookkeeping","status":"failed","title":"should complete full accounting cycle with double-entry bookkeeping"},{"ancestorTitles":["Financial Workflow Integration Tests","Complete Accounting Cycle: Quote → Invoice → Payment → Journal Entries → Financial Statements"],"duration":0,"failureMessages":[""],"fullName":"Financial Workflow Integration Tests Complete Accounting Cycle: Quote → Invoice → Payment → Journal Entries → Financial Statements should handle complex Canadian tax scenarios","status":"failed","title":"should handle complex Canadian tax scenarios"},{"ancestorTitles":["Financial Workflow Integration Tests","Complete Accounting Cycle: Quote → Invoice → Payment → Journal Entries → Financial Statements"],"duration":0,"failureMessages":[""],"fullName":"Financial Workflow Integration Tests Complete Accounting Cycle: Quote → Invoice → Payment → Journal Entries → Financial Statements should handle multi-currency transactions","status":"failed","title":"should handle multi-currency transactions"},{"ancestorTitles":["Financial Workflow Integration Tests","Financial Reporting and Analytics"],"duration":0,"failureMessages":[""],"fullName":"Financial Workflow Integration Tests Financial Reporting and Analytics should generate basic financial reports","status":"failed","title":"should generate basic financial reports"},{"ancestorTitles":["Financial Workflow Integration Tests","Financial Reporting and Analytics"],"duration":0,"failureMessages":[""],"fullName":"Financial Workflow Integration Tests Financial Reporting and Analytics should track project profitability","status":"failed","title":"should track project profitability"}]},{"numFailingTests":11,"numPassingTests":0,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":1759565222955,"runtime":1001,"slow":false,"start":1759565221954},"testFilePath":"/home/eric/Projects/accounting-api/tests/integration/customer-lifecycle-workflow-permissions.test.ts","failureMessage":"  ● Customer Lifecycle Workflow Permissions Tests › Stage 1: Request Quote - Initial Customer Contact › should enforce proper permissions for quote request stage\n\n\n\n\n\n  ● Customer Lifecycle Workflow Permissions Tests › Stage 1: Request Quote - Initial Customer Contact › should track customer lifecycle stage transitions\n\n\n\n\n\n  ● Customer Lifecycle Workflow Permissions Tests › Stage 2: Quote Estimated - Professional Quote Creation › should enforce BOOKKEEPER+ permissions for quote creation\n\n\n\n\n\n  ● Customer Lifecycle Workflow Permissions Tests › Stage 2: Quote Estimated - Professional Quote Creation › should validate quote estimation workflow controls\n\n\n\n\n\n  ● Customer Lifecycle Workflow Permissions Tests › Stage 3: Quote Accepted - Customer Commitment › should enforce USER+ permissions for quote acceptance\n\n\n\n\n\n  ● Customer Lifecycle Workflow Permissions Tests › Stage 4: Appointment Scheduled - Project Planning › should enforce BOOKKEEPER+ permissions for appointment management\n\n\n\n\n\n  ● Customer Lifecycle Workflow Permissions Tests › Stage 5: Invoice Generated - Billing Initiation › should enforce BOOKKEEPER+ permissions for invoice generation\n\n\n\n\n\n  ● Customer Lifecycle Workflow Permissions Tests › Stage 6: Deposit Paid - Financial Commitment › should enforce USER+ permissions for payment processing\n\n\n\n\n\n  ● Customer Lifecycle Workflow Permissions Tests › Stage 7: Work Begins - Project Execution › should enforce ADMIN+ permissions for project initiation\n\n\n\n\n\n  ● Customer Lifecycle Workflow Permissions Tests › Stage 8: Project Completion - Final Billing and Closure › should enforce BOOKKEEPER+ permissions for project completion\n\n\n\n\n\n  ● Customer Lifecycle Workflow Permissions Tests › End-to-End Workflow Permission Validation › should validate complete 8-stage workflow with proper role transitions\n\n\n\n\n","testResults":[{"ancestorTitles":["Customer Lifecycle Workflow Permissions Tests","Stage 1: Request Quote - Initial Customer Contact"],"duration":0,"failureMessages":[""],"fullName":"Customer Lifecycle Workflow Permissions Tests Stage 1: Request Quote - Initial Customer Contact should enforce proper permissions for quote request stage","status":"failed","title":"should enforce proper permissions for quote request stage"},{"ancestorTitles":["Customer Lifecycle Workflow Permissions Tests","Stage 1: Request Quote - Initial Customer Contact"],"duration":0,"failureMessages":[""],"fullName":"Customer Lifecycle Workflow Permissions Tests Stage 1: Request Quote - Initial Customer Contact should track customer lifecycle stage transitions","status":"failed","title":"should track customer lifecycle stage transitions"},{"ancestorTitles":["Customer Lifecycle Workflow Permissions Tests","Stage 2: Quote Estimated - Professional Quote Creation"],"duration":0,"failureMessages":[""],"fullName":"Customer Lifecycle Workflow Permissions Tests Stage 2: Quote Estimated - Professional Quote Creation should enforce BOOKKEEPER+ permissions for quote creation","status":"failed","title":"should enforce BOOKKEEPER+ permissions for quote creation"},{"ancestorTitles":["Customer Lifecycle Workflow Permissions Tests","Stage 2: Quote Estimated - Professional Quote Creation"],"duration":0,"failureMessages":[""],"fullName":"Customer Lifecycle Workflow Permissions Tests Stage 2: Quote Estimated - Professional Quote Creation should validate quote estimation workflow controls","status":"failed","title":"should validate quote estimation workflow controls"},{"ancestorTitles":["Customer Lifecycle Workflow Permissions Tests","Stage 3: Quote Accepted - Customer Commitment"],"duration":0,"failureMessages":[""],"fullName":"Customer Lifecycle Workflow Permissions Tests Stage 3: Quote Accepted - Customer Commitment should enforce USER+ permissions for quote acceptance","status":"failed","title":"should enforce USER+ permissions for quote acceptance"},{"ancestorTitles":["Customer Lifecycle Workflow Permissions Tests","Stage 4: Appointment Scheduled - Project Planning"],"duration":0,"failureMessages":[""],"fullName":"Customer Lifecycle Workflow Permissions Tests Stage 4: Appointment Scheduled - Project Planning should enforce BOOKKEEPER+ permissions for appointment management","status":"failed","title":"should enforce BOOKKEEPER+ permissions for appointment management"},{"ancestorTitles":["Customer Lifecycle Workflow Permissions Tests","Stage 5: Invoice Generated - Billing Initiation"],"duration":0,"failureMessages":[""],"fullName":"Customer Lifecycle Workflow Permissions Tests Stage 5: Invoice Generated - Billing Initiation should enforce BOOKKEEPER+ permissions for invoice generation","status":"failed","title":"should enforce BOOKKEEPER+ permissions for invoice generation"},{"ancestorTitles":["Customer Lifecycle Workflow Permissions Tests","Stage 6: Deposit Paid - Financial Commitment"],"duration":0,"failureMessages":[""],"fullName":"Customer Lifecycle Workflow Permissions Tests Stage 6: Deposit Paid - Financial Commitment should enforce USER+ permissions for payment processing","status":"failed","title":"should enforce USER+ permissions for payment processing"},{"ancestorTitles":["Customer Lifecycle Workflow Permissions Tests","Stage 7: Work Begins - Project Execution"],"duration":0,"failureMessages":[""],"fullName":"Customer Lifecycle Workflow Permissions Tests Stage 7: Work Begins - Project Execution should enforce ADMIN+ permissions for project initiation","status":"failed","title":"should enforce ADMIN+ permissions for project initiation"},{"ancestorTitles":["Customer Lifecycle Workflow Permissions Tests","Stage 8: Project Completion - Final Billing and Closure"],"duration":0,"failureMessages":[""],"fullName":"Customer Lifecycle Workflow Permissions Tests Stage 8: Project Completion - Final Billing and Closure should enforce BOOKKEEPER+ permissions for project completion","status":"failed","title":"should enforce BOOKKEEPER+ permissions for project completion"},{"ancestorTitles":["Customer Lifecycle Workflow Permissions Tests","End-to-End Workflow Permission Validation"],"duration":0,"failureMessages":[""],"fullName":"Customer Lifecycle Workflow Permissions Tests End-to-End Workflow Permission Validation should validate complete 8-stage workflow with proper role transitions","status":"failed","title":"should validate complete 8-stage workflow with proper role transitions"}]},{"numFailingTests":16,"numPassingTests":0,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":1759565223602,"runtime":644,"slow":false,"start":1759565222958},"testFilePath":"/home/eric/Projects/accounting-api/tests/integration/payment-integration.test.ts","failureMessage":"  ● Payment Integration Tests › Stripe Payment Processing › should process complete Stripe payment flow\n\n\n\n\n\n  ● Payment Integration Tests › Stripe Payment Processing › should handle Stripe payment failures\n\n\n\n\n\n  ● Payment Integration Tests › Stripe Payment Processing › should handle partial payments via Stripe\n\n\n\n\n\n  ● Payment Integration Tests › Stripe Payment Processing › should handle Stripe refunds\n\n\n\n\n\n  ● Payment Integration Tests › E-Transfer Payment Processing › should process e-transfer payment workflow\n\n\n\n\n\n  ● Payment Integration Tests › E-Transfer Payment Processing › should handle e-transfer timeout and cancellation\n\n\n\n\n\n  ● Payment Integration Tests › Manual Payment Processing › should record manual cash payment\n\n\n\n\n\n  ● Payment Integration Tests › Manual Payment Processing › should record manual cheque payment\n\n\n\n\n\n  ● Payment Integration Tests › Manual Payment Processing › should handle bounced cheque\n\n\n\n\n\n  ● Payment Integration Tests › Payment Reconciliation › should reconcile multiple payments for single invoice\n\n\n\n\n\n  ● Payment Integration Tests › Payment Reconciliation › should handle overpayment scenarios\n\n\n\n\n\n  ● Payment Integration Tests › Payment Reconciliation › should generate payment reconciliation report\n\n\n\n\n\n  ● Payment Integration Tests › Payment Security and Validation › should validate payment amounts and prevent fraud\n\n\n\n\n\n  ● Payment Integration Tests › Payment Security and Validation › should handle payment processor webhooks securely\n\n\n\n\n\n  ● Payment Integration Tests › Payment Security and Validation › should prevent duplicate payment processing\n\n\n\n\n\n  ● Payment Integration Tests › Payment Analytics and Reporting › should generate comprehensive payment analytics\n\n\n\n\n","testResults":[{"ancestorTitles":["Payment Integration Tests","Stripe Payment Processing"],"duration":0,"failureMessages":[""],"fullName":"Payment Integration Tests Stripe Payment Processing should process complete Stripe payment flow","status":"failed","title":"should process complete Stripe payment flow"},{"ancestorTitles":["Payment Integration Tests","Stripe Payment Processing"],"duration":0,"failureMessages":[""],"fullName":"Payment Integration Tests Stripe Payment Processing should handle Stripe payment failures","status":"failed","title":"should handle Stripe payment failures"},{"ancestorTitles":["Payment Integration Tests","Stripe Payment Processing"],"duration":0,"failureMessages":[""],"fullName":"Payment Integration Tests Stripe Payment Processing should handle partial payments via Stripe","status":"failed","title":"should handle partial payments via Stripe"},{"ancestorTitles":["Payment Integration Tests","Stripe Payment Processing"],"duration":0,"failureMessages":[""],"fullName":"Payment Integration Tests Stripe Payment Processing should handle Stripe refunds","status":"failed","title":"should handle Stripe refunds"},{"ancestorTitles":["Payment Integration Tests","E-Transfer Payment Processing"],"duration":0,"failureMessages":[""],"fullName":"Payment Integration Tests E-Transfer Payment Processing should process e-transfer payment workflow","status":"failed","title":"should process e-transfer payment workflow"},{"ancestorTitles":["Payment Integration Tests","E-Transfer Payment Processing"],"duration":0,"failureMessages":[""],"fullName":"Payment Integration Tests E-Transfer Payment Processing should handle e-transfer timeout and cancellation","status":"failed","title":"should handle e-transfer timeout and cancellation"},{"ancestorTitles":["Payment Integration Tests","Manual Payment Processing"],"duration":0,"failureMessages":[""],"fullName":"Payment Integration Tests Manual Payment Processing should record manual cash payment","status":"failed","title":"should record manual cash payment"},{"ancestorTitles":["Payment Integration Tests","Manual Payment Processing"],"duration":0,"failureMessages":[""],"fullName":"Payment Integration Tests Manual Payment Processing should record manual cheque payment","status":"failed","title":"should record manual cheque payment"},{"ancestorTitles":["Payment Integration Tests","Manual Payment Processing"],"duration":0,"failureMessages":[""],"fullName":"Payment Integration Tests Manual Payment Processing should handle bounced cheque","status":"failed","title":"should handle bounced cheque"},{"ancestorTitles":["Payment Integration Tests","Payment Reconciliation"],"duration":0,"failureMessages":[""],"fullName":"Payment Integration Tests Payment Reconciliation should reconcile multiple payments for single invoice","status":"failed","title":"should reconcile multiple payments for single invoice"},{"ancestorTitles":["Payment Integration Tests","Payment Reconciliation"],"duration":0,"failureMessages":[""],"fullName":"Payment Integration Tests Payment Reconciliation should handle overpayment scenarios","status":"failed","title":"should handle overpayment scenarios"},{"ancestorTitles":["Payment Integration Tests","Payment Reconciliation"],"duration":0,"failureMessages":[""],"fullName":"Payment Integration Tests Payment Reconciliation should generate payment reconciliation report","status":"failed","title":"should generate payment reconciliation report"},{"ancestorTitles":["Payment Integration Tests","Payment Security and Validation"],"duration":0,"failureMessages":[""],"fullName":"Payment Integration Tests Payment Security and Validation should validate payment amounts and prevent fraud","status":"failed","title":"should validate payment amounts and prevent fraud"},{"ancestorTitles":["Payment Integration Tests","Payment Security and Validation"],"duration":0,"failureMessages":[""],"fullName":"Payment Integration Tests Payment Security and Validation should handle payment processor webhooks securely","status":"failed","title":"should handle payment processor webhooks securely"},{"ancestorTitles":["Payment Integration Tests","Payment Security and Validation"],"duration":0,"failureMessages":[""],"fullName":"Payment Integration Tests Payment Security and Validation should prevent duplicate payment processing","status":"failed","title":"should prevent duplicate payment processing"},{"ancestorTitles":["Payment Integration Tests","Payment Analytics and Reporting"],"duration":0,"failureMessages":[""],"fullName":"Payment Integration Tests Payment Analytics and Reporting should generate comprehensive payment analytics","status":"failed","title":"should generate comprehensive payment analytics"}]},{"numFailingTests":19,"numPassingTests":0,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":1759565224248,"runtime":644,"slow":false,"start":1759565223604},"testFilePath":"/home/eric/Projects/accounting-api/tests/integration/auth-authorization.test.ts","failureMessage":"  ● Authentication and Authorization Integration Tests › JWT Authentication Flow › should handle complete JWT lifecycle\n\n\n\n\n\n  ● Authentication and Authorization Integration Tests › JWT Authentication Flow › should handle token expiry correctly\n\n\n\n\n\n  ● Authentication and Authorization Integration Tests › JWT Authentication Flow › should handle invalid tokens\n\n\n\n\n\n  ● Authentication and Authorization Integration Tests › Role-Based Access Control (RBAC) › should enforce SUPER_ADMIN permissions\n\n\n\n\n\n  ● Authentication and Authorization Integration Tests › Role-Based Access Control (RBAC) › should enforce ADMIN permissions\n\n\n\n\n\n  ● Authentication and Authorization Integration Tests › Role-Based Access Control (RBAC) › should enforce MANAGER permissions\n\n\n\n\n\n  ● Authentication and Authorization Integration Tests › Role-Based Access Control (RBAC) › should enforce ACCOUNTANT permissions\n\n\n\n\n\n  ● Authentication and Authorization Integration Tests › Role-Based Access Control (RBAC) › should enforce EMPLOYEE permissions\n\n\n\n\n\n  ● Authentication and Authorization Integration Tests › Role-Based Access Control (RBAC) › should enforce VIEWER permissions\n\n\n\n\n\n  ● Authentication and Authorization Integration Tests › Session Management › should handle concurrent sessions for same user\n\n\n\n\n\n  ● Authentication and Authorization Integration Tests › Session Management › should handle session cleanup on user deactivation\n\n\n\n\n\n  ● Authentication and Authorization Integration Tests › Password Security › should enforce strong password requirements\n\n\n\n\n\n  ● Authentication and Authorization Integration Tests › Password Security › should handle password reset flow\n\n\n\n\n\n  ● Authentication and Authorization Integration Tests › Password Security › should handle account lockout on failed attempts\n\n\n\n\n\n  ● Authentication and Authorization Integration Tests › API Key Authentication › should authenticate with valid API key\n\n\n\n\n\n  ● Authentication and Authorization Integration Tests › API Key Authentication › should respect API key permissions\n\n\n\n\n\n  ● Authentication and Authorization Integration Tests › API Key Authentication › should handle expired API keys\n\n\n\n\n\n  ● Authentication and Authorization Integration Tests › Authorization Edge Cases › should handle role changes during active session\n\n\n\n\n\n  ● Authentication and Authorization Integration Tests › Authorization Edge Cases › should handle organization access after user transfer\n\n\n\n\n","testResults":[{"ancestorTitles":["Authentication and Authorization Integration Tests","JWT Authentication Flow"],"duration":0,"failureMessages":[""],"fullName":"Authentication and Authorization Integration Tests JWT Authentication Flow should handle complete JWT lifecycle","status":"failed","title":"should handle complete JWT lifecycle"},{"ancestorTitles":["Authentication and Authorization Integration Tests","JWT Authentication Flow"],"duration":0,"failureMessages":[""],"fullName":"Authentication and Authorization Integration Tests JWT Authentication Flow should handle token expiry correctly","status":"failed","title":"should handle token expiry correctly"},{"ancestorTitles":["Authentication and Authorization Integration Tests","JWT Authentication Flow"],"duration":0,"failureMessages":[""],"fullName":"Authentication and Authorization Integration Tests JWT Authentication Flow should handle invalid tokens","status":"failed","title":"should handle invalid tokens"},{"ancestorTitles":["Authentication and Authorization Integration Tests","Role-Based Access Control (RBAC)"],"duration":0,"failureMessages":[""],"fullName":"Authentication and Authorization Integration Tests Role-Based Access Control (RBAC) should enforce SUPER_ADMIN permissions","status":"failed","title":"should enforce SUPER_ADMIN permissions"},{"ancestorTitles":["Authentication and Authorization Integration Tests","Role-Based Access Control (RBAC)"],"duration":0,"failureMessages":[""],"fullName":"Authentication and Authorization Integration Tests Role-Based Access Control (RBAC) should enforce ADMIN permissions","status":"failed","title":"should enforce ADMIN permissions"},{"ancestorTitles":["Authentication and Authorization Integration Tests","Role-Based Access Control (RBAC)"],"duration":0,"failureMessages":[""],"fullName":"Authentication and Authorization Integration Tests Role-Based Access Control (RBAC) should enforce MANAGER permissions","status":"failed","title":"should enforce MANAGER permissions"},{"ancestorTitles":["Authentication and Authorization Integration Tests","Role-Based Access Control (RBAC)"],"duration":0,"failureMessages":[""],"fullName":"Authentication and Authorization Integration Tests Role-Based Access Control (RBAC) should enforce ACCOUNTANT permissions","status":"failed","title":"should enforce ACCOUNTANT permissions"},{"ancestorTitles":["Authentication and Authorization Integration Tests","Role-Based Access Control (RBAC)"],"duration":0,"failureMessages":[""],"fullName":"Authentication and Authorization Integration Tests Role-Based Access Control (RBAC) should enforce EMPLOYEE permissions","status":"failed","title":"should enforce EMPLOYEE permissions"},{"ancestorTitles":["Authentication and Authorization Integration Tests","Role-Based Access Control (RBAC)"],"duration":0,"failureMessages":[""],"fullName":"Authentication and Authorization Integration Tests Role-Based Access Control (RBAC) should enforce VIEWER permissions","status":"failed","title":"should enforce VIEWER permissions"},{"ancestorTitles":["Authentication and Authorization Integration Tests","Session Management"],"duration":0,"failureMessages":[""],"fullName":"Authentication and Authorization Integration Tests Session Management should handle concurrent sessions for same user","status":"failed","title":"should handle concurrent sessions for same user"},{"ancestorTitles":["Authentication and Authorization Integration Tests","Session Management"],"duration":0,"failureMessages":[""],"fullName":"Authentication and Authorization Integration Tests Session Management should handle session cleanup on user deactivation","status":"failed","title":"should handle session cleanup on user deactivation"},{"ancestorTitles":["Authentication and Authorization Integration Tests","Password Security"],"duration":0,"failureMessages":[""],"fullName":"Authentication and Authorization Integration Tests Password Security should enforce strong password requirements","status":"failed","title":"should enforce strong password requirements"},{"ancestorTitles":["Authentication and Authorization Integration Tests","Password Security"],"duration":0,"failureMessages":[""],"fullName":"Authentication and Authorization Integration Tests Password Security should handle password reset flow","status":"failed","title":"should handle password reset flow"},{"ancestorTitles":["Authentication and Authorization Integration Tests","Password Security"],"duration":1,"failureMessages":[""],"fullName":"Authentication and Authorization Integration Tests Password Security should handle account lockout on failed attempts","status":"failed","title":"should handle account lockout on failed attempts"},{"ancestorTitles":["Authentication and Authorization Integration Tests","API Key Authentication"],"duration":0,"failureMessages":[""],"fullName":"Authentication and Authorization Integration Tests API Key Authentication should authenticate with valid API key","status":"failed","title":"should authenticate with valid API key"},{"ancestorTitles":["Authentication and Authorization Integration Tests","API Key Authentication"],"duration":0,"failureMessages":[""],"fullName":"Authentication and Authorization Integration Tests API Key Authentication should respect API key permissions","status":"failed","title":"should respect API key permissions"},{"ancestorTitles":["Authentication and Authorization Integration Tests","API Key Authentication"],"duration":0,"failureMessages":[""],"fullName":"Authentication and Authorization Integration Tests API Key Authentication should handle expired API keys","status":"failed","title":"should handle expired API keys"},{"ancestorTitles":["Authentication and Authorization Integration Tests","Authorization Edge Cases"],"duration":0,"failureMessages":[""],"fullName":"Authentication and Authorization Integration Tests Authorization Edge Cases should handle role changes during active session","status":"failed","title":"should handle role changes during active session"},{"ancestorTitles":["Authentication and Authorization Integration Tests","Authorization Edge Cases"],"duration":0,"failureMessages":[""],"fullName":"Authentication and Authorization Integration Tests Authorization Edge Cases should handle organization access after user transfer","status":"failed","title":"should handle organization access after user transfer"}]},{"numFailingTests":10,"numPassingTests":0,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":1759565224887,"runtime":637,"slow":false,"start":1759565224250},"testFilePath":"/home/eric/Projects/accounting-api/tests/integration/financial-role-permissions.test.ts","failureMessage":"  ● Financial Role Permissions Integration Tests › Financial Role Permission Matrix - Authentication Endpoints › should enforce proper access to authentication endpoints by role\n\n\n\n\n\n  ● Financial Role Permissions Integration Tests › Financial Role Permission Matrix - Authentication Endpoints › should enforce password change permissions correctly\n\n\n\n\n\n  ● Financial Role Permissions Integration Tests › Financial Role Permission Matrix - Customer Management Endpoints › should enforce customer management permissions by financial role hierarchy\n\n\n\n\n\n  ● Financial Role Permissions Integration Tests › Financial Role Permission Matrix - Payment Processing Endpoints › should enforce payment processing permissions with financial controls\n\n\n\n\n\n  ● Financial Role Permissions Integration Tests › Financial Role Permission Matrix - Payment Processing Endpoints › should enforce e-Transfer specific permissions\n\n\n\n\n\n  ● Financial Role Permissions Integration Tests › Financial Role Permission Matrix - Financial Statements Endpoints › should enforce financial statements access with proper role hierarchy\n\n\n\n\n\n  ● Financial Role Permissions Integration Tests › Financial Role Permission Matrix - Financial Statements Endpoints › should enforce period locking permissions for financial statements\n\n\n\n\n\n  ● Financial Role Permissions Integration Tests › Role-Based Audit and Compliance Access › should enforce audit log access based on financial roles\n\n\n\n\n\n  ● Financial Role Permissions Integration Tests › Role-Based Audit and Compliance Access › should enforce data retention and compliance permissions\n\n\n\n\n\n  ● Financial Role Permissions Integration Tests › API Key Permission Inheritance › should enforce API key permissions based on creating user role\n\n\n\n\n","testResults":[{"ancestorTitles":["Financial Role Permissions Integration Tests","Financial Role Permission Matrix - Authentication Endpoints"],"duration":0,"failureMessages":[""],"fullName":"Financial Role Permissions Integration Tests Financial Role Permission Matrix - Authentication Endpoints should enforce proper access to authentication endpoints by role","status":"failed","title":"should enforce proper access to authentication endpoints by role"},{"ancestorTitles":["Financial Role Permissions Integration Tests","Financial Role Permission Matrix - Authentication Endpoints"],"duration":0,"failureMessages":[""],"fullName":"Financial Role Permissions Integration Tests Financial Role Permission Matrix - Authentication Endpoints should enforce password change permissions correctly","status":"failed","title":"should enforce password change permissions correctly"},{"ancestorTitles":["Financial Role Permissions Integration Tests","Financial Role Permission Matrix - Customer Management Endpoints"],"duration":0,"failureMessages":[""],"fullName":"Financial Role Permissions Integration Tests Financial Role Permission Matrix - Customer Management Endpoints should enforce customer management permissions by financial role hierarchy","status":"failed","title":"should enforce customer management permissions by financial role hierarchy"},{"ancestorTitles":["Financial Role Permissions Integration Tests","Financial Role Permission Matrix - Payment Processing Endpoints"],"duration":0,"failureMessages":[""],"fullName":"Financial Role Permissions Integration Tests Financial Role Permission Matrix - Payment Processing Endpoints should enforce payment processing permissions with financial controls","status":"failed","title":"should enforce payment processing permissions with financial controls"},{"ancestorTitles":["Financial Role Permissions Integration Tests","Financial Role Permission Matrix - Payment Processing Endpoints"],"duration":0,"failureMessages":[""],"fullName":"Financial Role Permissions Integration Tests Financial Role Permission Matrix - Payment Processing Endpoints should enforce e-Transfer specific permissions","status":"failed","title":"should enforce e-Transfer specific permissions"},{"ancestorTitles":["Financial Role Permissions Integration Tests","Financial Role Permission Matrix - Financial Statements Endpoints"],"duration":0,"failureMessages":[""],"fullName":"Financial Role Permissions Integration Tests Financial Role Permission Matrix - Financial Statements Endpoints should enforce financial statements access with proper role hierarchy","status":"failed","title":"should enforce financial statements access with proper role hierarchy"},{"ancestorTitles":["Financial Role Permissions Integration Tests","Financial Role Permission Matrix - Financial Statements Endpoints"],"duration":0,"failureMessages":[""],"fullName":"Financial Role Permissions Integration Tests Financial Role Permission Matrix - Financial Statements Endpoints should enforce period locking permissions for financial statements","status":"failed","title":"should enforce period locking permissions for financial statements"},{"ancestorTitles":["Financial Role Permissions Integration Tests","Role-Based Audit and Compliance Access"],"duration":0,"failureMessages":[""],"fullName":"Financial Role Permissions Integration Tests Role-Based Audit and Compliance Access should enforce audit log access based on financial roles","status":"failed","title":"should enforce audit log access based on financial roles"},{"ancestorTitles":["Financial Role Permissions Integration Tests","Role-Based Audit and Compliance Access"],"duration":0,"failureMessages":[""],"fullName":"Financial Role Permissions Integration Tests Role-Based Audit and Compliance Access should enforce data retention and compliance permissions","status":"failed","title":"should enforce data retention and compliance permissions"},{"ancestorTitles":["Financial Role Permissions Integration Tests","API Key Permission Inheritance"],"duration":0,"failureMessages":[""],"fullName":"Financial Role Permissions Integration Tests API Key Permission Inheritance should enforce API key permissions based on creating user role","status":"failed","title":"should enforce API key permissions based on creating user role"}]},{"numFailingTests":17,"numPassingTests":0,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":1759565225527,"runtime":638,"slow":false,"start":1759565224889},"testFilePath":"/home/eric/Projects/accounting-api/tests/integration/error-handling-recovery.test.ts","failureMessage":"  ● Error Handling and Recovery Integration Tests › Network Failure Simulation › should handle database connection timeouts gracefully\n\n\n\n\n\n  ● Error Handling and Recovery Integration Tests › Network Failure Simulation › should recover from temporary database unavailability\n\n\n\n\n\n  ● Error Handling and Recovery Integration Tests › Network Failure Simulation › should handle external service failures (Stripe simulation)\n\n\n\n\n\n  ● Error Handling and Recovery Integration Tests › Data Corruption Recovery › should detect and handle data integrity violations\n\n\n\n\n\n  ● Error Handling and Recovery Integration Tests › Data Corruption Recovery › should handle orphaned records recovery\n\n\n\n\n\n  ● Error Handling and Recovery Integration Tests › Data Corruption Recovery › should recover from transaction rollback scenarios\n\n\n\n\n\n  ● Error Handling and Recovery Integration Tests › Graceful Degradation Scenarios › should handle reduced functionality when external services fail\n\n\n\n\n\n  ● Error Handling and Recovery Integration Tests › Graceful Degradation Scenarios › should provide meaningful error messages to users\n\n\n\n\n\n  ● Error Handling and Recovery Integration Tests › Graceful Degradation Scenarios › should handle high load with appropriate backpressure\n\n\n\n\n\n  ● Error Handling and Recovery Integration Tests › Recovery Procedures › should support manual data recovery operations\n\n\n\n\n\n  ● Error Handling and Recovery Integration Tests › Recovery Procedures › should provide data export for backup/recovery\n\n\n\n\n\n  ● Error Handling and Recovery Integration Tests › Recovery Procedures › should handle system recovery after crashes\n\n\n\n\n\n  ● Error Handling and Recovery Integration Tests › Error Monitoring and Alerting › should log errors with sufficient detail for debugging\n\n\n\n\n\n  ● Error Handling and Recovery Integration Tests › Error Monitoring and Alerting › should handle cascading failures appropriately\n\n\n\n\n\n  ● Error Handling and Recovery Integration Tests › Error Monitoring and Alerting › should maintain audit trail during error conditions\n\n\n\n\n\n  ● Error Handling and Recovery Integration Tests › Disaster Recovery Scenarios › should support point-in-time recovery\n\n\n\n\n\n  ● Error Handling and Recovery Integration Tests › Disaster Recovery Scenarios › should handle data center failover simulation\n\n\n\n\n","testResults":[{"ancestorTitles":["Error Handling and Recovery Integration Tests","Network Failure Simulation"],"duration":0,"failureMessages":[""],"fullName":"Error Handling and Recovery Integration Tests Network Failure Simulation should handle database connection timeouts gracefully","status":"failed","title":"should handle database connection timeouts gracefully"},{"ancestorTitles":["Error Handling and Recovery Integration Tests","Network Failure Simulation"],"duration":0,"failureMessages":[""],"fullName":"Error Handling and Recovery Integration Tests Network Failure Simulation should recover from temporary database unavailability","status":"failed","title":"should recover from temporary database unavailability"},{"ancestorTitles":["Error Handling and Recovery Integration Tests","Network Failure Simulation"],"duration":0,"failureMessages":[""],"fullName":"Error Handling and Recovery Integration Tests Network Failure Simulation should handle external service failures (Stripe simulation)","status":"failed","title":"should handle external service failures (Stripe simulation)"},{"ancestorTitles":["Error Handling and Recovery Integration Tests","Data Corruption Recovery"],"duration":0,"failureMessages":[""],"fullName":"Error Handling and Recovery Integration Tests Data Corruption Recovery should detect and handle data integrity violations","status":"failed","title":"should detect and handle data integrity violations"},{"ancestorTitles":["Error Handling and Recovery Integration Tests","Data Corruption Recovery"],"duration":0,"failureMessages":[""],"fullName":"Error Handling and Recovery Integration Tests Data Corruption Recovery should handle orphaned records recovery","status":"failed","title":"should handle orphaned records recovery"},{"ancestorTitles":["Error Handling and Recovery Integration Tests","Data Corruption Recovery"],"duration":0,"failureMessages":[""],"fullName":"Error Handling and Recovery Integration Tests Data Corruption Recovery should recover from transaction rollback scenarios","status":"failed","title":"should recover from transaction rollback scenarios"},{"ancestorTitles":["Error Handling and Recovery Integration Tests","Graceful Degradation Scenarios"],"duration":0,"failureMessages":[""],"fullName":"Error Handling and Recovery Integration Tests Graceful Degradation Scenarios should handle reduced functionality when external services fail","status":"failed","title":"should handle reduced functionality when external services fail"},{"ancestorTitles":["Error Handling and Recovery Integration Tests","Graceful Degradation Scenarios"],"duration":0,"failureMessages":[""],"fullName":"Error Handling and Recovery Integration Tests Graceful Degradation Scenarios should provide meaningful error messages to users","status":"failed","title":"should provide meaningful error messages to users"},{"ancestorTitles":["Error Handling and Recovery Integration Tests","Graceful Degradation Scenarios"],"duration":0,"failureMessages":[""],"fullName":"Error Handling and Recovery Integration Tests Graceful Degradation Scenarios should handle high load with appropriate backpressure","status":"failed","title":"should handle high load with appropriate backpressure"},{"ancestorTitles":["Error Handling and Recovery Integration Tests","Recovery Procedures"],"duration":0,"failureMessages":[""],"fullName":"Error Handling and Recovery Integration Tests Recovery Procedures should support manual data recovery operations","status":"failed","title":"should support manual data recovery operations"},{"ancestorTitles":["Error Handling and Recovery Integration Tests","Recovery Procedures"],"duration":0,"failureMessages":[""],"fullName":"Error Handling and Recovery Integration Tests Recovery Procedures should provide data export for backup/recovery","status":"failed","title":"should provide data export for backup/recovery"},{"ancestorTitles":["Error Handling and Recovery Integration Tests","Recovery Procedures"],"duration":0,"failureMessages":[""],"fullName":"Error Handling and Recovery Integration Tests Recovery Procedures should handle system recovery after crashes","status":"failed","title":"should handle system recovery after crashes"},{"ancestorTitles":["Error Handling and Recovery Integration Tests","Error Monitoring and Alerting"],"duration":0,"failureMessages":[""],"fullName":"Error Handling and Recovery Integration Tests Error Monitoring and Alerting should log errors with sufficient detail for debugging","status":"failed","title":"should log errors with sufficient detail for debugging"},{"ancestorTitles":["Error Handling and Recovery Integration Tests","Error Monitoring and Alerting"],"duration":1,"failureMessages":[""],"fullName":"Error Handling and Recovery Integration Tests Error Monitoring and Alerting should handle cascading failures appropriately","status":"failed","title":"should handle cascading failures appropriately"},{"ancestorTitles":["Error Handling and Recovery Integration Tests","Error Monitoring and Alerting"],"duration":0,"failureMessages":[""],"fullName":"Error Handling and Recovery Integration Tests Error Monitoring and Alerting should maintain audit trail during error conditions","status":"failed","title":"should maintain audit trail during error conditions"},{"ancestorTitles":["Error Handling and Recovery Integration Tests","Disaster Recovery Scenarios"],"duration":0,"failureMessages":[""],"fullName":"Error Handling and Recovery Integration Tests Disaster Recovery Scenarios should support point-in-time recovery","status":"failed","title":"should support point-in-time recovery"},{"ancestorTitles":["Error Handling and Recovery Integration Tests","Disaster Recovery Scenarios"],"duration":0,"failureMessages":[""],"fullName":"Error Handling and Recovery Integration Tests Disaster Recovery Scenarios should handle data center failover simulation","status":"failed","title":"should handle data center failover simulation"}]},{"numFailingTests":9,"numPassingTests":0,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":1759565226665,"runtime":1136,"slow":false,"start":1759565225529},"testFilePath":"/home/eric/Projects/accounting-api/tests/integration/api-v1-backwards-compatibility.test.ts","failureMessage":"  ● API v1 Backwards Compatibility Tests › Legacy Endpoint Pattern Support › should support legacy /api/v1/resource patterns with role permissions\n\n\n\n\n\n  ● API v1 Backwards Compatibility Tests › Legacy Endpoint Pattern Support › should maintain consistent response formats between legacy and multi-tenant patterns\n\n\n\n\n\n  ● API v1 Backwards Compatibility Tests › Permission Inheritance Models › should maintain hierarchical permissions across API versions\n\n\n\n\n\n  ● API v1 Backwards Compatibility Tests › Permission Inheritance Models › should support contextual permissions for project and customer-specific access\n\n\n\n\n\n  ● API v1 Backwards Compatibility Tests › Role Migration and Upgrade Path › should support seamless role migration from v1 to multi-tenant\n\n\n\n\n\n  ● API v1 Backwards Compatibility Tests › Role Migration and Upgrade Path › should maintain session compatibility during role transitions\n\n\n\n\n\n  ● API v1 Backwards Compatibility Tests › Error Code Preservation and Consistency › should maintain consistent HTTP status codes across API versions\n\n\n\n\n\n  ● API v1 Backwards Compatibility Tests › Error Code Preservation and Consistency › should provide consistent error messages and formats\n\n\n\n\n\n  ● API v1 Backwards Compatibility Tests › Feature Parity Validation › should maintain feature parity between API versions\n\n\n\n\n","testResults":[{"ancestorTitles":["API v1 Backwards Compatibility Tests","Legacy Endpoint Pattern Support"],"duration":0,"failureMessages":[""],"fullName":"API v1 Backwards Compatibility Tests Legacy Endpoint Pattern Support should support legacy /api/v1/resource patterns with role permissions","status":"failed","title":"should support legacy /api/v1/resource patterns with role permissions"},{"ancestorTitles":["API v1 Backwards Compatibility Tests","Legacy Endpoint Pattern Support"],"duration":0,"failureMessages":[""],"fullName":"API v1 Backwards Compatibility Tests Legacy Endpoint Pattern Support should maintain consistent response formats between legacy and multi-tenant patterns","status":"failed","title":"should maintain consistent response formats between legacy and multi-tenant patterns"},{"ancestorTitles":["API v1 Backwards Compatibility Tests","Permission Inheritance Models"],"duration":0,"failureMessages":[""],"fullName":"API v1 Backwards Compatibility Tests Permission Inheritance Models should maintain hierarchical permissions across API versions","status":"failed","title":"should maintain hierarchical permissions across API versions"},{"ancestorTitles":["API v1 Backwards Compatibility Tests","Permission Inheritance Models"],"duration":0,"failureMessages":[""],"fullName":"API v1 Backwards Compatibility Tests Permission Inheritance Models should support contextual permissions for project and customer-specific access","status":"failed","title":"should support contextual permissions for project and customer-specific access"},{"ancestorTitles":["API v1 Backwards Compatibility Tests","Role Migration and Upgrade Path"],"duration":0,"failureMessages":[""],"fullName":"API v1 Backwards Compatibility Tests Role Migration and Upgrade Path should support seamless role migration from v1 to multi-tenant","status":"failed","title":"should support seamless role migration from v1 to multi-tenant"},{"ancestorTitles":["API v1 Backwards Compatibility Tests","Role Migration and Upgrade Path"],"duration":0,"failureMessages":[""],"fullName":"API v1 Backwards Compatibility Tests Role Migration and Upgrade Path should maintain session compatibility during role transitions","status":"failed","title":"should maintain session compatibility during role transitions"},{"ancestorTitles":["API v1 Backwards Compatibility Tests","Error Code Preservation and Consistency"],"duration":0,"failureMessages":[""],"fullName":"API v1 Backwards Compatibility Tests Error Code Preservation and Consistency should maintain consistent HTTP status codes across API versions","status":"failed","title":"should maintain consistent HTTP status codes across API versions"},{"ancestorTitles":["API v1 Backwards Compatibility Tests","Error Code Preservation and Consistency"],"duration":0,"failureMessages":[""],"fullName":"API v1 Backwards Compatibility Tests Error Code Preservation and Consistency should provide consistent error messages and formats","status":"failed","title":"should provide consistent error messages and formats"},{"ancestorTitles":["API v1 Backwards Compatibility Tests","Feature Parity Validation"],"duration":0,"failureMessages":[""],"fullName":"API v1 Backwards Compatibility Tests Feature Parity Validation should maintain feature parity between API versions","status":"failed","title":"should maintain feature parity between API versions"}]},{"numFailingTests":29,"numPassingTests":0,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":1759565227352,"runtime":683,"slow":false,"start":1759565226669},"testFilePath":"/home/eric/Projects/accounting-api/tests/integration/organization-settings-customization.test.ts","failureMessage":"  ● Organization Settings Customization Integration Tests › Settings Initialization › should initialize settings for new organization\n\n\n\n\n\n  ● Organization Settings Customization Integration Tests › Settings Initialization › should initialize settings for new organization\n\n    Test environment not initialized. This should be called after global beforeAll.\n\n      122 | export async function setupTestApp(): Promise<{ app: Application; prisma: PrismaClient }> {\n      123 |   if (!testApp || !prisma) {\n    > 124 |     throw new Error('Test environment not initialized. This should be called after global beforeAll.');\n          |           ^\n      125 |   }\n      126 |   return { app: testApp, prisma };\n      127 | }\n\n      at setupTestApp (tests/integration/setup.ts:124:11)\n      at Object.<anonymous> (tests/integration/organization-settings-customization.test.ts:24:39)\n\n  ● Organization Settings Customization Integration Tests › Settings Initialization › should not allow viewers to initialize settings\n\n\n\n\n\n  ● Organization Settings Customization Integration Tests › Settings Initialization › should not allow viewers to initialize settings\n\n    Test environment not initialized. This should be called after global beforeAll.\n\n      122 | export async function setupTestApp(): Promise<{ app: Application; prisma: PrismaClient }> {\n      123 |   if (!testApp || !prisma) {\n    > 124 |     throw new Error('Test environment not initialized. This should be called after global beforeAll.');\n          |           ^\n      125 |   }\n      126 |   return { app: testApp, prisma };\n      127 | }\n\n      at setupTestApp (tests/integration/setup.ts:124:11)\n      at Object.<anonymous> (tests/integration/organization-settings-customization.test.ts:24:39)\n\n  ● Organization Settings Customization Integration Tests › Invoice Settings Management › should get complete invoice settings\n\n\n\n\n\n  ● Organization Settings Customization Integration Tests › Invoice Settings Management › should get complete invoice settings\n\n    Test environment not initialized. This should be called after global beforeAll.\n\n      122 | export async function setupTestApp(): Promise<{ app: Application; prisma: PrismaClient }> {\n      123 |   if (!testApp || !prisma) {\n    > 124 |     throw new Error('Test environment not initialized. This should be called after global beforeAll.');\n          |           ^\n      125 |   }\n      126 |   return { app: testApp, prisma };\n      127 | }\n\n      at setupTestApp (tests/integration/setup.ts:124:11)\n      at Object.<anonymous> (tests/integration/organization-settings-customization.test.ts:24:39)\n\n  ● Organization Settings Customization Integration Tests › Invoice Settings Management › should update invoice settings with full customization\n\n\n\n\n\n  ● Organization Settings Customization Integration Tests › Invoice Settings Management › should update invoice settings with full customization\n\n    Test environment not initialized. This should be called after global beforeAll.\n\n      122 | export async function setupTestApp(): Promise<{ app: Application; prisma: PrismaClient }> {\n      123 |   if (!testApp || !prisma) {\n    > 124 |     throw new Error('Test environment not initialized. This should be called after global beforeAll.');\n          |           ^\n      125 |   }\n      126 |   return { app: testApp, prisma };\n      127 | }\n\n      at setupTestApp (tests/integration/setup.ts:124:11)\n      at Object.<anonymous> (tests/integration/organization-settings-customization.test.ts:24:39)\n\n  ● Organization Settings Customization Integration Tests › Invoice Settings Management › should validate color formats in settings\n\n\n\n\n\n  ● Organization Settings Customization Integration Tests › Invoice Settings Management › should validate color formats in settings\n\n    Test environment not initialized. This should be called after global beforeAll.\n\n      122 | export async function setupTestApp(): Promise<{ app: Application; prisma: PrismaClient }> {\n      123 |   if (!testApp || !prisma) {\n    > 124 |     throw new Error('Test environment not initialized. This should be called after global beforeAll.');\n          |           ^\n      125 |   }\n      126 |   return { app: testApp, prisma };\n      127 | }\n\n      at setupTestApp (tests/integration/setup.ts:124:11)\n      at Object.<anonymous> (tests/integration/organization-settings-customization.test.ts:24:39)\n\n  ● Organization Settings Customization Integration Tests › Invoice Settings Management › should allow managers to update settings\n\n\n\n\n\n  ● Organization Settings Customization Integration Tests › Invoice Settings Management › should allow managers to update settings\n\n    Test environment not initialized. This should be called after global beforeAll.\n\n      122 | export async function setupTestApp(): Promise<{ app: Application; prisma: PrismaClient }> {\n      123 |   if (!testApp || !prisma) {\n    > 124 |     throw new Error('Test environment not initialized. This should be called after global beforeAll.');\n          |           ^\n      125 |   }\n      126 |   return { app: testApp, prisma };\n      127 | }\n\n      at setupTestApp (tests/integration/setup.ts:124:11)\n      at Object.<anonymous> (tests/integration/organization-settings-customization.test.ts:24:39)\n\n  ● Organization Settings Customization Integration Tests › Invoice Settings Management › should not allow viewers to update settings\n\n\n\n\n\n  ● Organization Settings Customization Integration Tests › Invoice Settings Management › should not allow viewers to update settings\n\n    Test environment not initialized. This should be called after global beforeAll.\n\n      122 | export async function setupTestApp(): Promise<{ app: Application; prisma: PrismaClient }> {\n      123 |   if (!testApp || !prisma) {\n    > 124 |     throw new Error('Test environment not initialized. This should be called after global beforeAll.');\n          |           ^\n      125 |   }\n      126 |   return { app: testApp, prisma };\n      127 | }\n\n      at setupTestApp (tests/integration/setup.ts:124:11)\n      at Object.<anonymous> (tests/integration/organization-settings-customization.test.ts:24:39)\n\n  ● Organization Settings Customization Integration Tests › Logo Management › should upload logo successfully\n\n\n\n\n\n  ● Organization Settings Customization Integration Tests › Logo Management › should upload logo successfully\n\n    Test environment not initialized. This should be called after global beforeAll.\n\n      122 | export async function setupTestApp(): Promise<{ app: Application; prisma: PrismaClient }> {\n      123 |   if (!testApp || !prisma) {\n    > 124 |     throw new Error('Test environment not initialized. This should be called after global beforeAll.');\n          |           ^\n      125 |   }\n      126 |   return { app: testApp, prisma };\n      127 | }\n\n      at setupTestApp (tests/integration/setup.ts:124:11)\n      at Object.<anonymous> (tests/integration/organization-settings-customization.test.ts:24:39)\n\n  ● Organization Settings Customization Integration Tests › Logo Management › should validate file types for logo upload\n\n\n\n\n\n  ● Organization Settings Customization Integration Tests › Logo Management › should validate file types for logo upload\n\n    Test environment not initialized. This should be called after global beforeAll.\n\n      122 | export async function setupTestApp(): Promise<{ app: Application; prisma: PrismaClient }> {\n      123 |   if (!testApp || !prisma) {\n    > 124 |     throw new Error('Test environment not initialized. This should be called after global beforeAll.');\n          |           ^\n      125 |   }\n      126 |   return { app: testApp, prisma };\n      127 | }\n\n      at setupTestApp (tests/integration/setup.ts:124:11)\n      at Object.<anonymous> (tests/integration/organization-settings-customization.test.ts:24:39)\n\n  ● Organization Settings Customization Integration Tests › Logo Management › should validate file size for logo upload\n\n\n\n\n\n  ● Organization Settings Customization Integration Tests › Logo Management › should validate file size for logo upload\n\n    Test environment not initialized. This should be called after global beforeAll.\n\n      122 | export async function setupTestApp(): Promise<{ app: Application; prisma: PrismaClient }> {\n      123 |   if (!testApp || !prisma) {\n    > 124 |     throw new Error('Test environment not initialized. This should be called after global beforeAll.');\n          |           ^\n      125 |   }\n      126 |   return { app: testApp, prisma };\n      127 | }\n\n      at setupTestApp (tests/integration/setup.ts:124:11)\n      at Object.<anonymous> (tests/integration/organization-settings-customization.test.ts:24:39)\n\n  ● Organization Settings Customization Integration Tests › Logo Management › should remove logo successfully\n\n\n\n\n\n  ● Organization Settings Customization Integration Tests › Logo Management › should remove logo successfully\n\n    Test environment not initialized. This should be called after global beforeAll.\n\n      122 | export async function setupTestApp(): Promise<{ app: Application; prisma: PrismaClient }> {\n      123 |   if (!testApp || !prisma) {\n    > 124 |     throw new Error('Test environment not initialized. This should be called after global beforeAll.');\n          |           ^\n      125 |   }\n      126 |   return { app: testApp, prisma };\n      127 | }\n\n      at setupTestApp (tests/integration/setup.ts:124:11)\n      at Object.<anonymous> (tests/integration/organization-settings-customization.test.ts:24:39)\n\n  ● Organization Settings Customization Integration Tests › Logo Management › should not allow viewers to manage logos\n\n\n\n\n\n  ● Organization Settings Customization Integration Tests › Logo Management › should not allow viewers to manage logos\n\n    Test environment not initialized. This should be called after global beforeAll.\n\n      122 | export async function setupTestApp(): Promise<{ app: Application; prisma: PrismaClient }> {\n      123 |   if (!testApp || !prisma) {\n    > 124 |     throw new Error('Test environment not initialized. This should be called after global beforeAll.');\n          |           ^\n      125 |   }\n      126 |   return { app: testApp, prisma };\n      127 | }\n\n      at setupTestApp (tests/integration/setup.ts:124:11)\n      at Object.<anonymous> (tests/integration/organization-settings-customization.test.ts:24:39)\n\n  ● Organization Settings Customization Integration Tests › Tax Settings Management › should get current tax settings\n\n\n\n\n\n  ● Organization Settings Customization Integration Tests › Tax Settings Management › should get current tax settings\n\n    Test environment not initialized. This should be called after global beforeAll.\n\n      122 | export async function setupTestApp(): Promise<{ app: Application; prisma: PrismaClient }> {\n      123 |   if (!testApp || !prisma) {\n    > 124 |     throw new Error('Test environment not initialized. This should be called after global beforeAll.');\n          |           ^\n      125 |   }\n      126 |   return { app: testApp, prisma };\n      127 | }\n\n      at setupTestApp (tests/integration/setup.ts:124:11)\n      at Object.<anonymous> (tests/integration/organization-settings-customization.test.ts:24:39)\n\n  ● Organization Settings Customization Integration Tests › Tax Settings Management › should disable taxes organization-wide\n\n\n\n\n\n  ● Organization Settings Customization Integration Tests › Tax Settings Management › should disable taxes organization-wide\n\n    Test environment not initialized. This should be called after global beforeAll.\n\n      122 | export async function setupTestApp(): Promise<{ app: Application; prisma: PrismaClient }> {\n      123 |   if (!testApp || !prisma) {\n    > 124 |     throw new Error('Test environment not initialized. This should be called after global beforeAll.');\n          |           ^\n      125 |   }\n      126 |   return { app: testApp, prisma };\n      127 | }\n\n      at setupTestApp (tests/integration/setup.ts:124:11)\n      at Object.<anonymous> (tests/integration/organization-settings-customization.test.ts:24:39)\n\n  ● Organization Settings Customization Integration Tests › Tax Settings Management › should enable taxes organization-wide\n\n\n\n\n\n  ● Organization Settings Customization Integration Tests › Tax Settings Management › should enable taxes organization-wide\n\n    Test environment not initialized. This should be called after global beforeAll.\n\n      122 | export async function setupTestApp(): Promise<{ app: Application; prisma: PrismaClient }> {\n      123 |   if (!testApp || !prisma) {\n    > 124 |     throw new Error('Test environment not initialized. This should be called after global beforeAll.');\n          |           ^\n      125 |   }\n      126 |   return { app: testApp, prisma };\n      127 | }\n\n      at setupTestApp (tests/integration/setup.ts:124:11)\n      at Object.<anonymous> (tests/integration/organization-settings-customization.test.ts:24:39)\n\n  ● Organization Settings Customization Integration Tests › Tax Settings Management › should validate boolean values for tax settings\n\n\n\n\n\n  ● Organization Settings Customization Integration Tests › Tax Settings Management › should validate boolean values for tax settings\n\n    Test environment not initialized. This should be called after global beforeAll.\n\n      122 | export async function setupTestApp(): Promise<{ app: Application; prisma: PrismaClient }> {\n      123 |   if (!testApp || !prisma) {\n    > 124 |     throw new Error('Test environment not initialized. This should be called after global beforeAll.');\n          |           ^\n      125 |   }\n      126 |   return { app: testApp, prisma };\n      127 | }\n\n      at setupTestApp (tests/integration/setup.ts:124:11)\n      at Object.<anonymous> (tests/integration/organization-settings-customization.test.ts:24:39)\n\n  ● Organization Settings Customization Integration Tests › Tax Settings Management › should allow managers to update tax settings\n\n\n\n\n\n  ● Organization Settings Customization Integration Tests › Tax Settings Management › should allow managers to update tax settings\n\n    Test environment not initialized. This should be called after global beforeAll.\n\n      122 | export async function setupTestApp(): Promise<{ app: Application; prisma: PrismaClient }> {\n      123 |   if (!testApp || !prisma) {\n    > 124 |     throw new Error('Test environment not initialized. This should be called after global beforeAll.');\n          |           ^\n      125 |   }\n      126 |   return { app: testApp, prisma };\n      127 | }\n\n      at setupTestApp (tests/integration/setup.ts:124:11)\n      at Object.<anonymous> (tests/integration/organization-settings-customization.test.ts:24:39)\n\n  ● Organization Settings Customization Integration Tests › Tax Settings Management › should not allow viewers to update tax settings\n\n\n\n\n\n  ● Organization Settings Customization Integration Tests › Tax Settings Management › should not allow viewers to update tax settings\n\n    Test environment not initialized. This should be called after global beforeAll.\n\n      122 | export async function setupTestApp(): Promise<{ app: Application; prisma: PrismaClient }> {\n      123 |   if (!testApp || !prisma) {\n    > 124 |     throw new Error('Test environment not initialized. This should be called after global beforeAll.');\n          |           ^\n      125 |   }\n      126 |   return { app: testApp, prisma };\n      127 | }\n\n      at setupTestApp (tests/integration/setup.ts:124:11)\n      at Object.<anonymous> (tests/integration/organization-settings-customization.test.ts:24:39)\n\n  ● Organization Settings Customization Integration Tests › Default Template and Style Management › should set default template and style\n\n\n\n\n\n  ● Organization Settings Customization Integration Tests › Default Template and Style Management › should set default template and style\n\n    Test environment not initialized. This should be called after global beforeAll.\n\n      122 | export async function setupTestApp(): Promise<{ app: Application; prisma: PrismaClient }> {\n      123 |   if (!testApp || !prisma) {\n    > 124 |     throw new Error('Test environment not initialized. This should be called after global beforeAll.');\n          |           ^\n      125 |   }\n      126 |   return { app: testApp, prisma };\n      127 | }\n\n      at setupTestApp (tests/integration/setup.ts:124:11)\n      at Object.<anonymous> (tests/integration/organization-settings-customization.test.ts:24:39)\n\n  ● Organization Settings Customization Integration Tests › Default Template and Style Management › should validate template and style IDs\n\n\n\n\n\n  ● Organization Settings Customization Integration Tests › Default Template and Style Management › should validate template and style IDs\n\n    Test environment not initialized. This should be called after global beforeAll.\n\n      122 | export async function setupTestApp(): Promise<{ app: Application; prisma: PrismaClient }> {\n      123 |   if (!testApp || !prisma) {\n    > 124 |     throw new Error('Test environment not initialized. This should be called after global beforeAll.');\n          |           ^\n      125 |   }\n      126 |   return { app: testApp, prisma };\n      127 | }\n\n      at setupTestApp (tests/integration/setup.ts:124:11)\n      at Object.<anonymous> (tests/integration/organization-settings-customization.test.ts:24:39)\n\n  ● Organization Settings Customization Integration Tests › Default Template and Style Management › should allow managers to set defaults\n\n\n\n\n\n  ● Organization Settings Customization Integration Tests › Default Template and Style Management › should allow managers to set defaults\n\n    Test environment not initialized. This should be called after global beforeAll.\n\n      122 | export async function setupTestApp(): Promise<{ app: Application; prisma: PrismaClient }> {\n      123 |   if (!testApp || !prisma) {\n    > 124 |     throw new Error('Test environment not initialized. This should be called after global beforeAll.');\n          |           ^\n      125 |   }\n      126 |   return { app: testApp, prisma };\n      127 | }\n\n      at setupTestApp (tests/integration/setup.ts:124:11)\n      at Object.<anonymous> (tests/integration/organization-settings-customization.test.ts:24:39)\n\n  ● Organization Settings Customization Integration Tests › Complex Branding Scenarios › should handle logo display vs organization name preference\n\n\n\n\n\n  ● Organization Settings Customization Integration Tests › Complex Branding Scenarios › should handle logo display vs organization name preference\n\n    Test environment not initialized. This should be called after global beforeAll.\n\n      122 | export async function setupTestApp(): Promise<{ app: Application; prisma: PrismaClient }> {\n      123 |   if (!testApp || !prisma) {\n    > 124 |     throw new Error('Test environment not initialized. This should be called after global beforeAll.');\n          |           ^\n      125 |   }\n      126 |   return { app: testApp, prisma };\n      127 | }\n\n      at setupTestApp (tests/integration/setup.ts:124:11)\n      at Object.<anonymous> (tests/integration/organization-settings-customization.test.ts:24:39)\n\n  ● Organization Settings Customization Integration Tests › Complex Branding Scenarios › should handle comprehensive display settings\n\n\n\n\n\n  ● Organization Settings Customization Integration Tests › Complex Branding Scenarios › should handle comprehensive display settings\n\n    Test environment not initialized. This should be called after global beforeAll.\n\n      122 | export async function setupTestApp(): Promise<{ app: Application; prisma: PrismaClient }> {\n      123 |   if (!testApp || !prisma) {\n    > 124 |     throw new Error('Test environment not initialized. This should be called after global beforeAll.');\n          |           ^\n      125 |   }\n      126 |   return { app: testApp, prisma };\n      127 | }\n\n      at setupTestApp (tests/integration/setup.ts:124:11)\n      at Object.<anonymous> (tests/integration/organization-settings-customization.test.ts:24:39)\n\n  ● Organization Settings Customization Integration Tests › Complex Branding Scenarios › should handle custom CSS injection\n\n\n\n\n\n  ● Organization Settings Customization Integration Tests › Complex Branding Scenarios › should handle custom CSS injection\n\n    Test environment not initialized. This should be called after global beforeAll.\n\n      122 | export async function setupTestApp(): Promise<{ app: Application; prisma: PrismaClient }> {\n      123 |   if (!testApp || !prisma) {\n    > 124 |     throw new Error('Test environment not initialized. This should be called after global beforeAll.');\n          |           ^\n      125 |   }\n      126 |   return { app: testApp, prisma };\n      127 | }\n\n      at setupTestApp (tests/integration/setup.ts:124:11)\n      at Object.<anonymous> (tests/integration/organization-settings-customization.test.ts:24:39)\n\n  ● Organization Settings Customization Integration Tests › Integration with PDF Generation › should apply settings to PDF generation workflow\n\n\n\n\n\n  ● Organization Settings Customization Integration Tests › Integration with PDF Generation › should apply settings to PDF generation workflow\n\n    Test environment not initialized. This should be called after global beforeAll.\n\n      122 | export async function setupTestApp(): Promise<{ app: Application; prisma: PrismaClient }> {\n      123 |   if (!testApp || !prisma) {\n    > 124 |     throw new Error('Test environment not initialized. This should be called after global beforeAll.');\n          |           ^\n      125 |   }\n      126 |   return { app: testApp, prisma };\n      127 | }\n\n      at setupTestApp (tests/integration/setup.ts:124:11)\n      at Object.<anonymous> (tests/integration/organization-settings-customization.test.ts:24:39)\n\n  ● Organization Settings Customization Integration Tests › Integration with PDF Generation › should respect tax disable setting in PDF generation\n\n\n\n\n\n  ● Organization Settings Customization Integration Tests › Integration with PDF Generation › should respect tax disable setting in PDF generation\n\n    Test environment not initialized. This should be called after global beforeAll.\n\n      122 | export async function setupTestApp(): Promise<{ app: Application; prisma: PrismaClient }> {\n      123 |   if (!testApp || !prisma) {\n    > 124 |     throw new Error('Test environment not initialized. This should be called after global beforeAll.');\n          |           ^\n      125 |   }\n      126 |   return { app: testApp, prisma };\n      127 | }\n\n      at setupTestApp (tests/integration/setup.ts:124:11)\n      at Object.<anonymous> (tests/integration/organization-settings-customization.test.ts:24:39)\n\n  ● Organization Settings Customization Integration Tests › Error Handling and Edge Cases › should handle missing organization gracefully\n\n\n\n\n\n  ● Organization Settings Customization Integration Tests › Error Handling and Edge Cases › should handle missing organization gracefully\n\n    Test environment not initialized. This should be called after global beforeAll.\n\n      122 | export async function setupTestApp(): Promise<{ app: Application; prisma: PrismaClient }> {\n      123 |   if (!testApp || !prisma) {\n    > 124 |     throw new Error('Test environment not initialized. This should be called after global beforeAll.');\n          |           ^\n      125 |   }\n      126 |   return { app: testApp, prisma };\n      127 | }\n\n      at setupTestApp (tests/integration/setup.ts:124:11)\n      at Object.<anonymous> (tests/integration/organization-settings-customization.test.ts:24:39)\n\n  ● Organization Settings Customization Integration Tests › Error Handling and Edge Cases › should handle malformed JSON in display settings\n\n\n\n\n\n  ● Organization Settings Customization Integration Tests › Error Handling and Edge Cases › should handle malformed JSON in display settings\n\n    Test environment not initialized. This should be called after global beforeAll.\n\n      122 | export async function setupTestApp(): Promise<{ app: Application; prisma: PrismaClient }> {\n      123 |   if (!testApp || !prisma) {\n    > 124 |     throw new Error('Test environment not initialized. This should be called after global beforeAll.');\n          |           ^\n      125 |   }\n      126 |   return { app: testApp, prisma };\n      127 | }\n\n      at setupTestApp (tests/integration/setup.ts:124:11)\n      at Object.<anonymous> (tests/integration/organization-settings-customization.test.ts:24:39)\n\n  ● Organization Settings Customization Integration Tests › Error Handling and Edge Cases › should handle concurrent settings updates\n\n\n\n\n\n  ● Organization Settings Customization Integration Tests › Error Handling and Edge Cases › should handle concurrent settings updates\n\n    Test environment not initialized. This should be called after global beforeAll.\n\n      122 | export async function setupTestApp(): Promise<{ app: Application; prisma: PrismaClient }> {\n      123 |   if (!testApp || !prisma) {\n    > 124 |     throw new Error('Test environment not initialized. This should be called after global beforeAll.');\n          |           ^\n      125 |   }\n      126 |   return { app: testApp, prisma };\n      127 | }\n\n      at setupTestApp (tests/integration/setup.ts:124:11)\n      at Object.<anonymous> (tests/integration/organization-settings-customization.test.ts:24:39)\n","testResults":[{"ancestorTitles":["Organization Settings Customization Integration Tests","Settings Initialization"],"duration":0,"failureMessages":["","Error: Test environment not initialized. This should be called after global beforeAll.\n    at setupTestApp (/home/eric/Projects/accounting-api/tests/integration/setup.ts:124:11)\n    at Object.<anonymous> (/home/eric/Projects/accounting-api/tests/integration/organization-settings-customization.test.ts:24:39)\n    at Promise.then.completed (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:281:40)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:95:7)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Organization Settings Customization Integration Tests Settings Initialization should initialize settings for new organization","status":"failed","title":"should initialize settings for new organization"},{"ancestorTitles":["Organization Settings Customization Integration Tests","Settings Initialization"],"duration":0,"failureMessages":["","Error: Test environment not initialized. This should be called after global beforeAll.\n    at setupTestApp (/home/eric/Projects/accounting-api/tests/integration/setup.ts:124:11)\n    at Object.<anonymous> (/home/eric/Projects/accounting-api/tests/integration/organization-settings-customization.test.ts:24:39)\n    at Promise.then.completed (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:281:40)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:95:7)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Organization Settings Customization Integration Tests Settings Initialization should not allow viewers to initialize settings","status":"failed","title":"should not allow viewers to initialize settings"},{"ancestorTitles":["Organization Settings Customization Integration Tests","Invoice Settings Management"],"duration":0,"failureMessages":["","Error: Test environment not initialized. This should be called after global beforeAll.\n    at setupTestApp (/home/eric/Projects/accounting-api/tests/integration/setup.ts:124:11)\n    at Object.<anonymous> (/home/eric/Projects/accounting-api/tests/integration/organization-settings-customization.test.ts:24:39)\n    at Promise.then.completed (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:281:40)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:95:7)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Organization Settings Customization Integration Tests Invoice Settings Management should get complete invoice settings","status":"failed","title":"should get complete invoice settings"},{"ancestorTitles":["Organization Settings Customization Integration Tests","Invoice Settings Management"],"duration":0,"failureMessages":["","Error: Test environment not initialized. This should be called after global beforeAll.\n    at setupTestApp (/home/eric/Projects/accounting-api/tests/integration/setup.ts:124:11)\n    at Object.<anonymous> (/home/eric/Projects/accounting-api/tests/integration/organization-settings-customization.test.ts:24:39)\n    at Promise.then.completed (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:281:40)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:95:7)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Organization Settings Customization Integration Tests Invoice Settings Management should update invoice settings with full customization","status":"failed","title":"should update invoice settings with full customization"},{"ancestorTitles":["Organization Settings Customization Integration Tests","Invoice Settings Management"],"duration":0,"failureMessages":["","Error: Test environment not initialized. This should be called after global beforeAll.\n    at setupTestApp (/home/eric/Projects/accounting-api/tests/integration/setup.ts:124:11)\n    at Object.<anonymous> (/home/eric/Projects/accounting-api/tests/integration/organization-settings-customization.test.ts:24:39)\n    at Promise.then.completed (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:281:40)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:95:7)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Organization Settings Customization Integration Tests Invoice Settings Management should validate color formats in settings","status":"failed","title":"should validate color formats in settings"},{"ancestorTitles":["Organization Settings Customization Integration Tests","Invoice Settings Management"],"duration":0,"failureMessages":["","Error: Test environment not initialized. This should be called after global beforeAll.\n    at setupTestApp (/home/eric/Projects/accounting-api/tests/integration/setup.ts:124:11)\n    at Object.<anonymous> (/home/eric/Projects/accounting-api/tests/integration/organization-settings-customization.test.ts:24:39)\n    at Promise.then.completed (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:281:40)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:95:7)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Organization Settings Customization Integration Tests Invoice Settings Management should allow managers to update settings","status":"failed","title":"should allow managers to update settings"},{"ancestorTitles":["Organization Settings Customization Integration Tests","Invoice Settings Management"],"duration":0,"failureMessages":["","Error: Test environment not initialized. This should be called after global beforeAll.\n    at setupTestApp (/home/eric/Projects/accounting-api/tests/integration/setup.ts:124:11)\n    at Object.<anonymous> (/home/eric/Projects/accounting-api/tests/integration/organization-settings-customization.test.ts:24:39)\n    at Promise.then.completed (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:281:40)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:95:7)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Organization Settings Customization Integration Tests Invoice Settings Management should not allow viewers to update settings","status":"failed","title":"should not allow viewers to update settings"},{"ancestorTitles":["Organization Settings Customization Integration Tests","Logo Management"],"duration":0,"failureMessages":["","Error: Test environment not initialized. This should be called after global beforeAll.\n    at setupTestApp (/home/eric/Projects/accounting-api/tests/integration/setup.ts:124:11)\n    at Object.<anonymous> (/home/eric/Projects/accounting-api/tests/integration/organization-settings-customization.test.ts:24:39)\n    at Promise.then.completed (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:281:40)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:95:7)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Organization Settings Customization Integration Tests Logo Management should upload logo successfully","status":"failed","title":"should upload logo successfully"},{"ancestorTitles":["Organization Settings Customization Integration Tests","Logo Management"],"duration":0,"failureMessages":["","Error: Test environment not initialized. This should be called after global beforeAll.\n    at setupTestApp (/home/eric/Projects/accounting-api/tests/integration/setup.ts:124:11)\n    at Object.<anonymous> (/home/eric/Projects/accounting-api/tests/integration/organization-settings-customization.test.ts:24:39)\n    at Promise.then.completed (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:281:40)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:95:7)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Organization Settings Customization Integration Tests Logo Management should validate file types for logo upload","status":"failed","title":"should validate file types for logo upload"},{"ancestorTitles":["Organization Settings Customization Integration Tests","Logo Management"],"duration":0,"failureMessages":["","Error: Test environment not initialized. This should be called after global beforeAll.\n    at setupTestApp (/home/eric/Projects/accounting-api/tests/integration/setup.ts:124:11)\n    at Object.<anonymous> (/home/eric/Projects/accounting-api/tests/integration/organization-settings-customization.test.ts:24:39)\n    at Promise.then.completed (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:281:40)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:95:7)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Organization Settings Customization Integration Tests Logo Management should validate file size for logo upload","status":"failed","title":"should validate file size for logo upload"},{"ancestorTitles":["Organization Settings Customization Integration Tests","Logo Management"],"duration":0,"failureMessages":["","Error: Test environment not initialized. This should be called after global beforeAll.\n    at setupTestApp (/home/eric/Projects/accounting-api/tests/integration/setup.ts:124:11)\n    at Object.<anonymous> (/home/eric/Projects/accounting-api/tests/integration/organization-settings-customization.test.ts:24:39)\n    at Promise.then.completed (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:281:40)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:95:7)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Organization Settings Customization Integration Tests Logo Management should remove logo successfully","status":"failed","title":"should remove logo successfully"},{"ancestorTitles":["Organization Settings Customization Integration Tests","Logo Management"],"duration":0,"failureMessages":["","Error: Test environment not initialized. This should be called after global beforeAll.\n    at setupTestApp (/home/eric/Projects/accounting-api/tests/integration/setup.ts:124:11)\n    at Object.<anonymous> (/home/eric/Projects/accounting-api/tests/integration/organization-settings-customization.test.ts:24:39)\n    at Promise.then.completed (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:281:40)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:95:7)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Organization Settings Customization Integration Tests Logo Management should not allow viewers to manage logos","status":"failed","title":"should not allow viewers to manage logos"},{"ancestorTitles":["Organization Settings Customization Integration Tests","Tax Settings Management"],"duration":1,"failureMessages":["","Error: Test environment not initialized. This should be called after global beforeAll.\n    at setupTestApp (/home/eric/Projects/accounting-api/tests/integration/setup.ts:124:11)\n    at Object.<anonymous> (/home/eric/Projects/accounting-api/tests/integration/organization-settings-customization.test.ts:24:39)\n    at Promise.then.completed (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:281:40)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:95:7)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Organization Settings Customization Integration Tests Tax Settings Management should get current tax settings","status":"failed","title":"should get current tax settings"},{"ancestorTitles":["Organization Settings Customization Integration Tests","Tax Settings Management"],"duration":0,"failureMessages":["","Error: Test environment not initialized. This should be called after global beforeAll.\n    at setupTestApp (/home/eric/Projects/accounting-api/tests/integration/setup.ts:124:11)\n    at Object.<anonymous> (/home/eric/Projects/accounting-api/tests/integration/organization-settings-customization.test.ts:24:39)\n    at Promise.then.completed (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:281:40)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:95:7)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Organization Settings Customization Integration Tests Tax Settings Management should disable taxes organization-wide","status":"failed","title":"should disable taxes organization-wide"},{"ancestorTitles":["Organization Settings Customization Integration Tests","Tax Settings Management"],"duration":0,"failureMessages":["","Error: Test environment not initialized. This should be called after global beforeAll.\n    at setupTestApp (/home/eric/Projects/accounting-api/tests/integration/setup.ts:124:11)\n    at Object.<anonymous> (/home/eric/Projects/accounting-api/tests/integration/organization-settings-customization.test.ts:24:39)\n    at Promise.then.completed (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:281:40)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:95:7)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Organization Settings Customization Integration Tests Tax Settings Management should enable taxes organization-wide","status":"failed","title":"should enable taxes organization-wide"},{"ancestorTitles":["Organization Settings Customization Integration Tests","Tax Settings Management"],"duration":0,"failureMessages":["","Error: Test environment not initialized. This should be called after global beforeAll.\n    at setupTestApp (/home/eric/Projects/accounting-api/tests/integration/setup.ts:124:11)\n    at Object.<anonymous> (/home/eric/Projects/accounting-api/tests/integration/organization-settings-customization.test.ts:24:39)\n    at Promise.then.completed (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:281:40)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:95:7)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Organization Settings Customization Integration Tests Tax Settings Management should validate boolean values for tax settings","status":"failed","title":"should validate boolean values for tax settings"},{"ancestorTitles":["Organization Settings Customization Integration Tests","Tax Settings Management"],"duration":0,"failureMessages":["","Error: Test environment not initialized. This should be called after global beforeAll.\n    at setupTestApp (/home/eric/Projects/accounting-api/tests/integration/setup.ts:124:11)\n    at Object.<anonymous> (/home/eric/Projects/accounting-api/tests/integration/organization-settings-customization.test.ts:24:39)\n    at Promise.then.completed (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:281:40)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:95:7)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Organization Settings Customization Integration Tests Tax Settings Management should allow managers to update tax settings","status":"failed","title":"should allow managers to update tax settings"},{"ancestorTitles":["Organization Settings Customization Integration Tests","Tax Settings Management"],"duration":0,"failureMessages":["","Error: Test environment not initialized. This should be called after global beforeAll.\n    at setupTestApp (/home/eric/Projects/accounting-api/tests/integration/setup.ts:124:11)\n    at Object.<anonymous> (/home/eric/Projects/accounting-api/tests/integration/organization-settings-customization.test.ts:24:39)\n    at Promise.then.completed (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:281:40)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:95:7)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Organization Settings Customization Integration Tests Tax Settings Management should not allow viewers to update tax settings","status":"failed","title":"should not allow viewers to update tax settings"},{"ancestorTitles":["Organization Settings Customization Integration Tests","Default Template and Style Management"],"duration":0,"failureMessages":["","Error: Test environment not initialized. This should be called after global beforeAll.\n    at setupTestApp (/home/eric/Projects/accounting-api/tests/integration/setup.ts:124:11)\n    at Object.<anonymous> (/home/eric/Projects/accounting-api/tests/integration/organization-settings-customization.test.ts:24:39)\n    at Promise.then.completed (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:281:40)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:95:7)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Organization Settings Customization Integration Tests Default Template and Style Management should set default template and style","status":"failed","title":"should set default template and style"},{"ancestorTitles":["Organization Settings Customization Integration Tests","Default Template and Style Management"],"duration":0,"failureMessages":["","Error: Test environment not initialized. This should be called after global beforeAll.\n    at setupTestApp (/home/eric/Projects/accounting-api/tests/integration/setup.ts:124:11)\n    at Object.<anonymous> (/home/eric/Projects/accounting-api/tests/integration/organization-settings-customization.test.ts:24:39)\n    at Promise.then.completed (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:281:40)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:95:7)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Organization Settings Customization Integration Tests Default Template and Style Management should validate template and style IDs","status":"failed","title":"should validate template and style IDs"},{"ancestorTitles":["Organization Settings Customization Integration Tests","Default Template and Style Management"],"duration":0,"failureMessages":["","Error: Test environment not initialized. This should be called after global beforeAll.\n    at setupTestApp (/home/eric/Projects/accounting-api/tests/integration/setup.ts:124:11)\n    at Object.<anonymous> (/home/eric/Projects/accounting-api/tests/integration/organization-settings-customization.test.ts:24:39)\n    at Promise.then.completed (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:281:40)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:95:7)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Organization Settings Customization Integration Tests Default Template and Style Management should allow managers to set defaults","status":"failed","title":"should allow managers to set defaults"},{"ancestorTitles":["Organization Settings Customization Integration Tests","Complex Branding Scenarios"],"duration":0,"failureMessages":["","Error: Test environment not initialized. This should be called after global beforeAll.\n    at setupTestApp (/home/eric/Projects/accounting-api/tests/integration/setup.ts:124:11)\n    at Object.<anonymous> (/home/eric/Projects/accounting-api/tests/integration/organization-settings-customization.test.ts:24:39)\n    at Promise.then.completed (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:281:40)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:95:7)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Organization Settings Customization Integration Tests Complex Branding Scenarios should handle logo display vs organization name preference","status":"failed","title":"should handle logo display vs organization name preference"},{"ancestorTitles":["Organization Settings Customization Integration Tests","Complex Branding Scenarios"],"duration":0,"failureMessages":["","Error: Test environment not initialized. This should be called after global beforeAll.\n    at setupTestApp (/home/eric/Projects/accounting-api/tests/integration/setup.ts:124:11)\n    at Object.<anonymous> (/home/eric/Projects/accounting-api/tests/integration/organization-settings-customization.test.ts:24:39)\n    at Promise.then.completed (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:281:40)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:95:7)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Organization Settings Customization Integration Tests Complex Branding Scenarios should handle comprehensive display settings","status":"failed","title":"should handle comprehensive display settings"},{"ancestorTitles":["Organization Settings Customization Integration Tests","Complex Branding Scenarios"],"duration":0,"failureMessages":["","Error: Test environment not initialized. This should be called after global beforeAll.\n    at setupTestApp (/home/eric/Projects/accounting-api/tests/integration/setup.ts:124:11)\n    at Object.<anonymous> (/home/eric/Projects/accounting-api/tests/integration/organization-settings-customization.test.ts:24:39)\n    at Promise.then.completed (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:281:40)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:95:7)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Organization Settings Customization Integration Tests Complex Branding Scenarios should handle custom CSS injection","status":"failed","title":"should handle custom CSS injection"},{"ancestorTitles":["Organization Settings Customization Integration Tests","Integration with PDF Generation"],"duration":0,"failureMessages":["","Error: Test environment not initialized. This should be called after global beforeAll.\n    at setupTestApp (/home/eric/Projects/accounting-api/tests/integration/setup.ts:124:11)\n    at Object.<anonymous> (/home/eric/Projects/accounting-api/tests/integration/organization-settings-customization.test.ts:24:39)\n    at Promise.then.completed (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:281:40)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:95:7)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Organization Settings Customization Integration Tests Integration with PDF Generation should apply settings to PDF generation workflow","status":"failed","title":"should apply settings to PDF generation workflow"},{"ancestorTitles":["Organization Settings Customization Integration Tests","Integration with PDF Generation"],"duration":0,"failureMessages":["","Error: Test environment not initialized. This should be called after global beforeAll.\n    at setupTestApp (/home/eric/Projects/accounting-api/tests/integration/setup.ts:124:11)\n    at Object.<anonymous> (/home/eric/Projects/accounting-api/tests/integration/organization-settings-customization.test.ts:24:39)\n    at Promise.then.completed (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:281:40)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:95:7)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Organization Settings Customization Integration Tests Integration with PDF Generation should respect tax disable setting in PDF generation","status":"failed","title":"should respect tax disable setting in PDF generation"},{"ancestorTitles":["Organization Settings Customization Integration Tests","Error Handling and Edge Cases"],"duration":0,"failureMessages":["","Error: Test environment not initialized. This should be called after global beforeAll.\n    at setupTestApp (/home/eric/Projects/accounting-api/tests/integration/setup.ts:124:11)\n    at Object.<anonymous> (/home/eric/Projects/accounting-api/tests/integration/organization-settings-customization.test.ts:24:39)\n    at Promise.then.completed (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:281:40)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:95:7)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Organization Settings Customization Integration Tests Error Handling and Edge Cases should handle missing organization gracefully","status":"failed","title":"should handle missing organization gracefully"},{"ancestorTitles":["Organization Settings Customization Integration Tests","Error Handling and Edge Cases"],"duration":0,"failureMessages":["","Error: Test environment not initialized. This should be called after global beforeAll.\n    at setupTestApp (/home/eric/Projects/accounting-api/tests/integration/setup.ts:124:11)\n    at Object.<anonymous> (/home/eric/Projects/accounting-api/tests/integration/organization-settings-customization.test.ts:24:39)\n    at Promise.then.completed (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:281:40)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:95:7)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Organization Settings Customization Integration Tests Error Handling and Edge Cases should handle malformed JSON in display settings","status":"failed","title":"should handle malformed JSON in display settings"},{"ancestorTitles":["Organization Settings Customization Integration Tests","Error Handling and Edge Cases"],"duration":0,"failureMessages":["","Error: Test environment not initialized. This should be called after global beforeAll.\n    at setupTestApp (/home/eric/Projects/accounting-api/tests/integration/setup.ts:124:11)\n    at Object.<anonymous> (/home/eric/Projects/accounting-api/tests/integration/organization-settings-customization.test.ts:24:39)\n    at Promise.then.completed (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusHook (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:281:40)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:95:7)\n    at _runTestsForDescribeBlock (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:121:9)\n    at run (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/home/eric/Projects/accounting-api/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/home/eric/Projects/accounting-api/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"Organization Settings Customization Integration Tests Error Handling and Edge Cases should handle concurrent settings updates","status":"failed","title":"should handle concurrent settings updates"}]},{"numFailingTests":4,"numPassingTests":0,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":1759565228023,"runtime":669,"slow":false,"start":1759565227354},"testFilePath":"/home/eric/Projects/accounting-api/tests/integration/auth-validation.test.ts","failureMessage":"  ● Authentication & Authorization Validation › should authenticate with test token\n\n\n\n\n\n  ● Authentication & Authorization Validation › should validate organization access with test token\n\n\n\n\n\n  ● Authentication & Authorization Validation › should reject requests without authentication\n\n\n\n\n\n  ● Authentication & Authorization Validation › test token should have isTestToken flag\n\n\n\n\n","testResults":[{"ancestorTitles":["Authentication & Authorization Validation"],"duration":0,"failureMessages":[""],"fullName":"Authentication & Authorization Validation should authenticate with test token","status":"failed","title":"should authenticate with test token"},{"ancestorTitles":["Authentication & Authorization Validation"],"duration":0,"failureMessages":[""],"fullName":"Authentication & Authorization Validation should validate organization access with test token","status":"failed","title":"should validate organization access with test token"},{"ancestorTitles":["Authentication & Authorization Validation"],"duration":0,"failureMessages":[""],"fullName":"Authentication & Authorization Validation should reject requests without authentication","status":"failed","title":"should reject requests without authentication"},{"ancestorTitles":["Authentication & Authorization Validation"],"duration":0,"failureMessages":[""],"fullName":"Authentication & Authorization Validation test token should have isTestToken flag","status":"failed","title":"test token should have isTestToken flag"}]},{"numFailingTests":8,"numPassingTests":0,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":1759565228668,"runtime":643,"slow":false,"start":1759565228025},"testFilePath":"/home/eric/Projects/accounting-api/tests/integration/financial-approval-workflow.test.ts","failureMessage":"  ● Financial Approval Workflow Tests › Monetary Threshold Approval Matrix › should enforce approval thresholds based on transaction amounts\n\n\n\n\n\n  ● Financial Approval Workflow Tests › Monetary Threshold Approval Matrix › should enforce invoice approval thresholds\n\n\n\n\n\n  ● Financial Approval Workflow Tests › Multi-Level Approval Workflows › should enforce sequential approval requirements\n\n\n\n\n\n  ● Financial Approval Workflow Tests › Multi-Level Approval Workflows › should handle approval delegation and temporary authority\n\n\n\n\n\n  ● Financial Approval Workflow Tests › Escalation Path and Timeout Handling › should handle approval timeouts and automatic escalation\n\n\n\n\n\n  ● Financial Approval Workflow Tests › Escalation Path and Timeout Handling › should enforce emergency approval procedures\n\n\n\n\n\n  ● Financial Approval Workflow Tests › Compliance and Audit Trail Validation › should maintain comprehensive approval audit trails\n\n\n\n\n\n  ● Financial Approval Workflow Tests › Compliance and Audit Trail Validation › should enforce segregation of duties in approval processes\n\n\n\n\n","testResults":[{"ancestorTitles":["Financial Approval Workflow Tests","Monetary Threshold Approval Matrix"],"duration":0,"failureMessages":[""],"fullName":"Financial Approval Workflow Tests Monetary Threshold Approval Matrix should enforce approval thresholds based on transaction amounts","status":"failed","title":"should enforce approval thresholds based on transaction amounts"},{"ancestorTitles":["Financial Approval Workflow Tests","Monetary Threshold Approval Matrix"],"duration":0,"failureMessages":[""],"fullName":"Financial Approval Workflow Tests Monetary Threshold Approval Matrix should enforce invoice approval thresholds","status":"failed","title":"should enforce invoice approval thresholds"},{"ancestorTitles":["Financial Approval Workflow Tests","Multi-Level Approval Workflows"],"duration":0,"failureMessages":[""],"fullName":"Financial Approval Workflow Tests Multi-Level Approval Workflows should enforce sequential approval requirements","status":"failed","title":"should enforce sequential approval requirements"},{"ancestorTitles":["Financial Approval Workflow Tests","Multi-Level Approval Workflows"],"duration":0,"failureMessages":[""],"fullName":"Financial Approval Workflow Tests Multi-Level Approval Workflows should handle approval delegation and temporary authority","status":"failed","title":"should handle approval delegation and temporary authority"},{"ancestorTitles":["Financial Approval Workflow Tests","Escalation Path and Timeout Handling"],"duration":0,"failureMessages":[""],"fullName":"Financial Approval Workflow Tests Escalation Path and Timeout Handling should handle approval timeouts and automatic escalation","status":"failed","title":"should handle approval timeouts and automatic escalation"},{"ancestorTitles":["Financial Approval Workflow Tests","Escalation Path and Timeout Handling"],"duration":0,"failureMessages":[""],"fullName":"Financial Approval Workflow Tests Escalation Path and Timeout Handling should enforce emergency approval procedures","status":"failed","title":"should enforce emergency approval procedures"},{"ancestorTitles":["Financial Approval Workflow Tests","Compliance and Audit Trail Validation"],"duration":0,"failureMessages":[""],"fullName":"Financial Approval Workflow Tests Compliance and Audit Trail Validation should maintain comprehensive approval audit trails","status":"failed","title":"should maintain comprehensive approval audit trails"},{"ancestorTitles":["Financial Approval Workflow Tests","Compliance and Audit Trail Validation"],"duration":0,"failureMessages":[""],"fullName":"Financial Approval Workflow Tests Compliance and Audit Trail Validation should enforce segregation of duties in approval processes","status":"failed","title":"should enforce segregation of duties in approval processes"}]},{"numFailingTests":6,"numPassingTests":0,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":1759565229322,"runtime":652,"slow":false,"start":1759565228670},"testFilePath":"/home/eric/Projects/accounting-api/tests/integration/multi-tenant-isolation-workflow.test.ts","failureMessage":"  ● Multi-Tenant Data Isolation Integration Tests › Complete Data Isolation Between Organizations › should enforce complete data isolation between tenants\n\n\n\n\n\n  ● Multi-Tenant Data Isolation Integration Tests › Complete Data Isolation Between Organizations › should prevent privilege escalation across tenants\n\n\n\n\n\n  ● Multi-Tenant Data Isolation Integration Tests › Complete Data Isolation Between Organizations › should handle concurrent multi-tenant operations safely\n\n\n\n\n\n  ● Multi-Tenant Data Isolation Integration Tests › Organization Management and Lifecycle › should handle organization deactivation and data retention\n\n\n\n\n\n  ● Multi-Tenant Data Isolation Integration Tests › Organization Management and Lifecycle › should enforce organization-specific resource limits\n\n\n\n\n\n  ● Multi-Tenant Data Isolation Integration Tests › Data Migration and Export › should export organization data without cross-tenant contamination\n\n\n\n\n","testResults":[{"ancestorTitles":["Multi-Tenant Data Isolation Integration Tests","Complete Data Isolation Between Organizations"],"duration":0,"failureMessages":[""],"fullName":"Multi-Tenant Data Isolation Integration Tests Complete Data Isolation Between Organizations should enforce complete data isolation between tenants","status":"failed","title":"should enforce complete data isolation between tenants"},{"ancestorTitles":["Multi-Tenant Data Isolation Integration Tests","Complete Data Isolation Between Organizations"],"duration":0,"failureMessages":[""],"fullName":"Multi-Tenant Data Isolation Integration Tests Complete Data Isolation Between Organizations should prevent privilege escalation across tenants","status":"failed","title":"should prevent privilege escalation across tenants"},{"ancestorTitles":["Multi-Tenant Data Isolation Integration Tests","Complete Data Isolation Between Organizations"],"duration":0,"failureMessages":[""],"fullName":"Multi-Tenant Data Isolation Integration Tests Complete Data Isolation Between Organizations should handle concurrent multi-tenant operations safely","status":"failed","title":"should handle concurrent multi-tenant operations safely"},{"ancestorTitles":["Multi-Tenant Data Isolation Integration Tests","Organization Management and Lifecycle"],"duration":0,"failureMessages":[""],"fullName":"Multi-Tenant Data Isolation Integration Tests Organization Management and Lifecycle should handle organization deactivation and data retention","status":"failed","title":"should handle organization deactivation and data retention"},{"ancestorTitles":["Multi-Tenant Data Isolation Integration Tests","Organization Management and Lifecycle"],"duration":0,"failureMessages":[""],"fullName":"Multi-Tenant Data Isolation Integration Tests Organization Management and Lifecycle should enforce organization-specific resource limits","status":"failed","title":"should enforce organization-specific resource limits"},{"ancestorTitles":["Multi-Tenant Data Isolation Integration Tests","Data Migration and Export"],"duration":0,"failureMessages":[""],"fullName":"Multi-Tenant Data Isolation Integration Tests Data Migration and Export should export organization data without cross-tenant contamination","status":"failed","title":"should export organization data without cross-tenant contamination"}]},{"numFailingTests":10,"numPassingTests":0,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":1759565230420,"runtime":1095,"slow":false,"start":1759565229325},"testFilePath":"/home/eric/Projects/accounting-api/tests/integration/payment-processing-workflow.test.ts","failureMessage":"  ● Payment Processing Integration Tests › Stripe Payment Processing Workflows › should process complete Stripe payment lifecycle with webhooks\n\n\n\n\n\n  ● Payment Processing Integration Tests › Stripe Payment Processing Workflows › should handle Stripe payment failures and retries\n\n\n\n\n\n  ● Payment Processing Integration Tests › Stripe Payment Processing Workflows › should handle Stripe dispute and chargeback processing\n\n\n\n\n\n  ● Payment Processing Integration Tests › e-Transfer Payment Processing Workflows › should process complete e-Transfer payment lifecycle\n\n\n\n\n\n  ● Payment Processing Integration Tests › e-Transfer Payment Processing Workflows › should handle e-Transfer security and fraud detection\n\n\n\n\n\n  ● Payment Processing Integration Tests › Payment Processing Security and Compliance › should enforce PCI compliance for card data handling\n\n\n\n\n\n  ● Payment Processing Integration Tests › Payment Processing Security and Compliance › should implement proper payment authorization controls\n\n\n\n\n\n  ● Payment Processing Integration Tests › Payment Processing Security and Compliance › should maintain comprehensive audit trails for all payment activities\n\n\n\n\n\n  ● Payment Processing Integration Tests › Payment Processing Performance and Reliability › should handle high-volume payment processing efficiently\n\n\n\n\n\n  ● Payment Processing Integration Tests › Payment Processing Performance and Reliability › should implement payment retry and recovery mechanisms\n\n\n\n\n","testResults":[{"ancestorTitles":["Payment Processing Integration Tests","Stripe Payment Processing Workflows"],"duration":0,"failureMessages":[""],"fullName":"Payment Processing Integration Tests Stripe Payment Processing Workflows should process complete Stripe payment lifecycle with webhooks","status":"failed","title":"should process complete Stripe payment lifecycle with webhooks"},{"ancestorTitles":["Payment Processing Integration Tests","Stripe Payment Processing Workflows"],"duration":0,"failureMessages":[""],"fullName":"Payment Processing Integration Tests Stripe Payment Processing Workflows should handle Stripe payment failures and retries","status":"failed","title":"should handle Stripe payment failures and retries"},{"ancestorTitles":["Payment Processing Integration Tests","Stripe Payment Processing Workflows"],"duration":0,"failureMessages":[""],"fullName":"Payment Processing Integration Tests Stripe Payment Processing Workflows should handle Stripe dispute and chargeback processing","status":"failed","title":"should handle Stripe dispute and chargeback processing"},{"ancestorTitles":["Payment Processing Integration Tests","e-Transfer Payment Processing Workflows"],"duration":0,"failureMessages":[""],"fullName":"Payment Processing Integration Tests e-Transfer Payment Processing Workflows should process complete e-Transfer payment lifecycle","status":"failed","title":"should process complete e-Transfer payment lifecycle"},{"ancestorTitles":["Payment Processing Integration Tests","e-Transfer Payment Processing Workflows"],"duration":0,"failureMessages":[""],"fullName":"Payment Processing Integration Tests e-Transfer Payment Processing Workflows should handle e-Transfer security and fraud detection","status":"failed","title":"should handle e-Transfer security and fraud detection"},{"ancestorTitles":["Payment Processing Integration Tests","Payment Processing Security and Compliance"],"duration":0,"failureMessages":[""],"fullName":"Payment Processing Integration Tests Payment Processing Security and Compliance should enforce PCI compliance for card data handling","status":"failed","title":"should enforce PCI compliance for card data handling"},{"ancestorTitles":["Payment Processing Integration Tests","Payment Processing Security and Compliance"],"duration":0,"failureMessages":[""],"fullName":"Payment Processing Integration Tests Payment Processing Security and Compliance should implement proper payment authorization controls","status":"failed","title":"should implement proper payment authorization controls"},{"ancestorTitles":["Payment Processing Integration Tests","Payment Processing Security and Compliance"],"duration":0,"failureMessages":[""],"fullName":"Payment Processing Integration Tests Payment Processing Security and Compliance should maintain comprehensive audit trails for all payment activities","status":"failed","title":"should maintain comprehensive audit trails for all payment activities"},{"ancestorTitles":["Payment Processing Integration Tests","Payment Processing Performance and Reliability"],"duration":0,"failureMessages":[""],"fullName":"Payment Processing Integration Tests Payment Processing Performance and Reliability should handle high-volume payment processing efficiently","status":"failed","title":"should handle high-volume payment processing efficiently"},{"ancestorTitles":["Payment Processing Integration Tests","Payment Processing Performance and Reliability"],"duration":0,"failureMessages":[""],"fullName":"Payment Processing Integration Tests Payment Processing Performance and Reliability should implement payment retry and recovery mechanisms","status":"failed","title":"should implement payment retry and recovery mechanisms"}]},{"numFailingTests":12,"numPassingTests":0,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":1759565231096,"runtime":674,"slow":false,"start":1759565230422},"testFilePath":"/home/eric/Projects/accounting-api/tests/integration/data-integrity.test.ts","failureMessage":"  ● Data Integrity and Consistency Integration Tests › Database Transaction Integrity › should maintain ACID properties during complex operations\n\n\n\n\n\n  ● Data Integrity and Consistency Integration Tests › Database Transaction Integrity › should handle concurrent operations without data corruption\n\n\n\n\n\n  ● Data Integrity and Consistency Integration Tests › Foreign Key Constraint Validation › should enforce referential integrity across all entities\n\n\n\n\n\n  ● Data Integrity and Consistency Integration Tests › Foreign Key Constraint Validation › should handle cascading deletes properly\n\n\n\n\n\n  ● Data Integrity and Consistency Integration Tests › Data Validation Consistency › should validate business rules across operations\n\n\n\n\n\n  ● Data Integrity and Consistency Integration Tests › Data Validation Consistency › should maintain numerical precision in financial calculations\n\n\n\n\n\n  ● Data Integrity and Consistency Integration Tests › Audit Trail Completeness › should create complete audit trail for all operations\n\n\n\n\n\n  ● Data Integrity and Consistency Integration Tests › Audit Trail Completeness › should track data changes with before/after snapshots\n\n\n\n\n\n  ● Data Integrity and Consistency Integration Tests › Data Consistency Across Services › should maintain consistency between quotes and invoices\n\n\n\n\n\n  ● Data Integrity and Consistency Integration Tests › Data Consistency Across Services › should maintain payment-invoice balance integrity\n\n\n\n\n\n  ● Data Integrity and Consistency Integration Tests › Data Consistency Across Services › should handle complex multi-entity consistency scenarios\n\n\n\n\n\n  ● Data Integrity and Consistency Integration Tests › Database Performance and Optimization › should maintain query performance with large datasets\n\n\n\n\n","testResults":[{"ancestorTitles":["Data Integrity and Consistency Integration Tests","Database Transaction Integrity"],"duration":0,"failureMessages":[""],"fullName":"Data Integrity and Consistency Integration Tests Database Transaction Integrity should maintain ACID properties during complex operations","status":"failed","title":"should maintain ACID properties during complex operations"},{"ancestorTitles":["Data Integrity and Consistency Integration Tests","Database Transaction Integrity"],"duration":0,"failureMessages":[""],"fullName":"Data Integrity and Consistency Integration Tests Database Transaction Integrity should handle concurrent operations without data corruption","status":"failed","title":"should handle concurrent operations without data corruption"},{"ancestorTitles":["Data Integrity and Consistency Integration Tests","Foreign Key Constraint Validation"],"duration":0,"failureMessages":[""],"fullName":"Data Integrity and Consistency Integration Tests Foreign Key Constraint Validation should enforce referential integrity across all entities","status":"failed","title":"should enforce referential integrity across all entities"},{"ancestorTitles":["Data Integrity and Consistency Integration Tests","Foreign Key Constraint Validation"],"duration":0,"failureMessages":[""],"fullName":"Data Integrity and Consistency Integration Tests Foreign Key Constraint Validation should handle cascading deletes properly","status":"failed","title":"should handle cascading deletes properly"},{"ancestorTitles":["Data Integrity and Consistency Integration Tests","Data Validation Consistency"],"duration":0,"failureMessages":[""],"fullName":"Data Integrity and Consistency Integration Tests Data Validation Consistency should validate business rules across operations","status":"failed","title":"should validate business rules across operations"},{"ancestorTitles":["Data Integrity and Consistency Integration Tests","Data Validation Consistency"],"duration":0,"failureMessages":[""],"fullName":"Data Integrity and Consistency Integration Tests Data Validation Consistency should maintain numerical precision in financial calculations","status":"failed","title":"should maintain numerical precision in financial calculations"},{"ancestorTitles":["Data Integrity and Consistency Integration Tests","Audit Trail Completeness"],"duration":0,"failureMessages":[""],"fullName":"Data Integrity and Consistency Integration Tests Audit Trail Completeness should create complete audit trail for all operations","status":"failed","title":"should create complete audit trail for all operations"},{"ancestorTitles":["Data Integrity and Consistency Integration Tests","Audit Trail Completeness"],"duration":0,"failureMessages":[""],"fullName":"Data Integrity and Consistency Integration Tests Audit Trail Completeness should track data changes with before/after snapshots","status":"failed","title":"should track data changes with before/after snapshots"},{"ancestorTitles":["Data Integrity and Consistency Integration Tests","Data Consistency Across Services"],"duration":0,"failureMessages":[""],"fullName":"Data Integrity and Consistency Integration Tests Data Consistency Across Services should maintain consistency between quotes and invoices","status":"failed","title":"should maintain consistency between quotes and invoices"},{"ancestorTitles":["Data Integrity and Consistency Integration Tests","Data Consistency Across Services"],"duration":0,"failureMessages":[""],"fullName":"Data Integrity and Consistency Integration Tests Data Consistency Across Services should maintain payment-invoice balance integrity","status":"failed","title":"should maintain payment-invoice balance integrity"},{"ancestorTitles":["Data Integrity and Consistency Integration Tests","Data Consistency Across Services"],"duration":0,"failureMessages":[""],"fullName":"Data Integrity and Consistency Integration Tests Data Consistency Across Services should handle complex multi-entity consistency scenarios","status":"failed","title":"should handle complex multi-entity consistency scenarios"},{"ancestorTitles":["Data Integrity and Consistency Integration Tests","Database Performance and Optimization"],"duration":0,"failureMessages":[""],"fullName":"Data Integrity and Consistency Integration Tests Database Performance and Optimization should maintain query performance with large datasets","status":"failed","title":"should maintain query performance with large datasets"}]},{"numFailingTests":49,"numPassingTests":0,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":1759565231769,"runtime":670,"slow":false,"start":1759565231099},"testFilePath":"/home/eric/Projects/accounting-api/tests/integration/encryption-system-integration.test.ts","failureMessage":"  ● Encryption System Tests › Key Management › should generate organization-specific keys\n\n\n\n\n\n  ● Encryption System Tests › Key Management › should generate deterministic keys for same organization\n\n\n\n\n\n  ● Encryption System Tests › Key Management › should validate key properties\n\n\n\n\n\n  ● Encryption System Tests › Key Management › should support key rotation\n\n\n\n\n\n  ● Encryption System Tests › Key Management › should export and import keys securely\n\n\n\n\n\n  ● Encryption System Tests › Field Encryption › should encrypt and decrypt various data types\n\n\n\n\n\n  ● Encryption System Tests › Field Encryption › should use different encryption for probabilistic mode\n\n\n\n\n\n  ● Encryption System Tests › Field Encryption › should use same encryption for deterministic mode\n\n\n\n\n\n  ● Encryption System Tests › Field Encryption › should handle batch encryption/decryption\n\n\n\n\n\n  ● Encryption System Tests › Field Encryption › should validate field formats\n\n\n\n\n\n  ● Encryption System Tests › Field Encryption › should handle empty and null values gracefully\n\n\n\n\n\n  ● Encryption System Tests › Searchable Encryption › should index fields for search\n\n\n\n\n\n  ● Encryption System Tests › Searchable Encryption › should perform partial search\n\n\n\n\n\n  ● Encryption System Tests › Searchable Encryption › should check bloom filter for privacy-preserving search\n\n\n\n\n\n  ● Encryption System Tests › Searchable Encryption › should clear search caches\n\n\n\n\n\n  ● Encryption System Tests › Encryption Middleware › should validate configuration\n\n\n\n\n\n  ● Encryption System Tests › Encryption Middleware › should identify encrypted fields\n\n\n\n\n\n  ● Encryption System Tests › Encryption Middleware › should get encrypted fields for model\n\n\n\n\n\n  ● Encryption System Tests › Encryption Middleware › should generate search conditions for encrypted fields\n\n\n\n\n\n  ● Encryption System Tests › Key Rotation › should schedule key rotation\n\n\n\n\n\n  ● Encryption System Tests › Key Rotation › should handle emergency key rotation\n\n\n\n\n\n  ● Encryption System Tests › Key Rotation › should get rotation statistics\n\n\n\n\n\n  ● Encryption System Tests › Key Rotation › should manage rotation policies\n\n\n\n\n\n  ● Encryption System Tests › Audit Logging › should log encryption events\n\n\n\n\n\n  ● Encryption System Tests › Audit Logging › should generate audit summary\n\n\n\n\n\n  ● Encryption System Tests › Audit Logging › should generate compliance reports\n\n\n\n\n\n  ● Encryption System Tests › Audit Logging › should verify audit log integrity\n\n\n\n\n\n  ● Encryption System Tests › Performance Optimization › should cache encryption operations\n\n\n\n\n\n  ● Encryption System Tests › Performance Optimization › should perform batch operations efficiently\n\n\n\n\n\n  ● Encryption System Tests › Performance Optimization › should run performance benchmarks\n\n\n\n\n\n  ● Encryption System Tests › Performance Optimization › should provide cache statistics\n\n\n\n\n\n  ● Encryption System Tests › Performance Optimization › should clear caches\n\n\n\n\n\n  ● Encryption System Tests › Data Migration › should create migration plan\n\n\n\n\n\n  ● Encryption System Tests › Data Migration › should start migration in dry-run mode\n\n\n\n\n\n  ● Encryption System Tests › Data Migration › should get active migrations\n\n\n\n\n\n  ● Encryption System Tests › Security Tests › should use different keys for different organizations\n\n\n\n\n\n  ● Encryption System Tests › Security Tests › should not decrypt with wrong organization key\n\n\n\n\n\n  ● Encryption System Tests › Security Tests › should handle tampered encrypted data\n\n\n\n\n\n  ● Encryption System Tests › Security Tests › should generate cryptographically secure random values\n\n\n\n\n\n  ● Encryption System Tests › Security Tests › should securely delete keys\n\n\n\n\n\n  ● Encryption System Tests › Error Handling › should handle invalid encryption options gracefully\n\n\n\n\n\n  ● Encryption System Tests › Error Handling › should handle corrupted encrypted data\n\n\n\n\n\n  ● Encryption System Tests › Error Handling › should validate key parameters\n\n\n\n\n\n  ● Encryption System Tests › Integration Tests › should work end-to-end with Prisma middleware\n\n\n\n\n\n  ● Encryption System Tests › Integration Tests › should maintain data integrity across operations\n\n\n\n\n\n  ● Encryption System Tests › Integration Tests › should handle concurrent operations safely\n\n\n\n\n\n  ● Performance and Stress Tests › should handle large data encryption efficiently\n\n\n\n\n\n  ● Performance and Stress Tests › should handle high volume of operations\n\n\n\n\n\n  ● Performance and Stress Tests › should maintain memory efficiency\n\n\n\n\n","testResults":[{"ancestorTitles":["Encryption System Tests","Key Management"],"duration":1,"failureMessages":[""],"fullName":"Encryption System Tests Key Management should generate organization-specific keys","status":"failed","title":"should generate organization-specific keys"},{"ancestorTitles":["Encryption System Tests","Key Management"],"duration":0,"failureMessages":[""],"fullName":"Encryption System Tests Key Management should generate deterministic keys for same organization","status":"failed","title":"should generate deterministic keys for same organization"},{"ancestorTitles":["Encryption System Tests","Key Management"],"duration":0,"failureMessages":[""],"fullName":"Encryption System Tests Key Management should validate key properties","status":"failed","title":"should validate key properties"},{"ancestorTitles":["Encryption System Tests","Key Management"],"duration":0,"failureMessages":[""],"fullName":"Encryption System Tests Key Management should support key rotation","status":"failed","title":"should support key rotation"},{"ancestorTitles":["Encryption System Tests","Key Management"],"duration":0,"failureMessages":[""],"fullName":"Encryption System Tests Key Management should export and import keys securely","status":"failed","title":"should export and import keys securely"},{"ancestorTitles":["Encryption System Tests","Field Encryption"],"duration":0,"failureMessages":[""],"fullName":"Encryption System Tests Field Encryption should encrypt and decrypt various data types","status":"failed","title":"should encrypt and decrypt various data types"},{"ancestorTitles":["Encryption System Tests","Field Encryption"],"duration":0,"failureMessages":[""],"fullName":"Encryption System Tests Field Encryption should use different encryption for probabilistic mode","status":"failed","title":"should use different encryption for probabilistic mode"},{"ancestorTitles":["Encryption System Tests","Field Encryption"],"duration":0,"failureMessages":[""],"fullName":"Encryption System Tests Field Encryption should use same encryption for deterministic mode","status":"failed","title":"should use same encryption for deterministic mode"},{"ancestorTitles":["Encryption System Tests","Field Encryption"],"duration":0,"failureMessages":[""],"fullName":"Encryption System Tests Field Encryption should handle batch encryption/decryption","status":"failed","title":"should handle batch encryption/decryption"},{"ancestorTitles":["Encryption System Tests","Field Encryption"],"duration":0,"failureMessages":[""],"fullName":"Encryption System Tests Field Encryption should validate field formats","status":"failed","title":"should validate field formats"},{"ancestorTitles":["Encryption System Tests","Field Encryption"],"duration":0,"failureMessages":[""],"fullName":"Encryption System Tests Field Encryption should handle empty and null values gracefully","status":"failed","title":"should handle empty and null values gracefully"},{"ancestorTitles":["Encryption System Tests","Searchable Encryption"],"duration":0,"failureMessages":[""],"fullName":"Encryption System Tests Searchable Encryption should index fields for search","status":"failed","title":"should index fields for search"},{"ancestorTitles":["Encryption System Tests","Searchable Encryption"],"duration":0,"failureMessages":[""],"fullName":"Encryption System Tests Searchable Encryption should perform partial search","status":"failed","title":"should perform partial search"},{"ancestorTitles":["Encryption System Tests","Searchable Encryption"],"duration":0,"failureMessages":[""],"fullName":"Encryption System Tests Searchable Encryption should check bloom filter for privacy-preserving search","status":"failed","title":"should check bloom filter for privacy-preserving search"},{"ancestorTitles":["Encryption System Tests","Searchable Encryption"],"duration":0,"failureMessages":[""],"fullName":"Encryption System Tests Searchable Encryption should clear search caches","status":"failed","title":"should clear search caches"},{"ancestorTitles":["Encryption System Tests","Encryption Middleware"],"duration":0,"failureMessages":[""],"fullName":"Encryption System Tests Encryption Middleware should validate configuration","status":"failed","title":"should validate configuration"},{"ancestorTitles":["Encryption System Tests","Encryption Middleware"],"duration":0,"failureMessages":[""],"fullName":"Encryption System Tests Encryption Middleware should identify encrypted fields","status":"failed","title":"should identify encrypted fields"},{"ancestorTitles":["Encryption System Tests","Encryption Middleware"],"duration":0,"failureMessages":[""],"fullName":"Encryption System Tests Encryption Middleware should get encrypted fields for model","status":"failed","title":"should get encrypted fields for model"},{"ancestorTitles":["Encryption System Tests","Encryption Middleware"],"duration":0,"failureMessages":[""],"fullName":"Encryption System Tests Encryption Middleware should generate search conditions for encrypted fields","status":"failed","title":"should generate search conditions for encrypted fields"},{"ancestorTitles":["Encryption System Tests","Key Rotation"],"duration":0,"failureMessages":[""],"fullName":"Encryption System Tests Key Rotation should schedule key rotation","status":"failed","title":"should schedule key rotation"},{"ancestorTitles":["Encryption System Tests","Key Rotation"],"duration":0,"failureMessages":[""],"fullName":"Encryption System Tests Key Rotation should handle emergency key rotation","status":"failed","title":"should handle emergency key rotation"},{"ancestorTitles":["Encryption System Tests","Key Rotation"],"duration":0,"failureMessages":[""],"fullName":"Encryption System Tests Key Rotation should get rotation statistics","status":"failed","title":"should get rotation statistics"},{"ancestorTitles":["Encryption System Tests","Key Rotation"],"duration":0,"failureMessages":[""],"fullName":"Encryption System Tests Key Rotation should manage rotation policies","status":"failed","title":"should manage rotation policies"},{"ancestorTitles":["Encryption System Tests","Audit Logging"],"duration":0,"failureMessages":[""],"fullName":"Encryption System Tests Audit Logging should log encryption events","status":"failed","title":"should log encryption events"},{"ancestorTitles":["Encryption System Tests","Audit Logging"],"duration":0,"failureMessages":[""],"fullName":"Encryption System Tests Audit Logging should generate audit summary","status":"failed","title":"should generate audit summary"},{"ancestorTitles":["Encryption System Tests","Audit Logging"],"duration":0,"failureMessages":[""],"fullName":"Encryption System Tests Audit Logging should generate compliance reports","status":"failed","title":"should generate compliance reports"},{"ancestorTitles":["Encryption System Tests","Audit Logging"],"duration":0,"failureMessages":[""],"fullName":"Encryption System Tests Audit Logging should verify audit log integrity","status":"failed","title":"should verify audit log integrity"},{"ancestorTitles":["Encryption System Tests","Performance Optimization"],"duration":0,"failureMessages":[""],"fullName":"Encryption System Tests Performance Optimization should cache encryption operations","status":"failed","title":"should cache encryption operations"},{"ancestorTitles":["Encryption System Tests","Performance Optimization"],"duration":0,"failureMessages":[""],"fullName":"Encryption System Tests Performance Optimization should perform batch operations efficiently","status":"failed","title":"should perform batch operations efficiently"},{"ancestorTitles":["Encryption System Tests","Performance Optimization"],"duration":0,"failureMessages":[""],"fullName":"Encryption System Tests Performance Optimization should run performance benchmarks","status":"failed","title":"should run performance benchmarks"},{"ancestorTitles":["Encryption System Tests","Performance Optimization"],"duration":0,"failureMessages":[""],"fullName":"Encryption System Tests Performance Optimization should provide cache statistics","status":"failed","title":"should provide cache statistics"},{"ancestorTitles":["Encryption System Tests","Performance Optimization"],"duration":0,"failureMessages":[""],"fullName":"Encryption System Tests Performance Optimization should clear caches","status":"failed","title":"should clear caches"},{"ancestorTitles":["Encryption System Tests","Data Migration"],"duration":0,"failureMessages":[""],"fullName":"Encryption System Tests Data Migration should create migration plan","status":"failed","title":"should create migration plan"},{"ancestorTitles":["Encryption System Tests","Data Migration"],"duration":0,"failureMessages":[""],"fullName":"Encryption System Tests Data Migration should start migration in dry-run mode","status":"failed","title":"should start migration in dry-run mode"},{"ancestorTitles":["Encryption System Tests","Data Migration"],"duration":1,"failureMessages":[""],"fullName":"Encryption System Tests Data Migration should get active migrations","status":"failed","title":"should get active migrations"},{"ancestorTitles":["Encryption System Tests","Security Tests"],"duration":0,"failureMessages":[""],"fullName":"Encryption System Tests Security Tests should use different keys for different organizations","status":"failed","title":"should use different keys for different organizations"},{"ancestorTitles":["Encryption System Tests","Security Tests"],"duration":0,"failureMessages":[""],"fullName":"Encryption System Tests Security Tests should not decrypt with wrong organization key","status":"failed","title":"should not decrypt with wrong organization key"},{"ancestorTitles":["Encryption System Tests","Security Tests"],"duration":0,"failureMessages":[""],"fullName":"Encryption System Tests Security Tests should handle tampered encrypted data","status":"failed","title":"should handle tampered encrypted data"},{"ancestorTitles":["Encryption System Tests","Security Tests"],"duration":0,"failureMessages":[""],"fullName":"Encryption System Tests Security Tests should generate cryptographically secure random values","status":"failed","title":"should generate cryptographically secure random values"},{"ancestorTitles":["Encryption System Tests","Security Tests"],"duration":0,"failureMessages":[""],"fullName":"Encryption System Tests Security Tests should securely delete keys","status":"failed","title":"should securely delete keys"},{"ancestorTitles":["Encryption System Tests","Error Handling"],"duration":0,"failureMessages":[""],"fullName":"Encryption System Tests Error Handling should handle invalid encryption options gracefully","status":"failed","title":"should handle invalid encryption options gracefully"},{"ancestorTitles":["Encryption System Tests","Error Handling"],"duration":0,"failureMessages":[""],"fullName":"Encryption System Tests Error Handling should handle corrupted encrypted data","status":"failed","title":"should handle corrupted encrypted data"},{"ancestorTitles":["Encryption System Tests","Error Handling"],"duration":0,"failureMessages":[""],"fullName":"Encryption System Tests Error Handling should validate key parameters","status":"failed","title":"should validate key parameters"},{"ancestorTitles":["Encryption System Tests","Integration Tests"],"duration":0,"failureMessages":[""],"fullName":"Encryption System Tests Integration Tests should work end-to-end with Prisma middleware","status":"failed","title":"should work end-to-end with Prisma middleware"},{"ancestorTitles":["Encryption System Tests","Integration Tests"],"duration":0,"failureMessages":[""],"fullName":"Encryption System Tests Integration Tests should maintain data integrity across operations","status":"failed","title":"should maintain data integrity across operations"},{"ancestorTitles":["Encryption System Tests","Integration Tests"],"duration":0,"failureMessages":[""],"fullName":"Encryption System Tests Integration Tests should handle concurrent operations safely","status":"failed","title":"should handle concurrent operations safely"},{"ancestorTitles":["Performance and Stress Tests"],"duration":0,"failureMessages":[""],"fullName":"Performance and Stress Tests should handle large data encryption efficiently","status":"failed","title":"should handle large data encryption efficiently"},{"ancestorTitles":["Performance and Stress Tests"],"duration":0,"failureMessages":[""],"fullName":"Performance and Stress Tests should handle high volume of operations","status":"failed","title":"should handle high volume of operations"},{"ancestorTitles":["Performance and Stress Tests"],"duration":0,"failureMessages":[""],"fullName":"Performance and Stress Tests should maintain memory efficiency","status":"failed","title":"should maintain memory efficiency"}]},{"numFailingTests":20,"numPassingTests":0,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":1759565232419,"runtime":649,"slow":false,"start":1759565231770},"testFilePath":"/home/eric/Projects/accounting-api/tests/integration/performance-security.test.ts","failureMessage":"  ● Performance and Security Integration Tests › Rate Limiting and DDoS Protection › should enforce rate limits on login attempts\n\n\n\n\n\n  ● Performance and Security Integration Tests › Rate Limiting and DDoS Protection › should enforce API rate limits per user\n\n\n\n\n\n  ● Performance and Security Integration Tests › Rate Limiting and DDoS Protection › should handle concurrent user sessions efficiently\n\n\n\n\n\n  ● Performance and Security Integration Tests › Input Validation and SQL Injection Prevention › should prevent SQL injection in search parameters\n\n\n\n\n\n  ● Performance and Security Integration Tests › Input Validation and SQL Injection Prevention › should sanitize and validate input data\n\n\n\n\n\n  ● Performance and Security Integration Tests › Input Validation and SQL Injection Prevention › should validate email formats and prevent injection\n\n\n\n\n\n  ● Performance and Security Integration Tests › Input Validation and SQL Injection Prevention › should prevent path traversal attacks\n\n\n\n\n\n  ● Performance and Security Integration Tests › Authentication Security › should prevent brute force attacks on passwords\n\n\n\n\n\n  ● Performance and Security Integration Tests › Authentication Security › should enforce strong password requirements\n\n\n\n\n\n  ● Performance and Security Integration Tests › Authentication Security › should validate JWT tokens properly\n\n\n\n\n\n  ● Performance and Security Integration Tests › Data Privacy and Encryption › should encrypt sensitive customer data\n\n\n\n\n\n  ● Performance and Security Integration Tests › Data Privacy and Encryption › should mask sensitive data in logs and responses\n\n\n\n\n\n  ● Performance and Security Integration Tests › Performance Benchmarking › should handle high-volume customer operations efficiently\n\n\n\n\n\n  ● Performance and Security Integration Tests › Performance Benchmarking › should maintain query performance with pagination\n\n\n\n\n\n  ● Performance and Security Integration Tests › Performance Benchmarking › should handle complex search queries efficiently\n\n\n\n\n\n  ● Performance and Security Integration Tests › Performance Benchmarking › should handle memory usage efficiently during large operations\n\n\n\n\n\n  ● Performance and Security Integration Tests › Security Headers and CORS › should include proper security headers\n\n\n\n\n\n  ● Performance and Security Integration Tests › Security Headers and CORS › should handle CORS properly\n\n\n\n\n\n  ● Performance and Security Integration Tests › Resource Usage and Limits › should enforce request size limits\n\n\n\n\n\n  ● Performance and Security Integration Tests › Resource Usage and Limits › should handle file upload size limits\n\n\n\n\n","testResults":[{"ancestorTitles":["Performance and Security Integration Tests","Rate Limiting and DDoS Protection"],"duration":0,"failureMessages":[""],"fullName":"Performance and Security Integration Tests Rate Limiting and DDoS Protection should enforce rate limits on login attempts","status":"failed","title":"should enforce rate limits on login attempts"},{"ancestorTitles":["Performance and Security Integration Tests","Rate Limiting and DDoS Protection"],"duration":0,"failureMessages":[""],"fullName":"Performance and Security Integration Tests Rate Limiting and DDoS Protection should enforce API rate limits per user","status":"failed","title":"should enforce API rate limits per user"},{"ancestorTitles":["Performance and Security Integration Tests","Rate Limiting and DDoS Protection"],"duration":0,"failureMessages":[""],"fullName":"Performance and Security Integration Tests Rate Limiting and DDoS Protection should handle concurrent user sessions efficiently","status":"failed","title":"should handle concurrent user sessions efficiently"},{"ancestorTitles":["Performance and Security Integration Tests","Input Validation and SQL Injection Prevention"],"duration":0,"failureMessages":[""],"fullName":"Performance and Security Integration Tests Input Validation and SQL Injection Prevention should prevent SQL injection in search parameters","status":"failed","title":"should prevent SQL injection in search parameters"},{"ancestorTitles":["Performance and Security Integration Tests","Input Validation and SQL Injection Prevention"],"duration":0,"failureMessages":[""],"fullName":"Performance and Security Integration Tests Input Validation and SQL Injection Prevention should sanitize and validate input data","status":"failed","title":"should sanitize and validate input data"},{"ancestorTitles":["Performance and Security Integration Tests","Input Validation and SQL Injection Prevention"],"duration":1,"failureMessages":[""],"fullName":"Performance and Security Integration Tests Input Validation and SQL Injection Prevention should validate email formats and prevent injection","status":"failed","title":"should validate email formats and prevent injection"},{"ancestorTitles":["Performance and Security Integration Tests","Input Validation and SQL Injection Prevention"],"duration":0,"failureMessages":[""],"fullName":"Performance and Security Integration Tests Input Validation and SQL Injection Prevention should prevent path traversal attacks","status":"failed","title":"should prevent path traversal attacks"},{"ancestorTitles":["Performance and Security Integration Tests","Authentication Security"],"duration":0,"failureMessages":[""],"fullName":"Performance and Security Integration Tests Authentication Security should prevent brute force attacks on passwords","status":"failed","title":"should prevent brute force attacks on passwords"},{"ancestorTitles":["Performance and Security Integration Tests","Authentication Security"],"duration":0,"failureMessages":[""],"fullName":"Performance and Security Integration Tests Authentication Security should enforce strong password requirements","status":"failed","title":"should enforce strong password requirements"},{"ancestorTitles":["Performance and Security Integration Tests","Authentication Security"],"duration":0,"failureMessages":[""],"fullName":"Performance and Security Integration Tests Authentication Security should validate JWT tokens properly","status":"failed","title":"should validate JWT tokens properly"},{"ancestorTitles":["Performance and Security Integration Tests","Data Privacy and Encryption"],"duration":0,"failureMessages":[""],"fullName":"Performance and Security Integration Tests Data Privacy and Encryption should encrypt sensitive customer data","status":"failed","title":"should encrypt sensitive customer data"},{"ancestorTitles":["Performance and Security Integration Tests","Data Privacy and Encryption"],"duration":0,"failureMessages":[""],"fullName":"Performance and Security Integration Tests Data Privacy and Encryption should mask sensitive data in logs and responses","status":"failed","title":"should mask sensitive data in logs and responses"},{"ancestorTitles":["Performance and Security Integration Tests","Performance Benchmarking"],"duration":0,"failureMessages":[""],"fullName":"Performance and Security Integration Tests Performance Benchmarking should handle high-volume customer operations efficiently","status":"failed","title":"should handle high-volume customer operations efficiently"},{"ancestorTitles":["Performance and Security Integration Tests","Performance Benchmarking"],"duration":0,"failureMessages":[""],"fullName":"Performance and Security Integration Tests Performance Benchmarking should maintain query performance with pagination","status":"failed","title":"should maintain query performance with pagination"},{"ancestorTitles":["Performance and Security Integration Tests","Performance Benchmarking"],"duration":0,"failureMessages":[""],"fullName":"Performance and Security Integration Tests Performance Benchmarking should handle complex search queries efficiently","status":"failed","title":"should handle complex search queries efficiently"},{"ancestorTitles":["Performance and Security Integration Tests","Performance Benchmarking"],"duration":0,"failureMessages":[""],"fullName":"Performance and Security Integration Tests Performance Benchmarking should handle memory usage efficiently during large operations","status":"failed","title":"should handle memory usage efficiently during large operations"},{"ancestorTitles":["Performance and Security Integration Tests","Security Headers and CORS"],"duration":0,"failureMessages":[""],"fullName":"Performance and Security Integration Tests Security Headers and CORS should include proper security headers","status":"failed","title":"should include proper security headers"},{"ancestorTitles":["Performance and Security Integration Tests","Security Headers and CORS"],"duration":0,"failureMessages":[""],"fullName":"Performance and Security Integration Tests Security Headers and CORS should handle CORS properly","status":"failed","title":"should handle CORS properly"},{"ancestorTitles":["Performance and Security Integration Tests","Resource Usage and Limits"],"duration":0,"failureMessages":[""],"fullName":"Performance and Security Integration Tests Resource Usage and Limits should enforce request size limits","status":"failed","title":"should enforce request size limits"},{"ancestorTitles":["Performance and Security Integration Tests","Resource Usage and Limits"],"duration":0,"failureMessages":[""],"fullName":"Performance and Security Integration Tests Resource Usage and Limits should handle file upload size limits","status":"failed","title":"should handle file upload size limits"}]},{"numFailingTests":4,"numPassingTests":0,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":1759565233068,"runtime":647,"slow":false,"start":1759565232421},"testFilePath":"/home/eric/Projects/accounting-api/tests/integration/customer-lifecycle.test.ts","failureMessage":"  ● Customer Lifecycle Integration Tests › Complete Customer Journey: Quote → Invoice → Payment → Project › should complete full customer lifecycle workflow\n\n\n\n\n\n  ● Customer Lifecycle Integration Tests › Customer Onboarding Workflow › should handle complete customer onboarding process\n\n\n\n\n\n  ● Customer Lifecycle Integration Tests › Quote Management Workflow › should handle quote lifecycle with revisions and approvals\n\n\n\n\n\n  ● Customer Lifecycle Integration Tests › Multi-Project Customer Management › should handle customer with multiple concurrent projects\n\n\n\n\n","testResults":[{"ancestorTitles":["Customer Lifecycle Integration Tests","Complete Customer Journey: Quote → Invoice → Payment → Project"],"duration":0,"failureMessages":[""],"fullName":"Customer Lifecycle Integration Tests Complete Customer Journey: Quote → Invoice → Payment → Project should complete full customer lifecycle workflow","status":"failed","title":"should complete full customer lifecycle workflow"},{"ancestorTitles":["Customer Lifecycle Integration Tests","Customer Onboarding Workflow"],"duration":0,"failureMessages":[""],"fullName":"Customer Lifecycle Integration Tests Customer Onboarding Workflow should handle complete customer onboarding process","status":"failed","title":"should handle complete customer onboarding process"},{"ancestorTitles":["Customer Lifecycle Integration Tests","Quote Management Workflow"],"duration":0,"failureMessages":[""],"fullName":"Customer Lifecycle Integration Tests Quote Management Workflow should handle quote lifecycle with revisions and approvals","status":"failed","title":"should handle quote lifecycle with revisions and approvals"},{"ancestorTitles":["Customer Lifecycle Integration Tests","Multi-Project Customer Management"],"duration":0,"failureMessages":[""],"fullName":"Customer Lifecycle Integration Tests Multi-Project Customer Management should handle customer with multiple concurrent projects","status":"failed","title":"should handle customer with multiple concurrent projects"}]},{"numFailingTests":17,"numPassingTests":0,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":1759565233670,"runtime":600,"slow":false,"start":1759565233070},"testFilePath":"/home/eric/Projects/accounting-api/tests/integration/encryption-service.test.ts","failureMessage":"  ● Encryption Service Integration Tests › Field-level Encryption › should encrypt and decrypt text data\n\n\n\n\n\n  ● Encryption Service Integration Tests › Field-level Encryption › should encrypt and decrypt text data\n\n    ENOENT: no such file or directory, open '/home/eric/Projects/accounting-api/tests/fixtures/test-document.txt'\n\n      45 |     // Prepare test file\n      46 |     testFilePath = path.join(__dirname, '../fixtures/test-document.txt');\n    > 47 |     testFileBuffer = await fs.readFile(testFilePath);\n         |                      ^\n      48 |   });\n      49 |\n      50 |   afterAll(async () => {\n\n      at Object.<anonymous> (tests/integration/encryption-service.test.ts:47:22)\n\n  ● Encryption Service Integration Tests › Field-level Encryption › should encrypt and decrypt JSON data\n\n\n\n\n\n  ● Encryption Service Integration Tests › Field-level Encryption › should encrypt and decrypt JSON data\n\n    ENOENT: no such file or directory, open '/home/eric/Projects/accounting-api/tests/fixtures/test-document.txt'\n\n      45 |     // Prepare test file\n      46 |     testFilePath = path.join(__dirname, '../fixtures/test-document.txt');\n    > 47 |     testFileBuffer = await fs.readFile(testFilePath);\n         |                      ^\n      48 |   });\n      49 |\n      50 |   afterAll(async () => {\n\n      at Object.<anonymous> (tests/integration/encryption-service.test.ts:47:22)\n\n  ● Encryption Service Integration Tests › Field-level Encryption › should encrypt and decrypt buffer data\n\n\n\n\n\n  ● Encryption Service Integration Tests › Field-level Encryption › should encrypt and decrypt buffer data\n\n    ENOENT: no such file or directory, open '/home/eric/Projects/accounting-api/tests/fixtures/test-document.txt'\n\n      45 |     // Prepare test file\n      46 |     testFilePath = path.join(__dirname, '../fixtures/test-document.txt');\n    > 47 |     testFileBuffer = await fs.readFile(testFilePath);\n         |                      ^\n      48 |   });\n      49 |\n      50 |   afterAll(async () => {\n\n      at Object.<anonymous> (tests/integration/encryption-service.test.ts:47:22)\n\n  ● Encryption Service Integration Tests › Field-level Encryption › should handle searchable encryption\n\n\n\n\n\n  ● Encryption Service Integration Tests › Field-level Encryption › should handle searchable encryption\n\n    ENOENT: no such file or directory, open '/home/eric/Projects/accounting-api/tests/fixtures/test-document.txt'\n\n      45 |     // Prepare test file\n      46 |     testFilePath = path.join(__dirname, '../fixtures/test-document.txt');\n    > 47 |     testFileBuffer = await fs.readFile(testFilePath);\n         |                      ^\n      48 |   });\n      49 |\n      50 |   afterAll(async () => {\n\n      at Object.<anonymous> (tests/integration/encryption-service.test.ts:47:22)\n\n  ● Encryption Service Integration Tests › Field-level Encryption › should enforce organization isolation\n\n\n\n\n\n  ● Encryption Service Integration Tests › Field-level Encryption › should enforce organization isolation\n\n    ENOENT: no such file or directory, open '/home/eric/Projects/accounting-api/tests/fixtures/test-document.txt'\n\n      45 |     // Prepare test file\n      46 |     testFilePath = path.join(__dirname, '../fixtures/test-document.txt');\n    > 47 |     testFileBuffer = await fs.readFile(testFilePath);\n         |                      ^\n      48 |   });\n      49 |\n      50 |   afterAll(async () => {\n\n      at Object.<anonymous> (tests/integration/encryption-service.test.ts:47:22)\n\n  ● Encryption Service Integration Tests › Document Encryption › should generate document encryption keys\n\n\n\n\n\n  ● Encryption Service Integration Tests › Document Encryption › should generate document encryption keys\n\n    ENOENT: no such file or directory, open '/home/eric/Projects/accounting-api/tests/fixtures/test-document.txt'\n\n      45 |     // Prepare test file\n      46 |     testFilePath = path.join(__dirname, '../fixtures/test-document.txt');\n    > 47 |     testFileBuffer = await fs.readFile(testFilePath);\n         |                      ^\n      48 |   });\n      49 |\n      50 |   afterAll(async () => {\n\n      at Object.<anonymous> (tests/integration/encryption-service.test.ts:47:22)\n\n  ● Encryption Service Integration Tests › Document Encryption › should encrypt and decrypt document content\n\n\n\n\n\n  ● Encryption Service Integration Tests › Document Encryption › should encrypt and decrypt document content\n\n    ENOENT: no such file or directory, open '/home/eric/Projects/accounting-api/tests/fixtures/test-document.txt'\n\n      45 |     // Prepare test file\n      46 |     testFilePath = path.join(__dirname, '../fixtures/test-document.txt');\n    > 47 |     testFileBuffer = await fs.readFile(testFilePath);\n         |                      ^\n      48 |   });\n      49 |\n      50 |   afterAll(async () => {\n\n      at Object.<anonymous> (tests/integration/encryption-service.test.ts:47:22)\n\n  ● Encryption Service Integration Tests › Document Encryption › should handle large binary files\n\n\n\n\n\n  ● Encryption Service Integration Tests › Document Encryption › should handle large binary files\n\n    ENOENT: no such file or directory, open '/home/eric/Projects/accounting-api/tests/fixtures/test-document.txt'\n\n      45 |     // Prepare test file\n      46 |     testFilePath = path.join(__dirname, '../fixtures/test-document.txt');\n    > 47 |     testFileBuffer = await fs.readFile(testFilePath);\n         |                      ^\n      48 |   });\n      49 |\n      50 |   afterAll(async () => {\n\n      at Object.<anonymous> (tests/integration/encryption-service.test.ts:47:22)\n\n  ● Encryption Service Integration Tests › Document Encryption › should prevent cross-document decryption\n\n\n\n\n\n  ● Encryption Service Integration Tests › Document Encryption › should prevent cross-document decryption\n\n    ENOENT: no such file or directory, open '/home/eric/Projects/accounting-api/tests/fixtures/test-document.txt'\n\n      45 |     // Prepare test file\n      46 |     testFilePath = path.join(__dirname, '../fixtures/test-document.txt');\n    > 47 |     testFileBuffer = await fs.readFile(testFilePath);\n         |                      ^\n      48 |   });\n      49 |\n      50 |   afterAll(async () => {\n\n      at Object.<anonymous> (tests/integration/encryption-service.test.ts:47:22)\n\n  ● Encryption Service Integration Tests › Key Management › should handle key versioning\n\n\n\n\n\n  ● Encryption Service Integration Tests › Key Management › should handle key versioning\n\n    ENOENT: no such file or directory, open '/home/eric/Projects/accounting-api/tests/fixtures/test-document.txt'\n\n      45 |     // Prepare test file\n      46 |     testFilePath = path.join(__dirname, '../fixtures/test-document.txt');\n    > 47 |     testFileBuffer = await fs.readFile(testFilePath);\n         |                      ^\n      48 |   });\n      49 |\n      50 |   afterAll(async () => {\n\n      at Object.<anonymous> (tests/integration/encryption-service.test.ts:47:22)\n\n  ● Encryption Service Integration Tests › Key Management › should validate key material security\n\n\n\n\n\n  ● Encryption Service Integration Tests › Key Management › should validate key material security\n\n    ENOENT: no such file or directory, open '/home/eric/Projects/accounting-api/tests/fixtures/test-document.txt'\n\n      45 |     // Prepare test file\n      46 |     testFilePath = path.join(__dirname, '../fixtures/test-document.txt');\n    > 47 |     testFileBuffer = await fs.readFile(testFilePath);\n         |                      ^\n      48 |   });\n      49 |\n      50 |   afterAll(async () => {\n\n      at Object.<anonymous> (tests/integration/encryption-service.test.ts:47:22)\n\n  ● Encryption Service Integration Tests › Error Handling and Edge Cases › should handle empty data gracefully\n\n\n\n\n\n  ● Encryption Service Integration Tests › Error Handling and Edge Cases › should handle empty data gracefully\n\n    ENOENT: no such file or directory, open '/home/eric/Projects/accounting-api/tests/fixtures/test-document.txt'\n\n      45 |     // Prepare test file\n      46 |     testFilePath = path.join(__dirname, '../fixtures/test-document.txt');\n    > 47 |     testFileBuffer = await fs.readFile(testFilePath);\n         |                      ^\n      48 |   });\n      49 |\n      50 |   afterAll(async () => {\n\n      at Object.<anonymous> (tests/integration/encryption-service.test.ts:47:22)\n\n  ● Encryption Service Integration Tests › Error Handling and Edge Cases › should reject invalid ciphertext\n\n\n\n\n\n  ● Encryption Service Integration Tests › Error Handling and Edge Cases › should reject invalid ciphertext\n\n    ENOENT: no such file or directory, open '/home/eric/Projects/accounting-api/tests/fixtures/test-document.txt'\n\n      45 |     // Prepare test file\n      46 |     testFilePath = path.join(__dirname, '../fixtures/test-document.txt');\n    > 47 |     testFileBuffer = await fs.readFile(testFilePath);\n         |                      ^\n      48 |   });\n      49 |\n      50 |   afterAll(async () => {\n\n      at Object.<anonymous> (tests/integration/encryption-service.test.ts:47:22)\n\n  ● Encryption Service Integration Tests › Error Handling and Edge Cases › should reject tampered ciphertext\n\n\n\n\n\n  ● Encryption Service Integration Tests › Error Handling and Edge Cases › should reject tampered ciphertext\n\n    ENOENT: no such file or directory, open '/home/eric/Projects/accounting-api/tests/fixtures/test-document.txt'\n\n      45 |     // Prepare test file\n      46 |     testFilePath = path.join(__dirname, '../fixtures/test-document.txt');\n    > 47 |     testFileBuffer = await fs.readFile(testFilePath);\n         |                      ^\n      48 |   });\n      49 |\n      50 |   afterAll(async () => {\n\n      at Object.<anonymous> (tests/integration/encryption-service.test.ts:47:22)\n\n  ● Encryption Service Integration Tests › Error Handling and Edge Cases › should handle special characters and unicode\n\n\n\n\n\n  ● Encryption Service Integration Tests › Error Handling and Edge Cases › should handle special characters and unicode\n\n    ENOENT: no such file or directory, open '/home/eric/Projects/accounting-api/tests/fixtures/test-document.txt'\n\n      45 |     // Prepare test file\n      46 |     testFilePath = path.join(__dirname, '../fixtures/test-document.txt');\n    > 47 |     testFileBuffer = await fs.readFile(testFilePath);\n         |                      ^\n      48 |   });\n      49 |\n      50 |   afterAll(async () => {\n\n      at Object.<anonymous> (tests/integration/encryption-service.test.ts:47:22)\n\n  ● Encryption Service Integration Tests › Performance and Concurrency › should handle concurrent encryption operations\n\n\n\n\n\n  ● Encryption Service Integration Tests › Performance and Concurrency › should handle concurrent encryption operations\n\n    ENOENT: no such file or directory, open '/home/eric/Projects/accounting-api/tests/fixtures/test-document.txt'\n\n      45 |     // Prepare test file\n      46 |     testFilePath = path.join(__dirname, '../fixtures/test-document.txt');\n    > 47 |     testFileBuffer = await fs.readFile(testFilePath);\n         |                      ^\n      48 |   });\n      49 |\n      50 |   afterAll(async () => {\n\n      at Object.<anonymous> (tests/integration/encryption-service.test.ts:47:22)\n\n  ● Encryption Service Integration Tests › Performance and Concurrency › should maintain performance for bulk operations\n\n\n\n\n\n  ● Encryption Service Integration Tests › Performance and Concurrency › should maintain performance for bulk operations\n\n    ENOENT: no such file or directory, open '/home/eric/Projects/accounting-api/tests/fixtures/test-document.txt'\n\n      45 |     // Prepare test file\n      46 |     testFilePath = path.join(__dirname, '../fixtures/test-document.txt');\n    > 47 |     testFileBuffer = await fs.readFile(testFilePath);\n         |                      ^\n      48 |   });\n      49 |\n      50 |   afterAll(async () => {\n\n      at Object.<anonymous> (tests/integration/encryption-service.test.ts:47:22)\n","testResults":[{"ancestorTitles":["Encryption Service Integration Tests","Field-level Encryption"],"duration":0,"failureMessages":["","Error: ENOENT: no such file or directory, open '/home/eric/Projects/accounting-api/tests/fixtures/test-document.txt'\n    at open (node:internal/fs/promises:641:25)\n    at Object.readFile (node:internal/fs/promises:1245:14)\n    at Object.<anonymous> (/home/eric/Projects/accounting-api/tests/integration/encryption-service.test.ts:47:22)"],"fullName":"Encryption Service Integration Tests Field-level Encryption should encrypt and decrypt text data","status":"failed","title":"should encrypt and decrypt text data"},{"ancestorTitles":["Encryption Service Integration Tests","Field-level Encryption"],"duration":0,"failureMessages":["","Error: ENOENT: no such file or directory, open '/home/eric/Projects/accounting-api/tests/fixtures/test-document.txt'\n    at open (node:internal/fs/promises:641:25)\n    at Object.readFile (node:internal/fs/promises:1245:14)\n    at Object.<anonymous> (/home/eric/Projects/accounting-api/tests/integration/encryption-service.test.ts:47:22)"],"fullName":"Encryption Service Integration Tests Field-level Encryption should encrypt and decrypt JSON data","status":"failed","title":"should encrypt and decrypt JSON data"},{"ancestorTitles":["Encryption Service Integration Tests","Field-level Encryption"],"duration":0,"failureMessages":["","Error: ENOENT: no such file or directory, open '/home/eric/Projects/accounting-api/tests/fixtures/test-document.txt'\n    at open (node:internal/fs/promises:641:25)\n    at Object.readFile (node:internal/fs/promises:1245:14)\n    at Object.<anonymous> (/home/eric/Projects/accounting-api/tests/integration/encryption-service.test.ts:47:22)"],"fullName":"Encryption Service Integration Tests Field-level Encryption should encrypt and decrypt buffer data","status":"failed","title":"should encrypt and decrypt buffer data"},{"ancestorTitles":["Encryption Service Integration Tests","Field-level Encryption"],"duration":0,"failureMessages":["","Error: ENOENT: no such file or directory, open '/home/eric/Projects/accounting-api/tests/fixtures/test-document.txt'\n    at open (node:internal/fs/promises:641:25)\n    at Object.readFile (node:internal/fs/promises:1245:14)\n    at Object.<anonymous> (/home/eric/Projects/accounting-api/tests/integration/encryption-service.test.ts:47:22)"],"fullName":"Encryption Service Integration Tests Field-level Encryption should handle searchable encryption","status":"failed","title":"should handle searchable encryption"},{"ancestorTitles":["Encryption Service Integration Tests","Field-level Encryption"],"duration":0,"failureMessages":["","Error: ENOENT: no such file or directory, open '/home/eric/Projects/accounting-api/tests/fixtures/test-document.txt'\n    at open (node:internal/fs/promises:641:25)\n    at Object.readFile (node:internal/fs/promises:1245:14)\n    at Object.<anonymous> (/home/eric/Projects/accounting-api/tests/integration/encryption-service.test.ts:47:22)"],"fullName":"Encryption Service Integration Tests Field-level Encryption should enforce organization isolation","status":"failed","title":"should enforce organization isolation"},{"ancestorTitles":["Encryption Service Integration Tests","Document Encryption"],"duration":0,"failureMessages":["","Error: ENOENT: no such file or directory, open '/home/eric/Projects/accounting-api/tests/fixtures/test-document.txt'\n    at open (node:internal/fs/promises:641:25)\n    at Object.readFile (node:internal/fs/promises:1245:14)\n    at Object.<anonymous> (/home/eric/Projects/accounting-api/tests/integration/encryption-service.test.ts:47:22)"],"fullName":"Encryption Service Integration Tests Document Encryption should generate document encryption keys","status":"failed","title":"should generate document encryption keys"},{"ancestorTitles":["Encryption Service Integration Tests","Document Encryption"],"duration":0,"failureMessages":["","Error: ENOENT: no such file or directory, open '/home/eric/Projects/accounting-api/tests/fixtures/test-document.txt'\n    at open (node:internal/fs/promises:641:25)\n    at Object.readFile (node:internal/fs/promises:1245:14)\n    at Object.<anonymous> (/home/eric/Projects/accounting-api/tests/integration/encryption-service.test.ts:47:22)"],"fullName":"Encryption Service Integration Tests Document Encryption should encrypt and decrypt document content","status":"failed","title":"should encrypt and decrypt document content"},{"ancestorTitles":["Encryption Service Integration Tests","Document Encryption"],"duration":0,"failureMessages":["","Error: ENOENT: no such file or directory, open '/home/eric/Projects/accounting-api/tests/fixtures/test-document.txt'\n    at open (node:internal/fs/promises:641:25)\n    at Object.readFile (node:internal/fs/promises:1245:14)\n    at Object.<anonymous> (/home/eric/Projects/accounting-api/tests/integration/encryption-service.test.ts:47:22)"],"fullName":"Encryption Service Integration Tests Document Encryption should handle large binary files","status":"failed","title":"should handle large binary files"},{"ancestorTitles":["Encryption Service Integration Tests","Document Encryption"],"duration":0,"failureMessages":["","Error: ENOENT: no such file or directory, open '/home/eric/Projects/accounting-api/tests/fixtures/test-document.txt'\n    at open (node:internal/fs/promises:641:25)\n    at Object.readFile (node:internal/fs/promises:1245:14)\n    at Object.<anonymous> (/home/eric/Projects/accounting-api/tests/integration/encryption-service.test.ts:47:22)"],"fullName":"Encryption Service Integration Tests Document Encryption should prevent cross-document decryption","status":"failed","title":"should prevent cross-document decryption"},{"ancestorTitles":["Encryption Service Integration Tests","Key Management"],"duration":0,"failureMessages":["","Error: ENOENT: no such file or directory, open '/home/eric/Projects/accounting-api/tests/fixtures/test-document.txt'\n    at open (node:internal/fs/promises:641:25)\n    at Object.readFile (node:internal/fs/promises:1245:14)\n    at Object.<anonymous> (/home/eric/Projects/accounting-api/tests/integration/encryption-service.test.ts:47:22)"],"fullName":"Encryption Service Integration Tests Key Management should handle key versioning","status":"failed","title":"should handle key versioning"},{"ancestorTitles":["Encryption Service Integration Tests","Key Management"],"duration":0,"failureMessages":["","Error: ENOENT: no such file or directory, open '/home/eric/Projects/accounting-api/tests/fixtures/test-document.txt'\n    at open (node:internal/fs/promises:641:25)\n    at Object.readFile (node:internal/fs/promises:1245:14)\n    at Object.<anonymous> (/home/eric/Projects/accounting-api/tests/integration/encryption-service.test.ts:47:22)"],"fullName":"Encryption Service Integration Tests Key Management should validate key material security","status":"failed","title":"should validate key material security"},{"ancestorTitles":["Encryption Service Integration Tests","Error Handling and Edge Cases"],"duration":0,"failureMessages":["","Error: ENOENT: no such file or directory, open '/home/eric/Projects/accounting-api/tests/fixtures/test-document.txt'\n    at open (node:internal/fs/promises:641:25)\n    at Object.readFile (node:internal/fs/promises:1245:14)\n    at Object.<anonymous> (/home/eric/Projects/accounting-api/tests/integration/encryption-service.test.ts:47:22)"],"fullName":"Encryption Service Integration Tests Error Handling and Edge Cases should handle empty data gracefully","status":"failed","title":"should handle empty data gracefully"},{"ancestorTitles":["Encryption Service Integration Tests","Error Handling and Edge Cases"],"duration":0,"failureMessages":["","Error: ENOENT: no such file or directory, open '/home/eric/Projects/accounting-api/tests/fixtures/test-document.txt'\n    at open (node:internal/fs/promises:641:25)\n    at Object.readFile (node:internal/fs/promises:1245:14)\n    at Object.<anonymous> (/home/eric/Projects/accounting-api/tests/integration/encryption-service.test.ts:47:22)"],"fullName":"Encryption Service Integration Tests Error Handling and Edge Cases should reject invalid ciphertext","status":"failed","title":"should reject invalid ciphertext"},{"ancestorTitles":["Encryption Service Integration Tests","Error Handling and Edge Cases"],"duration":0,"failureMessages":["","Error: ENOENT: no such file or directory, open '/home/eric/Projects/accounting-api/tests/fixtures/test-document.txt'\n    at open (node:internal/fs/promises:641:25)\n    at Object.readFile (node:internal/fs/promises:1245:14)\n    at Object.<anonymous> (/home/eric/Projects/accounting-api/tests/integration/encryption-service.test.ts:47:22)"],"fullName":"Encryption Service Integration Tests Error Handling and Edge Cases should reject tampered ciphertext","status":"failed","title":"should reject tampered ciphertext"},{"ancestorTitles":["Encryption Service Integration Tests","Error Handling and Edge Cases"],"duration":0,"failureMessages":["","Error: ENOENT: no such file or directory, open '/home/eric/Projects/accounting-api/tests/fixtures/test-document.txt'\n    at open (node:internal/fs/promises:641:25)\n    at Object.readFile (node:internal/fs/promises:1245:14)\n    at Object.<anonymous> (/home/eric/Projects/accounting-api/tests/integration/encryption-service.test.ts:47:22)"],"fullName":"Encryption Service Integration Tests Error Handling and Edge Cases should handle special characters and unicode","status":"failed","title":"should handle special characters and unicode"},{"ancestorTitles":["Encryption Service Integration Tests","Performance and Concurrency"],"duration":0,"failureMessages":["","Error: ENOENT: no such file or directory, open '/home/eric/Projects/accounting-api/tests/fixtures/test-document.txt'\n    at open (node:internal/fs/promises:641:25)\n    at Object.readFile (node:internal/fs/promises:1245:14)\n    at Object.<anonymous> (/home/eric/Projects/accounting-api/tests/integration/encryption-service.test.ts:47:22)"],"fullName":"Encryption Service Integration Tests Performance and Concurrency should handle concurrent encryption operations","status":"failed","title":"should handle concurrent encryption operations"},{"ancestorTitles":["Encryption Service Integration Tests","Performance and Concurrency"],"duration":0,"failureMessages":["","Error: ENOENT: no such file or directory, open '/home/eric/Projects/accounting-api/tests/fixtures/test-document.txt'\n    at open (node:internal/fs/promises:641:25)\n    at Object.readFile (node:internal/fs/promises:1245:14)\n    at Object.<anonymous> (/home/eric/Projects/accounting-api/tests/integration/encryption-service.test.ts:47:22)"],"fullName":"Encryption Service Integration Tests Performance and Concurrency should maintain performance for bulk operations","status":"failed","title":"should maintain performance for bulk operations"}]},{"numFailingTests":46,"numPassingTests":0,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":1759565234456,"runtime":783,"slow":false,"start":1759565233673},"testFilePath":"/home/eric/Projects/accounting-api/tests/integration/business-templates.test.ts","failureMessage":"  ● Business Templates Integration Tests › Template Retrieval › should get all available templates\n\n\n\n\n\n  ● Business Templates Integration Tests › Template Retrieval › should have all expected industry categories\n\n\n\n\n\n  ● Business Templates Integration Tests › Template Retrieval › should get template summaries\n\n\n\n\n\n  ● Business Templates Integration Tests › Template Retrieval › should get specific template by category\n\n\n\n\n\n  ● Business Templates Integration Tests › Template Retrieval › should throw error for invalid category\n\n\n\n\n\n  ● Business Templates Integration Tests › Template Retrieval › should be case-insensitive for category lookup\n\n\n\n\n\n  ● Business Templates Integration Tests › Template Retrieval › should check if category has template\n\n\n\n\n\n  ● Business Templates Integration Tests › Template Retrieval › should get available categories\n\n\n\n\n\n  ● Business Templates Integration Tests › HVAC Template Validation › should validate complete HVAC fields\n\n\n\n\n\n  ● Business Templates Integration Tests › HVAC Template Validation › should detect missing required HVAC fields\n\n\n\n\n\n  ● Business Templates Integration Tests › HVAC Template Validation › should validate HVAC field types\n\n\n\n\n\n  ● Business Templates Integration Tests › HVAC Template Validation › should warn about unknown HVAC fields\n\n\n\n\n\n  ● Business Templates Integration Tests › PLUMBING Template Validation › should validate complete PLUMBING fields\n\n\n\n\n\n  ● Business Templates Integration Tests › PLUMBING Template Validation › should detect missing required PLUMBING fields\n\n\n\n\n\n  ● Business Templates Integration Tests › ELECTRICAL Template Validation › should validate complete ELECTRICAL fields\n\n\n\n\n\n  ● Business Templates Integration Tests › ELECTRICAL Template Validation › should validate ELECTRICAL number ranges\n\n\n\n\n\n  ● Business Templates Integration Tests › LANDSCAPING Template Validation › should validate complete LANDSCAPING fields\n\n\n\n\n\n  ● Business Templates Integration Tests › LANDSCAPING Template Validation › should validate LANDSCAPING multiselect fields\n\n\n\n\n\n  ● Business Templates Integration Tests › CLEANING Template Validation › should validate complete CLEANING fields\n\n\n\n\n\n  ● Business Templates Integration Tests › CONSTRUCTION Template Validation › should validate complete CONSTRUCTION fields\n\n\n\n\n\n  ● Business Templates Integration Tests › ROOFING Template Validation › should validate complete ROOFING fields\n\n\n\n\n\n  ● Business Templates Integration Tests › GENERAL Template Validation › should validate GENERAL category with minimal fields\n\n\n\n\n\n  ● Business Templates Integration Tests › Field Type Validation › should validate text fields\n\n\n\n\n\n  ● Business Templates Integration Tests › Field Type Validation › should validate number fields\n\n\n\n\n\n  ● Business Templates Integration Tests › Field Type Validation › should validate select fields with options\n\n\n\n\n\n  ● Business Templates Integration Tests › Field Type Validation › should reject invalid select options\n\n\n\n\n\n  ● Business Templates Integration Tests › Field Type Validation › should validate date fields\n\n\n\n\n\n  ● Business Templates Integration Tests › Field Type Validation › should validate multiselect/array fields\n\n\n\n\n\n  ● Business Templates Integration Tests › Conditional Fields › should handle conditional field visibility\n\n\n\n\n\n  ● Business Templates Integration Tests › Field Constraints › should validate minimum values\n\n\n\n\n\n  ● Business Templates Integration Tests › Field Constraints › should validate maximum values\n\n\n\n\n\n  ● Business Templates Integration Tests › Field Constraints › should validate text length constraints\n\n\n\n\n\n  ● Business Templates Integration Tests › Sanitization › should sanitize HTML in text fields\n\n\n\n\n\n  ● Business Templates Integration Tests › Sanitization › should handle special characters\n\n\n\n\n\n  ● Business Templates Integration Tests › Empty and Null Values › should handle empty strings\n\n\n\n\n\n  ● Business Templates Integration Tests › Empty and Null Values › should handle null values\n\n\n\n\n\n  ● Business Templates Integration Tests › Empty and Null Values › should handle undefined values\n\n\n\n\n\n  ● Business Templates Integration Tests › Template Structure › all templates should have consistent structure\n\n\n\n\n\n  ● Business Templates Integration Tests › Template Structure › all templates should have at least one field\n\n\n\n\n\n  ● Business Templates Integration Tests › Template Structure › field types should be valid\n\n\n\n\n\n  ● Business Templates Integration Tests › Template Structure › select fields should have options\n\n\n\n\n\n  ● Business Templates Integration Tests › Integration with Intake Workflow › should validate full HVAC workflow data\n\n\n\n\n\n  ● Business Templates Integration Tests › Integration with Intake Workflow › should handle mixed valid and invalid data\n\n\n\n\n\n  ● Business Templates Integration Tests › Integration with Intake Workflow › should provide helpful error messages\n\n\n\n\n\n  ● Business Templates Integration Tests › Performance › should validate quickly with large dataset\n\n\n\n\n\n  ● Business Templates Integration Tests › Performance › should handle all templates efficiently\n\n\n\n\n","testResults":[{"ancestorTitles":["Business Templates Integration Tests","Template Retrieval"],"duration":6,"failureMessages":[""],"fullName":"Business Templates Integration Tests Template Retrieval should get all available templates","status":"failed","title":"should get all available templates"},{"ancestorTitles":["Business Templates Integration Tests","Template Retrieval"],"duration":0,"failureMessages":[""],"fullName":"Business Templates Integration Tests Template Retrieval should have all expected industry categories","status":"failed","title":"should have all expected industry categories"},{"ancestorTitles":["Business Templates Integration Tests","Template Retrieval"],"duration":0,"failureMessages":[""],"fullName":"Business Templates Integration Tests Template Retrieval should get template summaries","status":"failed","title":"should get template summaries"},{"ancestorTitles":["Business Templates Integration Tests","Template Retrieval"],"duration":0,"failureMessages":[""],"fullName":"Business Templates Integration Tests Template Retrieval should get specific template by category","status":"failed","title":"should get specific template by category"},{"ancestorTitles":["Business Templates Integration Tests","Template Retrieval"],"duration":5,"failureMessages":[""],"fullName":"Business Templates Integration Tests Template Retrieval should throw error for invalid category","status":"failed","title":"should throw error for invalid category"},{"ancestorTitles":["Business Templates Integration Tests","Template Retrieval"],"duration":0,"failureMessages":[""],"fullName":"Business Templates Integration Tests Template Retrieval should be case-insensitive for category lookup","status":"failed","title":"should be case-insensitive for category lookup"},{"ancestorTitles":["Business Templates Integration Tests","Template Retrieval"],"duration":0,"failureMessages":[""],"fullName":"Business Templates Integration Tests Template Retrieval should check if category has template","status":"failed","title":"should check if category has template"},{"ancestorTitles":["Business Templates Integration Tests","Template Retrieval"],"duration":0,"failureMessages":[""],"fullName":"Business Templates Integration Tests Template Retrieval should get available categories","status":"failed","title":"should get available categories"},{"ancestorTitles":["Business Templates Integration Tests","HVAC Template Validation"],"duration":0,"failureMessages":[""],"fullName":"Business Templates Integration Tests HVAC Template Validation should validate complete HVAC fields","status":"failed","title":"should validate complete HVAC fields"},{"ancestorTitles":["Business Templates Integration Tests","HVAC Template Validation"],"duration":0,"failureMessages":[""],"fullName":"Business Templates Integration Tests HVAC Template Validation should detect missing required HVAC fields","status":"failed","title":"should detect missing required HVAC fields"},{"ancestorTitles":["Business Templates Integration Tests","HVAC Template Validation"],"duration":0,"failureMessages":[""],"fullName":"Business Templates Integration Tests HVAC Template Validation should validate HVAC field types","status":"failed","title":"should validate HVAC field types"},{"ancestorTitles":["Business Templates Integration Tests","HVAC Template Validation"],"duration":0,"failureMessages":[""],"fullName":"Business Templates Integration Tests HVAC Template Validation should warn about unknown HVAC fields","status":"failed","title":"should warn about unknown HVAC fields"},{"ancestorTitles":["Business Templates Integration Tests","PLUMBING Template Validation"],"duration":0,"failureMessages":[""],"fullName":"Business Templates Integration Tests PLUMBING Template Validation should validate complete PLUMBING fields","status":"failed","title":"should validate complete PLUMBING fields"},{"ancestorTitles":["Business Templates Integration Tests","PLUMBING Template Validation"],"duration":0,"failureMessages":[""],"fullName":"Business Templates Integration Tests PLUMBING Template Validation should detect missing required PLUMBING fields","status":"failed","title":"should detect missing required PLUMBING fields"},{"ancestorTitles":["Business Templates Integration Tests","ELECTRICAL Template Validation"],"duration":0,"failureMessages":[""],"fullName":"Business Templates Integration Tests ELECTRICAL Template Validation should validate complete ELECTRICAL fields","status":"failed","title":"should validate complete ELECTRICAL fields"},{"ancestorTitles":["Business Templates Integration Tests","ELECTRICAL Template Validation"],"duration":0,"failureMessages":[""],"fullName":"Business Templates Integration Tests ELECTRICAL Template Validation should validate ELECTRICAL number ranges","status":"failed","title":"should validate ELECTRICAL number ranges"},{"ancestorTitles":["Business Templates Integration Tests","LANDSCAPING Template Validation"],"duration":0,"failureMessages":[""],"fullName":"Business Templates Integration Tests LANDSCAPING Template Validation should validate complete LANDSCAPING fields","status":"failed","title":"should validate complete LANDSCAPING fields"},{"ancestorTitles":["Business Templates Integration Tests","LANDSCAPING Template Validation"],"duration":0,"failureMessages":[""],"fullName":"Business Templates Integration Tests LANDSCAPING Template Validation should validate LANDSCAPING multiselect fields","status":"failed","title":"should validate LANDSCAPING multiselect fields"},{"ancestorTitles":["Business Templates Integration Tests","CLEANING Template Validation"],"duration":0,"failureMessages":[""],"fullName":"Business Templates Integration Tests CLEANING Template Validation should validate complete CLEANING fields","status":"failed","title":"should validate complete CLEANING fields"},{"ancestorTitles":["Business Templates Integration Tests","CONSTRUCTION Template Validation"],"duration":0,"failureMessages":[""],"fullName":"Business Templates Integration Tests CONSTRUCTION Template Validation should validate complete CONSTRUCTION fields","status":"failed","title":"should validate complete CONSTRUCTION fields"},{"ancestorTitles":["Business Templates Integration Tests","ROOFING Template Validation"],"duration":0,"failureMessages":[""],"fullName":"Business Templates Integration Tests ROOFING Template Validation should validate complete ROOFING fields","status":"failed","title":"should validate complete ROOFING fields"},{"ancestorTitles":["Business Templates Integration Tests","GENERAL Template Validation"],"duration":0,"failureMessages":[""],"fullName":"Business Templates Integration Tests GENERAL Template Validation should validate GENERAL category with minimal fields","status":"failed","title":"should validate GENERAL category with minimal fields"},{"ancestorTitles":["Business Templates Integration Tests","Field Type Validation"],"duration":1,"failureMessages":[""],"fullName":"Business Templates Integration Tests Field Type Validation should validate text fields","status":"failed","title":"should validate text fields"},{"ancestorTitles":["Business Templates Integration Tests","Field Type Validation"],"duration":0,"failureMessages":[""],"fullName":"Business Templates Integration Tests Field Type Validation should validate number fields","status":"failed","title":"should validate number fields"},{"ancestorTitles":["Business Templates Integration Tests","Field Type Validation"],"duration":0,"failureMessages":[""],"fullName":"Business Templates Integration Tests Field Type Validation should validate select fields with options","status":"failed","title":"should validate select fields with options"},{"ancestorTitles":["Business Templates Integration Tests","Field Type Validation"],"duration":0,"failureMessages":[""],"fullName":"Business Templates Integration Tests Field Type Validation should reject invalid select options","status":"failed","title":"should reject invalid select options"},{"ancestorTitles":["Business Templates Integration Tests","Field Type Validation"],"duration":0,"failureMessages":[""],"fullName":"Business Templates Integration Tests Field Type Validation should validate date fields","status":"failed","title":"should validate date fields"},{"ancestorTitles":["Business Templates Integration Tests","Field Type Validation"],"duration":0,"failureMessages":[""],"fullName":"Business Templates Integration Tests Field Type Validation should validate multiselect/array fields","status":"failed","title":"should validate multiselect/array fields"},{"ancestorTitles":["Business Templates Integration Tests","Conditional Fields"],"duration":0,"failureMessages":[""],"fullName":"Business Templates Integration Tests Conditional Fields should handle conditional field visibility","status":"failed","title":"should handle conditional field visibility"},{"ancestorTitles":["Business Templates Integration Tests","Field Constraints"],"duration":0,"failureMessages":[""],"fullName":"Business Templates Integration Tests Field Constraints should validate minimum values","status":"failed","title":"should validate minimum values"},{"ancestorTitles":["Business Templates Integration Tests","Field Constraints"],"duration":0,"failureMessages":[""],"fullName":"Business Templates Integration Tests Field Constraints should validate maximum values","status":"failed","title":"should validate maximum values"},{"ancestorTitles":["Business Templates Integration Tests","Field Constraints"],"duration":0,"failureMessages":[""],"fullName":"Business Templates Integration Tests Field Constraints should validate text length constraints","status":"failed","title":"should validate text length constraints"},{"ancestorTitles":["Business Templates Integration Tests","Sanitization"],"duration":0,"failureMessages":[""],"fullName":"Business Templates Integration Tests Sanitization should sanitize HTML in text fields","status":"failed","title":"should sanitize HTML in text fields"},{"ancestorTitles":["Business Templates Integration Tests","Sanitization"],"duration":0,"failureMessages":[""],"fullName":"Business Templates Integration Tests Sanitization should handle special characters","status":"failed","title":"should handle special characters"},{"ancestorTitles":["Business Templates Integration Tests","Empty and Null Values"],"duration":0,"failureMessages":[""],"fullName":"Business Templates Integration Tests Empty and Null Values should handle empty strings","status":"failed","title":"should handle empty strings"},{"ancestorTitles":["Business Templates Integration Tests","Empty and Null Values"],"duration":0,"failureMessages":[""],"fullName":"Business Templates Integration Tests Empty and Null Values should handle null values","status":"failed","title":"should handle null values"},{"ancestorTitles":["Business Templates Integration Tests","Empty and Null Values"],"duration":0,"failureMessages":[""],"fullName":"Business Templates Integration Tests Empty and Null Values should handle undefined values","status":"failed","title":"should handle undefined values"},{"ancestorTitles":["Business Templates Integration Tests","Template Structure"],"duration":0,"failureMessages":[""],"fullName":"Business Templates Integration Tests Template Structure all templates should have consistent structure","status":"failed","title":"all templates should have consistent structure"},{"ancestorTitles":["Business Templates Integration Tests","Template Structure"],"duration":0,"failureMessages":[""],"fullName":"Business Templates Integration Tests Template Structure all templates should have at least one field","status":"failed","title":"all templates should have at least one field"},{"ancestorTitles":["Business Templates Integration Tests","Template Structure"],"duration":0,"failureMessages":[""],"fullName":"Business Templates Integration Tests Template Structure field types should be valid","status":"failed","title":"field types should be valid"},{"ancestorTitles":["Business Templates Integration Tests","Template Structure"],"duration":0,"failureMessages":[""],"fullName":"Business Templates Integration Tests Template Structure select fields should have options","status":"failed","title":"select fields should have options"},{"ancestorTitles":["Business Templates Integration Tests","Integration with Intake Workflow"],"duration":0,"failureMessages":[""],"fullName":"Business Templates Integration Tests Integration with Intake Workflow should validate full HVAC workflow data","status":"failed","title":"should validate full HVAC workflow data"},{"ancestorTitles":["Business Templates Integration Tests","Integration with Intake Workflow"],"duration":0,"failureMessages":[""],"fullName":"Business Templates Integration Tests Integration with Intake Workflow should handle mixed valid and invalid data","status":"failed","title":"should handle mixed valid and invalid data"},{"ancestorTitles":["Business Templates Integration Tests","Integration with Intake Workflow"],"duration":0,"failureMessages":[""],"fullName":"Business Templates Integration Tests Integration with Intake Workflow should provide helpful error messages","status":"failed","title":"should provide helpful error messages"},{"ancestorTitles":["Business Templates Integration Tests","Performance"],"duration":0,"failureMessages":[""],"fullName":"Business Templates Integration Tests Performance should validate quickly with large dataset","status":"failed","title":"should validate quickly with large dataset"},{"ancestorTitles":["Business Templates Integration Tests","Performance"],"duration":0,"failureMessages":[""],"fullName":"Business Templates Integration Tests Performance should handle all templates efficiently","status":"failed","title":"should handle all templates efficiently"}]},{"numFailingTests":0,"numPassingTests":0,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":0,"runtime":0,"slow":false,"start":0},"testFilePath":"/home/eric/Projects/accounting-api/tests/integration/public-payment-portal.test.ts","failureMessage":"  ● Test suite failed to run\n\n    \u001b[96mtests/integration/public-payment-portal.test.ts\u001b[0m:\u001b[93m5\u001b[0m:\u001b[93m73\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2305: \u001b[0mModule '\"./test-utils\"' has no exported member 'cleanupTestData'.\n\n    \u001b[7m5\u001b[0m import { createTestOrganization, createTestCustomer, createTestInvoice, cleanupTestData } from './test-utils';\n    \u001b[7m \u001b[0m \u001b[91m                                                                        ~~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/public-payment-portal.test.ts\u001b[0m:\u001b[93m15\u001b[0m:\u001b[93m23\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2554: \u001b[0mExpected 1-2 arguments, but got 0.\n\n    \u001b[7m15\u001b[0m     const org = await createTestOrganization();\n    \u001b[7m  \u001b[0m \u001b[91m                      ~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n\n      \u001b[96mtests/integration/test-utils.ts\u001b[0m:\u001b[93m161\u001b[0m:\u001b[93m3\u001b[0m\n        \u001b[7m161\u001b[0m   prisma: PrismaClient,\n        \u001b[7m   \u001b[0m \u001b[96m  ~~~~~~~~~~~~~~~~~~~~\u001b[0m\n        An argument for 'prisma' was not provided.\n    \u001b[96mtests/integration/public-payment-portal.test.ts\u001b[0m:\u001b[93m19\u001b[0m:\u001b[93m28\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2554: \u001b[0mExpected 2-3 arguments, but got 1.\n\n    \u001b[7m19\u001b[0m     const customer = await createTestCustomer(orgId);\n    \u001b[7m  \u001b[0m \u001b[91m                           ~~~~~~~~~~~~~~~~~~\u001b[0m\n\n      \u001b[96mtests/integration/test-utils.ts\u001b[0m:\u001b[93m214\u001b[0m:\u001b[93m3\u001b[0m\n        \u001b[7m214\u001b[0m   organizationId: string,\n        \u001b[7m   \u001b[0m \u001b[96m  ~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n        An argument for 'organizationId' was not provided.\n    \u001b[96mtests/integration/public-payment-portal.test.ts\u001b[0m:\u001b[93m23\u001b[0m:\u001b[93m27\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2554: \u001b[0mExpected 4-5 arguments, but got 3.\n\n    \u001b[7m23\u001b[0m     const invoice = await createTestInvoice(orgId, customerId, {\n    \u001b[7m  \u001b[0m \u001b[91m                          ~~~~~~~~~~~~~~~~~\u001b[0m\n\n      \u001b[96mtests/integration/test-utils.ts\u001b[0m:\u001b[93m297\u001b[0m:\u001b[93m3\u001b[0m\n        \u001b[7m297\u001b[0m   createdById: string,\n        \u001b[7m   \u001b[0m \u001b[96m  ~~~~~~~~~~~~~~~~~~~\u001b[0m\n        An argument for 'createdById' was not provided.\n    \u001b[96mtests/integration/public-payment-portal.test.ts\u001b[0m:\u001b[93m110\u001b[0m:\u001b[93m27\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'viewCount' does not exist on type '{ id: string; createdAt: Date; organizationId: string; customerId: string; token: string; invoiceId: string; expiresAt: Date; isUsed: boolean; usedAt: Date | null; ipAddress: string | null; userAgent: string | null; }'.\n\n    \u001b[7m110\u001b[0m       expect(tokenRecord?.viewCount).toBe(3);\n    \u001b[7m   \u001b[0m \u001b[91m                          ~~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/public-payment-portal.test.ts\u001b[0m:\u001b[93m111\u001b[0m:\u001b[93m27\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'lastViewedAt' does not exist on type '{ id: string; createdAt: Date; organizationId: string; customerId: string; token: string; invoiceId: string; expiresAt: Date; isUsed: boolean; usedAt: Date | null; ipAddress: string | null; userAgent: string | null; }'.\n\n    \u001b[7m111\u001b[0m       expect(tokenRecord?.lastViewedAt).toBeInstanceOf(Date);\n    \u001b[7m   \u001b[0m \u001b[91m                          ~~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/public-payment-portal.test.ts\u001b[0m:\u001b[93m285\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'isActive' does not exist on type '{ id: string; createdAt: Date; updatedAt: Date; deletedAt: Date | null; organizationId: string; customerId: string; stripePaymentMethodId: string | null; type: string; ... 6 more ...; accountLast4: string | null; }'.\n\n    \u001b[7m285\u001b[0m       expect(updatedMethod?.isActive).toBe(false);\n    \u001b[7m   \u001b[0m \u001b[91m                            ~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/public-payment-portal.test.ts\u001b[0m:\u001b[93m333\u001b[0m:\u001b[93m27\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2551: \u001b[0mProperty 'ipAddressUsed' does not exist on type '{ id: string; createdAt: Date; organizationId: string; customerId: string; token: string; invoiceId: string; expiresAt: Date; isUsed: boolean; usedAt: Date | null; ipAddress: string | null; userAgent: string | null; }'. Did you mean 'ipAddress'?\n\n    \u001b[7m333\u001b[0m       expect(tokenRecord?.ipAddressUsed).toBe('192.168.1.100');\n    \u001b[7m   \u001b[0m \u001b[91m                          ~~~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/public-payment-portal.test.ts\u001b[0m:\u001b[93m351\u001b[0m:\u001b[93m36\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2554: \u001b[0mExpected 4-5 arguments, but got 3.\n\n    \u001b[7m351\u001b[0m       const overdueInvoice = await createTestInvoice(orgId, customerId, {\n    \u001b[7m   \u001b[0m \u001b[91m                                   ~~~~~~~~~~~~~~~~~\u001b[0m\n\n      \u001b[96mtests/integration/test-utils.ts\u001b[0m:\u001b[93m297\u001b[0m:\u001b[93m3\u001b[0m\n        \u001b[7m297\u001b[0m   createdById: string,\n        \u001b[7m   \u001b[0m \u001b[96m  ~~~~~~~~~~~~~~~~~~~\u001b[0m\n        An argument for 'createdById' was not provided.\n","testResults":[]},{"numFailingTests":0,"numPassingTests":0,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":0,"runtime":0,"slow":false,"start":0},"testFilePath":"/home/eric/Projects/accounting-api/tests/integration/etransfer-automation.test.ts","failureMessage":"  ● Test suite failed to run\n\n    \u001b[96mtests/integration/etransfer-automation.test.ts\u001b[0m:\u001b[93m21\u001b[0m:\u001b[93m7\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2353: \u001b[0mObject literal may only specify known properties, and 'name' does not exist in type 'PrismaClient<PrismaClientOptions, never, DefaultArgs>'.\n\n    \u001b[7m21\u001b[0m       name: 'E-Transfer Test Org',\n    \u001b[7m  \u001b[0m \u001b[91m      ~~~~\u001b[0m\n    \u001b[96mtests/integration/etransfer-automation.test.ts\u001b[0m:\u001b[93m27\u001b[0m:\u001b[93m25\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2554: \u001b[0mExpected 2-4 arguments, but got 1.\n\n    \u001b[7m27\u001b[0m     const admin = await createTestUser({\n    \u001b[7m  \u001b[0m \u001b[91m                        ~~~~~~~~~~~~~~\u001b[0m\n\n      \u001b[96mtests/integration/test-utils.ts\u001b[0m:\u001b[93m184\u001b[0m:\u001b[93m3\u001b[0m\n        \u001b[7m184\u001b[0m   organizationId: string,\n        \u001b[7m   \u001b[0m \u001b[96m  ~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n        An argument for 'organizationId' was not provided.\n    \u001b[96mtests/integration/etransfer-automation.test.ts\u001b[0m:\u001b[93m32\u001b[0m:\u001b[93m46\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2554: \u001b[0mExpected 1 arguments, but got 2.\n\n    \u001b[7m32\u001b[0m     adminToken = generateAuthToken(admin.id, organizationId);\n    \u001b[7m  \u001b[0m \u001b[91m                                             ~~~~~~~~~~~~~~\u001b[0m\n    \u001b[96mtests/integration/etransfer-automation.test.ts\u001b[0m:\u001b[93m35\u001b[0m:\u001b[93m28\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2554: \u001b[0mExpected 2-3 arguments, but got 1.\n\n    \u001b[7m35\u001b[0m     const customer = await createTestCustomer({\n    \u001b[7m  \u001b[0m \u001b[91m                           ~~~~~~~~~~~~~~~~~~\u001b[0m\n\n      \u001b[96mtests/integration/test-utils.ts\u001b[0m:\u001b[93m214\u001b[0m:\u001b[93m3\u001b[0m\n        \u001b[7m214\u001b[0m   organizationId: string,\n        \u001b[7m   \u001b[0m \u001b[96m  ~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n        An argument for 'organizationId' was not provided.\n    \u001b[96mtests/integration/etransfer-automation.test.ts\u001b[0m:\u001b[93m44\u001b[0m:\u001b[93m27\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2554: \u001b[0mExpected 4-5 arguments, but got 1.\n\n    \u001b[7m44\u001b[0m     const invoice = await createTestInvoice({\n    \u001b[7m  \u001b[0m \u001b[91m                          ~~~~~~~~~~~~~~~~~\u001b[0m\n\n      \u001b[96mtests/integration/test-utils.ts\u001b[0m:\u001b[93m295\u001b[0m:\u001b[93m3\u001b[0m\n        \u001b[7m295\u001b[0m   organizationId: string,\n        \u001b[7m   \u001b[0m \u001b[96m  ~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n        An argument for 'organizationId' was not provided.\n    \u001b[96mtests/integration/etransfer-automation.test.ts\u001b[0m:\u001b[93m126\u001b[0m:\u001b[93m38\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2554: \u001b[0mExpected 4-5 arguments, but got 1.\n\n    \u001b[7m126\u001b[0m       const highValueInvoice = await createTestInvoice({\n    \u001b[7m   \u001b[0m \u001b[91m                                     ~~~~~~~~~~~~~~~~~\u001b[0m\n\n      \u001b[96mtests/integration/test-utils.ts\u001b[0m:\u001b[93m295\u001b[0m:\u001b[93m3\u001b[0m\n        \u001b[7m295\u001b[0m   organizationId: string,\n        \u001b[7m   \u001b[0m \u001b[96m  ~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n        An argument for 'organizationId' was not provided.\n    \u001b[96mtests/integration/etransfer-automation.test.ts\u001b[0m:\u001b[93m150\u001b[0m:\u001b[93m30\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2554: \u001b[0mExpected 4-5 arguments, but got 1.\n\n    \u001b[7m150\u001b[0m       const invoice1 = await createTestInvoice({\n    \u001b[7m   \u001b[0m \u001b[91m                             ~~~~~~~~~~~~~~~~~\u001b[0m\n\n      \u001b[96mtests/integration/test-utils.ts\u001b[0m:\u001b[93m295\u001b[0m:\u001b[93m3\u001b[0m\n        \u001b[7m295\u001b[0m   organizationId: string,\n        \u001b[7m   \u001b[0m \u001b[96m  ~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n        An argument for 'organizationId' was not provided.\n    \u001b[96mtests/integration/etransfer-automation.test.ts\u001b[0m:\u001b[93m157\u001b[0m:\u001b[93m31\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2554: \u001b[0mExpected 2-3 arguments, but got 1.\n\n    \u001b[7m157\u001b[0m       const customer2 = await createTestCustomer({\n    \u001b[7m   \u001b[0m \u001b[91m                              ~~~~~~~~~~~~~~~~~~\u001b[0m\n\n      \u001b[96mtests/integration/test-utils.ts\u001b[0m:\u001b[93m214\u001b[0m:\u001b[93m3\u001b[0m\n        \u001b[7m214\u001b[0m   organizationId: string,\n        \u001b[7m   \u001b[0m \u001b[96m  ~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n        An argument for 'organizationId' was not provided.\n    \u001b[96mtests/integration/etransfer-automation.test.ts\u001b[0m:\u001b[93m164\u001b[0m:\u001b[93m30\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2554: \u001b[0mExpected 4-5 arguments, but got 1.\n\n    \u001b[7m164\u001b[0m       const invoice2 = await createTestInvoice({\n    \u001b[7m   \u001b[0m \u001b[91m                             ~~~~~~~~~~~~~~~~~\u001b[0m\n\n      \u001b[96mtests/integration/test-utils.ts\u001b[0m:\u001b[93m295\u001b[0m:\u001b[93m3\u001b[0m\n        \u001b[7m295\u001b[0m   organizationId: string,\n        \u001b[7m   \u001b[0m \u001b[96m  ~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n        An argument for 'organizationId' was not provided.\n    \u001b[96mtests/integration/etransfer-automation.test.ts\u001b[0m:\u001b[93m229\u001b[0m:\u001b[93m11\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2353: \u001b[0mObject literal may only specify known properties, and 'paymentMethod' does not exist in type 'Without<PaymentCreateInput, PaymentUncheckedCreateInput> & PaymentUncheckedCreateInput'.\n\n    \u001b[7m229\u001b[0m           paymentMethod: 'INTERAC_ETRANSFER',\n    \u001b[7m   \u001b[0m \u001b[91m          ~~~~~~~~~~~~~\u001b[0m\n\n      \u001b[96mnode_modules/.prisma/client/index.d.ts\u001b[0m:\u001b[93m37001\u001b[0m:\u001b[93m5\u001b[0m\n        \u001b[7m37001\u001b[0m     data: XOR<PaymentCreateInput, PaymentUncheckedCreateInput>\n        \u001b[7m     \u001b[0m \u001b[96m    ~~~~\u001b[0m\n        The expected type comes from property 'data' which is declared here on type '{ select?: PaymentSelect<DefaultArgs> | null | undefined; include?: PaymentInclude<DefaultArgs> | null | undefined; data: (Without<...> & PaymentUncheckedCreateInput) | (Without<...> & PaymentCreateInput); }'\n    \u001b[96mtests/integration/etransfer-automation.test.ts\u001b[0m:\u001b[93m278\u001b[0m:\u001b[93m32\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2554: \u001b[0mExpected 4-5 arguments, but got 1.\n\n    \u001b[7m278\u001b[0m       const newInvoice = await createTestInvoice({\n    \u001b[7m   \u001b[0m \u001b[91m                               ~~~~~~~~~~~~~~~~~\u001b[0m\n\n      \u001b[96mtests/integration/test-utils.ts\u001b[0m:\u001b[93m295\u001b[0m:\u001b[93m3\u001b[0m\n        \u001b[7m295\u001b[0m   organizationId: string,\n        \u001b[7m   \u001b[0m \u001b[96m  ~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n        An argument for 'organizationId' was not provided.\n    \u001b[96mtests/integration/etransfer-automation.test.ts\u001b[0m:\u001b[93m327\u001b[0m:\u001b[93m30\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2554: \u001b[0mExpected 2-4 arguments, but got 1.\n\n    \u001b[7m327\u001b[0m       const employee = await createTestUser({\n    \u001b[7m   \u001b[0m \u001b[91m                             ~~~~~~~~~~~~~~\u001b[0m\n\n      \u001b[96mtests/integration/test-utils.ts\u001b[0m:\u001b[93m184\u001b[0m:\u001b[93m3\u001b[0m\n        \u001b[7m184\u001b[0m   organizationId: string,\n        \u001b[7m   \u001b[0m \u001b[96m  ~~~~~~~~~~~~~~~~~~~~~~\u001b[0m\n        An argument for 'organizationId' was not provided.\n    \u001b[96mtests/integration/etransfer-automation.test.ts\u001b[0m:\u001b[93m332\u001b[0m:\u001b[93m60\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2554: \u001b[0mExpected 1 arguments, but got 2.\n\n    \u001b[7m332\u001b[0m       const employeeToken = generateAuthToken(employee.id, organizationId);\n    \u001b[7m   \u001b[0m \u001b[91m                                                           ~~~~~~~~~~~~~~\u001b[0m\n","testResults":[]},{"numFailingTests":0,"numPassingTests":0,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":0,"runtime":0,"slow":false,"start":0},"testFilePath":"/home/eric/Projects/accounting-api/tests/integration/document-management.test.ts","failureMessage":"  ● Test suite failed to run\n\n    \u001b[96msrc/services/appointment.service.ts\u001b[0m:\u001b[93m96\u001b[0m:\u001b[93m7\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2322: \u001b[0mType '{ organizationId: string; customerId: string; projectId: string | undefined; locationId: string | undefined; title: string; description: string | undefined; startTime: Date; endTime: Date; duration: number; }' is not assignable to type '(Without<AppointmentCreateInput, AppointmentUncheckedCreateInput> & AppointmentUncheckedCreateInput) | (Without<...> & AppointmentCreateInput)'.\n      Type '{ organizationId: string; customerId: string; projectId: string | undefined; locationId: string | undefined; title: string; description: string | undefined; startTime: Date; endTime: Date; duration: number; }' is not assignable to type 'Without<AppointmentCreateInput, AppointmentUncheckedCreateInput> & AppointmentUncheckedCreateInput'.\n        Type '{ organizationId: string; customerId: string; projectId: string | undefined; locationId: string | undefined; title: string; description: string | undefined; startTime: Date; endTime: Date; duration: number; }' is missing the following properties from type 'AppointmentUncheckedCreateInput': appointmentNumber, scheduledStart, scheduledEnd\n\n    \u001b[7m96\u001b[0m       data: {\n    \u001b[7m  \u001b[0m \u001b[91m      ~~~~\u001b[0m\n\n      \u001b[96mnode_modules/.prisma/client/index.d.ts\u001b[0m:\u001b[93m30760\u001b[0m:\u001b[93m5\u001b[0m\n        \u001b[7m30760\u001b[0m     data: XOR<AppointmentCreateInput, AppointmentUncheckedCreateInput>\n        \u001b[7m     \u001b[0m \u001b[96m    ~~~~\u001b[0m\n        The expected type comes from property 'data' which is declared here on type '{ select?: AppointmentSelect<DefaultArgs> | null | undefined; include?: AppointmentInclude<DefaultArgs> | null | undefined; data: (Without<...> & AppointmentUncheckedCreateInput) | (Without<...> & AppointmentCreateInput); }'\n    \u001b[96msrc/services/appointment.service.ts\u001b[0m:\u001b[93m189\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'cancelled' does not exist on type '{ id: string; description: string | null; status: string; createdAt: Date; updatedAt: Date; deletedAt: Date | null; organizationId: string; customerId: string; appointmentNumber: string; ... 11 more ...; reminderSentAt: Date | null; }'.\n\n    \u001b[7m189\u001b[0m     if (existingAppointment.cancelled) {\n    \u001b[7m   \u001b[0m \u001b[91m                            ~~~~~~~~~\u001b[0m\n    \u001b[96msrc/services/appointment.service.ts\u001b[0m:\u001b[93m193\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'completed' does not exist on type '{ id: string; description: string | null; status: string; createdAt: Date; updatedAt: Date; deletedAt: Date | null; organizationId: string; customerId: string; appointmentNumber: string; ... 11 more ...; reminderSentAt: Date | null; }'.\n\n    \u001b[7m193\u001b[0m     if (existingAppointment.completed) {\n    \u001b[7m   \u001b[0m \u001b[91m                            ~~~~~~~~~\u001b[0m\n    \u001b[96msrc/services/appointment.service.ts\u001b[0m:\u001b[93m202\u001b[0m:\u001b[93m11\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18047: \u001b[0m'startTime' is possibly 'null'.\n\n    \u001b[7m202\u001b[0m       if (startTime >= endTime) {\n    \u001b[7m   \u001b[0m \u001b[91m          ~~~~~~~~~\u001b[0m\n    \u001b[96msrc/services/appointment.service.ts\u001b[0m:\u001b[93m202\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18047: \u001b[0m'endTime' is possibly 'null'.\n\n    \u001b[7m202\u001b[0m       if (startTime >= endTime) {\n    \u001b[7m   \u001b[0m \u001b[91m                       ~~~~~~~\u001b[0m\n    \u001b[96msrc/services/appointment.service.ts\u001b[0m:\u001b[93m206\u001b[0m:\u001b[93m11\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18047: \u001b[0m'startTime' is possibly 'null'.\n\n    \u001b[7m206\u001b[0m       if (startTime < new Date()) {\n    \u001b[7m   \u001b[0m \u001b[91m          ~~~~~~~~~\u001b[0m\n    \u001b[96msrc/services/appointment.service.ts\u001b[0m:\u001b[93m213\u001b[0m:\u001b[93m9\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'Date | null' is not assignable to parameter of type 'Date'.\n      Type 'null' is not assignable to type 'Date'.\n\n    \u001b[7m213\u001b[0m         startTime,\n    \u001b[7m   \u001b[0m \u001b[91m        ~~~~~~~~~\u001b[0m\n    \u001b[96msrc/services/appointment.service.ts\u001b[0m:\u001b[93m336\u001b[0m:\u001b[93m21\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'cancelled' does not exist on type '{ id: string; description: string | null; status: string; createdAt: Date; updatedAt: Date; deletedAt: Date | null; organizationId: string; customerId: string; appointmentNumber: string; ... 11 more ...; reminderSentAt: Date | null; }'.\n\n    \u001b[7m336\u001b[0m     if (appointment.cancelled) {\n    \u001b[7m   \u001b[0m \u001b[91m                    ~~~~~~~~~\u001b[0m\n    \u001b[96msrc/services/appointment.service.ts\u001b[0m:\u001b[93m340\u001b[0m:\u001b[93m21\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'completed' does not exist on type '{ id: string; description: string | null; status: string; createdAt: Date; updatedAt: Date; deletedAt: Date | null; organizationId: string; customerId: string; appointmentNumber: string; ... 11 more ...; reminderSentAt: Date | null; }'.\n\n    \u001b[7m340\u001b[0m     if (appointment.completed) {\n    \u001b[7m   \u001b[0m \u001b[91m                    ~~~~~~~~~\u001b[0m\n    \u001b[96msrc/services/appointment.service.ts\u001b[0m:\u001b[93m344\u001b[0m:\u001b[93m21\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'confirmed' does not exist on type '{ id: string; description: string | null; status: string; createdAt: Date; updatedAt: Date; deletedAt: Date | null; organizationId: string; customerId: string; appointmentNumber: string; ... 11 more ...; reminderSentAt: Date | null; }'.\n\n    \u001b[7m344\u001b[0m     if (appointment.confirmed) {\n    \u001b[7m   \u001b[0m \u001b[91m                    ~~~~~~~~~\u001b[0m\n    \u001b[96msrc/services/appointment.service.ts\u001b[0m:\u001b[93m351\u001b[0m:\u001b[93m9\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2353: \u001b[0mObject literal may only specify known properties, and 'confirmed' does not exist in type '(Without<AppointmentUpdateInput, AppointmentUncheckedUpdateInput> & AppointmentUncheckedUpdateInput) | (Without<...> & AppointmentUpdateInput)'.\n\n    \u001b[7m351\u001b[0m         confirmed: true,\n    \u001b[7m   \u001b[0m \u001b[91m        ~~~~~~~~~\u001b[0m\n\n      \u001b[96mnode_modules/.prisma/client/index.d.ts\u001b[0m:\u001b[93m30806\u001b[0m:\u001b[93m5\u001b[0m\n        \u001b[7m30806\u001b[0m     data: XOR<AppointmentUpdateInput, AppointmentUncheckedUpdateInput>\n        \u001b[7m     \u001b[0m \u001b[96m    ~~~~\u001b[0m\n        The expected type comes from property 'data' which is declared here on type '{ select?: AppointmentSelect<DefaultArgs> | null | undefined; include?: AppointmentInclude<DefaultArgs> | null | undefined; data: (Without<...> & AppointmentUncheckedUpdateInput) | (Without<...> & AppointmentUpdateInput); where: AppointmentWhereUniqueInput; }'\n    \u001b[96msrc/services/appointment.service.ts\u001b[0m:\u001b[93m389\u001b[0m:\u001b[93m21\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'cancelled' does not exist on type '{ id: string; description: string | null; status: string; createdAt: Date; updatedAt: Date; deletedAt: Date | null; organizationId: string; customerId: string; appointmentNumber: string; ... 11 more ...; reminderSentAt: Date | null; }'.\n\n    \u001b[7m389\u001b[0m     if (appointment.cancelled) {\n    \u001b[7m   \u001b[0m \u001b[91m                    ~~~~~~~~~\u001b[0m\n    \u001b[96msrc/services/appointment.service.ts\u001b[0m:\u001b[93m393\u001b[0m:\u001b[93m21\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'completed' does not exist on type '{ id: string; description: string | null; status: string; createdAt: Date; updatedAt: Date; deletedAt: Date | null; organizationId: string; customerId: string; appointmentNumber: string; ... 11 more ...; reminderSentAt: Date | null; }'.\n\n    \u001b[7m393\u001b[0m     if (appointment.completed) {\n    \u001b[7m   \u001b[0m \u001b[91m                    ~~~~~~~~~\u001b[0m\n    \u001b[96msrc/services/appointment.service.ts\u001b[0m:\u001b[93m400\u001b[0m:\u001b[93m9\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2353: \u001b[0mObject literal may only specify known properties, and 'completed' does not exist in type '(Without<AppointmentUpdateInput, AppointmentUncheckedUpdateInput> & AppointmentUncheckedUpdateInput) | (Without<...> & AppointmentUpdateInput)'.\n\n    \u001b[7m400\u001b[0m         completed: true,\n    \u001b[7m   \u001b[0m \u001b[91m        ~~~~~~~~~\u001b[0m\n\n      \u001b[96mnode_modules/.prisma/client/index.d.ts\u001b[0m:\u001b[93m30806\u001b[0m:\u001b[93m5\u001b[0m\n        \u001b[7m30806\u001b[0m     data: XOR<AppointmentUpdateInput, AppointmentUncheckedUpdateInput>\n        \u001b[7m     \u001b[0m \u001b[96m    ~~~~\u001b[0m\n        The expected type comes from property 'data' which is declared here on type '{ select?: AppointmentSelect<DefaultArgs> | null | undefined; include?: AppointmentInclude<DefaultArgs> | null | undefined; data: (Without<...> & AppointmentUncheckedUpdateInput) | (Without<...> & AppointmentUpdateInput); where: AppointmentWhereUniqueInput; }'\n    \u001b[96msrc/services/appointment.service.ts\u001b[0m:\u001b[93m439\u001b[0m:\u001b[93m21\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'cancelled' does not exist on type '{ id: string; description: string | null; status: string; createdAt: Date; updatedAt: Date; deletedAt: Date | null; organizationId: string; customerId: string; appointmentNumber: string; ... 11 more ...; reminderSentAt: Date | null; }'.\n\n    \u001b[7m439\u001b[0m     if (appointment.cancelled) {\n    \u001b[7m   \u001b[0m \u001b[91m                    ~~~~~~~~~\u001b[0m\n    \u001b[96msrc/services/appointment.service.ts\u001b[0m:\u001b[93m443\u001b[0m:\u001b[93m21\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'completed' does not exist on type '{ id: string; description: string | null; status: string; createdAt: Date; updatedAt: Date; deletedAt: Date | null; organizationId: string; customerId: string; appointmentNumber: string; ... 11 more ...; reminderSentAt: Date | null; }'.\n\n    \u001b[7m443\u001b[0m     if (appointment.completed) {\n    \u001b[7m   \u001b[0m \u001b[91m                    ~~~~~~~~~\u001b[0m\n    \u001b[96msrc/services/appointment.service.ts\u001b[0m:\u001b[93m450\u001b[0m:\u001b[93m9\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2353: \u001b[0mObject literal may only specify known properties, and 'cancelled' does not exist in type '(Without<AppointmentUpdateInput, AppointmentUncheckedUpdateInput> & AppointmentUncheckedUpdateInput) | (Without<...> & AppointmentUpdateInput)'.\n\n    \u001b[7m450\u001b[0m         cancelled: true,\n    \u001b[7m   \u001b[0m \u001b[91m        ~~~~~~~~~\u001b[0m\n\n      \u001b[96mnode_modules/.prisma/client/index.d.ts\u001b[0m:\u001b[93m30806\u001b[0m:\u001b[93m5\u001b[0m\n        \u001b[7m30806\u001b[0m     data: XOR<AppointmentUpdateInput, AppointmentUncheckedUpdateInput>\n        \u001b[7m     \u001b[0m \u001b[96m    ~~~~\u001b[0m\n        The expected type comes from property 'data' which is declared here on type '{ select?: AppointmentSelect<DefaultArgs> | null | undefined; include?: AppointmentInclude<DefaultArgs> | null | undefined; data: (Without<...> & AppointmentUncheckedUpdateInput) | (Without<...> & AppointmentUpdateInput); where: AppointmentWhereUniqueInput; }'\n    \u001b[96msrc/services/appointment.service.ts\u001b[0m:\u001b[93m490\u001b[0m:\u001b[93m21\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'cancelled' does not exist on type '{ id: string; description: string | null; status: string; createdAt: Date; updatedAt: Date; deletedAt: Date | null; organizationId: string; customerId: string; appointmentNumber: string; ... 11 more ...; reminderSentAt: Date | null; }'.\n\n    \u001b[7m490\u001b[0m     if (appointment.cancelled) {\n    \u001b[7m   \u001b[0m \u001b[91m                    ~~~~~~~~~\u001b[0m\n    \u001b[96msrc/services/appointment.service.ts\u001b[0m:\u001b[93m494\u001b[0m:\u001b[93m21\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'completed' does not exist on type '{ id: string; description: string | null; status: string; createdAt: Date; updatedAt: Date; deletedAt: Date | null; organizationId: string; customerId: string; appointmentNumber: string; ... 11 more ...; reminderSentAt: Date | null; }'.\n\n    \u001b[7m494\u001b[0m     if (appointment.completed) {\n    \u001b[7m   \u001b[0m \u001b[91m                    ~~~~~~~~~\u001b[0m\n    \u001b[96msrc/services/appointment.service.ts\u001b[0m:\u001b[93m527\u001b[0m:\u001b[93m9\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2353: \u001b[0mObject literal may only specify known properties, and 'confirmed' does not exist in type '(Without<AppointmentUpdateInput, AppointmentUncheckedUpdateInput> & AppointmentUncheckedUpdateInput) | (Without<...> & AppointmentUpdateInput)'.\n\n    \u001b[7m527\u001b[0m         confirmed: false, // Reschedule requires re-confirmation\n    \u001b[7m   \u001b[0m \u001b[91m        ~~~~~~~~~\u001b[0m\n\n      \u001b[96mnode_modules/.prisma/client/index.d.ts\u001b[0m:\u001b[93m30806\u001b[0m:\u001b[93m5\u001b[0m\n        \u001b[7m30806\u001b[0m     data: XOR<AppointmentUpdateInput, AppointmentUncheckedUpdateInput>\n        \u001b[7m     \u001b[0m \u001b[96m    ~~~~\u001b[0m\n        The expected type comes from property 'data' which is declared here on type '{ select?: AppointmentSelect<DefaultArgs> | null | undefined; include?: AppointmentInclude<DefaultArgs> | null | undefined; data: (Without<...> & AppointmentUncheckedUpdateInput) | (Without<...> & AppointmentUpdateInput); where: AppointmentWhereUniqueInput; }'\n","testResults":[]},{"numFailingTests":0,"numPassingTests":0,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":0,"runtime":0,"slow":false,"start":0},"testFilePath":"/home/eric/Projects/accounting-api/tests/integration/customer-lifecycle-automation.test.ts","failureMessage":"  ● Test suite failed to run\n\n    \u001b[96msrc/services/appointment.service.ts\u001b[0m:\u001b[93m96\u001b[0m:\u001b[93m7\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2322: \u001b[0mType '{ organizationId: string; customerId: string; projectId: string | undefined; locationId: string | undefined; title: string; description: string | undefined; startTime: Date; endTime: Date; duration: number; }' is not assignable to type '(Without<AppointmentCreateInput, AppointmentUncheckedCreateInput> & AppointmentUncheckedCreateInput) | (Without<...> & AppointmentCreateInput)'.\n      Type '{ organizationId: string; customerId: string; projectId: string | undefined; locationId: string | undefined; title: string; description: string | undefined; startTime: Date; endTime: Date; duration: number; }' is not assignable to type 'Without<AppointmentCreateInput, AppointmentUncheckedCreateInput> & AppointmentUncheckedCreateInput'.\n        Type '{ organizationId: string; customerId: string; projectId: string | undefined; locationId: string | undefined; title: string; description: string | undefined; startTime: Date; endTime: Date; duration: number; }' is missing the following properties from type 'AppointmentUncheckedCreateInput': appointmentNumber, scheduledStart, scheduledEnd\n\n    \u001b[7m96\u001b[0m       data: {\n    \u001b[7m  \u001b[0m \u001b[91m      ~~~~\u001b[0m\n\n      \u001b[96mnode_modules/.prisma/client/index.d.ts\u001b[0m:\u001b[93m30760\u001b[0m:\u001b[93m5\u001b[0m\n        \u001b[7m30760\u001b[0m     data: XOR<AppointmentCreateInput, AppointmentUncheckedCreateInput>\n        \u001b[7m     \u001b[0m \u001b[96m    ~~~~\u001b[0m\n        The expected type comes from property 'data' which is declared here on type '{ select?: AppointmentSelect<DefaultArgs> | null | undefined; include?: AppointmentInclude<DefaultArgs> | null | undefined; data: (Without<...> & AppointmentUncheckedCreateInput) | (Without<...> & AppointmentCreateInput); }'\n    \u001b[96msrc/services/appointment.service.ts\u001b[0m:\u001b[93m189\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'cancelled' does not exist on type '{ id: string; description: string | null; status: string; createdAt: Date; updatedAt: Date; deletedAt: Date | null; organizationId: string; customerId: string; appointmentNumber: string; ... 11 more ...; reminderSentAt: Date | null; }'.\n\n    \u001b[7m189\u001b[0m     if (existingAppointment.cancelled) {\n    \u001b[7m   \u001b[0m \u001b[91m                            ~~~~~~~~~\u001b[0m\n    \u001b[96msrc/services/appointment.service.ts\u001b[0m:\u001b[93m193\u001b[0m:\u001b[93m29\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'completed' does not exist on type '{ id: string; description: string | null; status: string; createdAt: Date; updatedAt: Date; deletedAt: Date | null; organizationId: string; customerId: string; appointmentNumber: string; ... 11 more ...; reminderSentAt: Date | null; }'.\n\n    \u001b[7m193\u001b[0m     if (existingAppointment.completed) {\n    \u001b[7m   \u001b[0m \u001b[91m                            ~~~~~~~~~\u001b[0m\n    \u001b[96msrc/services/appointment.service.ts\u001b[0m:\u001b[93m202\u001b[0m:\u001b[93m11\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18047: \u001b[0m'startTime' is possibly 'null'.\n\n    \u001b[7m202\u001b[0m       if (startTime >= endTime) {\n    \u001b[7m   \u001b[0m \u001b[91m          ~~~~~~~~~\u001b[0m\n    \u001b[96msrc/services/appointment.service.ts\u001b[0m:\u001b[93m202\u001b[0m:\u001b[93m24\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18047: \u001b[0m'endTime' is possibly 'null'.\n\n    \u001b[7m202\u001b[0m       if (startTime >= endTime) {\n    \u001b[7m   \u001b[0m \u001b[91m                       ~~~~~~~\u001b[0m\n    \u001b[96msrc/services/appointment.service.ts\u001b[0m:\u001b[93m206\u001b[0m:\u001b[93m11\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS18047: \u001b[0m'startTime' is possibly 'null'.\n\n    \u001b[7m206\u001b[0m       if (startTime < new Date()) {\n    \u001b[7m   \u001b[0m \u001b[91m          ~~~~~~~~~\u001b[0m\n    \u001b[96msrc/services/appointment.service.ts\u001b[0m:\u001b[93m213\u001b[0m:\u001b[93m9\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2345: \u001b[0mArgument of type 'Date | null' is not assignable to parameter of type 'Date'.\n      Type 'null' is not assignable to type 'Date'.\n\n    \u001b[7m213\u001b[0m         startTime,\n    \u001b[7m   \u001b[0m \u001b[91m        ~~~~~~~~~\u001b[0m\n    \u001b[96msrc/services/appointment.service.ts\u001b[0m:\u001b[93m336\u001b[0m:\u001b[93m21\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'cancelled' does not exist on type '{ id: string; description: string | null; status: string; createdAt: Date; updatedAt: Date; deletedAt: Date | null; organizationId: string; customerId: string; appointmentNumber: string; ... 11 more ...; reminderSentAt: Date | null; }'.\n\n    \u001b[7m336\u001b[0m     if (appointment.cancelled) {\n    \u001b[7m   \u001b[0m \u001b[91m                    ~~~~~~~~~\u001b[0m\n    \u001b[96msrc/services/appointment.service.ts\u001b[0m:\u001b[93m340\u001b[0m:\u001b[93m21\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'completed' does not exist on type '{ id: string; description: string | null; status: string; createdAt: Date; updatedAt: Date; deletedAt: Date | null; organizationId: string; customerId: string; appointmentNumber: string; ... 11 more ...; reminderSentAt: Date | null; }'.\n\n    \u001b[7m340\u001b[0m     if (appointment.completed) {\n    \u001b[7m   \u001b[0m \u001b[91m                    ~~~~~~~~~\u001b[0m\n    \u001b[96msrc/services/appointment.service.ts\u001b[0m:\u001b[93m344\u001b[0m:\u001b[93m21\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'confirmed' does not exist on type '{ id: string; description: string | null; status: string; createdAt: Date; updatedAt: Date; deletedAt: Date | null; organizationId: string; customerId: string; appointmentNumber: string; ... 11 more ...; reminderSentAt: Date | null; }'.\n\n    \u001b[7m344\u001b[0m     if (appointment.confirmed) {\n    \u001b[7m   \u001b[0m \u001b[91m                    ~~~~~~~~~\u001b[0m\n    \u001b[96msrc/services/appointment.service.ts\u001b[0m:\u001b[93m351\u001b[0m:\u001b[93m9\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2353: \u001b[0mObject literal may only specify known properties, and 'confirmed' does not exist in type '(Without<AppointmentUpdateInput, AppointmentUncheckedUpdateInput> & AppointmentUncheckedUpdateInput) | (Without<...> & AppointmentUpdateInput)'.\n\n    \u001b[7m351\u001b[0m         confirmed: true,\n    \u001b[7m   \u001b[0m \u001b[91m        ~~~~~~~~~\u001b[0m\n\n      \u001b[96mnode_modules/.prisma/client/index.d.ts\u001b[0m:\u001b[93m30806\u001b[0m:\u001b[93m5\u001b[0m\n        \u001b[7m30806\u001b[0m     data: XOR<AppointmentUpdateInput, AppointmentUncheckedUpdateInput>\n        \u001b[7m     \u001b[0m \u001b[96m    ~~~~\u001b[0m\n        The expected type comes from property 'data' which is declared here on type '{ select?: AppointmentSelect<DefaultArgs> | null | undefined; include?: AppointmentInclude<DefaultArgs> | null | undefined; data: (Without<...> & AppointmentUncheckedUpdateInput) | (Without<...> & AppointmentUpdateInput); where: AppointmentWhereUniqueInput; }'\n    \u001b[96msrc/services/appointment.service.ts\u001b[0m:\u001b[93m389\u001b[0m:\u001b[93m21\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'cancelled' does not exist on type '{ id: string; description: string | null; status: string; createdAt: Date; updatedAt: Date; deletedAt: Date | null; organizationId: string; customerId: string; appointmentNumber: string; ... 11 more ...; reminderSentAt: Date | null; }'.\n\n    \u001b[7m389\u001b[0m     if (appointment.cancelled) {\n    \u001b[7m   \u001b[0m \u001b[91m                    ~~~~~~~~~\u001b[0m\n    \u001b[96msrc/services/appointment.service.ts\u001b[0m:\u001b[93m393\u001b[0m:\u001b[93m21\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'completed' does not exist on type '{ id: string; description: string | null; status: string; createdAt: Date; updatedAt: Date; deletedAt: Date | null; organizationId: string; customerId: string; appointmentNumber: string; ... 11 more ...; reminderSentAt: Date | null; }'.\n\n    \u001b[7m393\u001b[0m     if (appointment.completed) {\n    \u001b[7m   \u001b[0m \u001b[91m                    ~~~~~~~~~\u001b[0m\n    \u001b[96msrc/services/appointment.service.ts\u001b[0m:\u001b[93m400\u001b[0m:\u001b[93m9\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2353: \u001b[0mObject literal may only specify known properties, and 'completed' does not exist in type '(Without<AppointmentUpdateInput, AppointmentUncheckedUpdateInput> & AppointmentUncheckedUpdateInput) | (Without<...> & AppointmentUpdateInput)'.\n\n    \u001b[7m400\u001b[0m         completed: true,\n    \u001b[7m   \u001b[0m \u001b[91m        ~~~~~~~~~\u001b[0m\n\n      \u001b[96mnode_modules/.prisma/client/index.d.ts\u001b[0m:\u001b[93m30806\u001b[0m:\u001b[93m5\u001b[0m\n        \u001b[7m30806\u001b[0m     data: XOR<AppointmentUpdateInput, AppointmentUncheckedUpdateInput>\n        \u001b[7m     \u001b[0m \u001b[96m    ~~~~\u001b[0m\n        The expected type comes from property 'data' which is declared here on type '{ select?: AppointmentSelect<DefaultArgs> | null | undefined; include?: AppointmentInclude<DefaultArgs> | null | undefined; data: (Without<...> & AppointmentUncheckedUpdateInput) | (Without<...> & AppointmentUpdateInput); where: AppointmentWhereUniqueInput; }'\n    \u001b[96msrc/services/appointment.service.ts\u001b[0m:\u001b[93m439\u001b[0m:\u001b[93m21\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'cancelled' does not exist on type '{ id: string; description: string | null; status: string; createdAt: Date; updatedAt: Date; deletedAt: Date | null; organizationId: string; customerId: string; appointmentNumber: string; ... 11 more ...; reminderSentAt: Date | null; }'.\n\n    \u001b[7m439\u001b[0m     if (appointment.cancelled) {\n    \u001b[7m   \u001b[0m \u001b[91m                    ~~~~~~~~~\u001b[0m\n    \u001b[96msrc/services/appointment.service.ts\u001b[0m:\u001b[93m443\u001b[0m:\u001b[93m21\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'completed' does not exist on type '{ id: string; description: string | null; status: string; createdAt: Date; updatedAt: Date; deletedAt: Date | null; organizationId: string; customerId: string; appointmentNumber: string; ... 11 more ...; reminderSentAt: Date | null; }'.\n\n    \u001b[7m443\u001b[0m     if (appointment.completed) {\n    \u001b[7m   \u001b[0m \u001b[91m                    ~~~~~~~~~\u001b[0m\n    \u001b[96msrc/services/appointment.service.ts\u001b[0m:\u001b[93m450\u001b[0m:\u001b[93m9\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2353: \u001b[0mObject literal may only specify known properties, and 'cancelled' does not exist in type '(Without<AppointmentUpdateInput, AppointmentUncheckedUpdateInput> & AppointmentUncheckedUpdateInput) | (Without<...> & AppointmentUpdateInput)'.\n\n    \u001b[7m450\u001b[0m         cancelled: true,\n    \u001b[7m   \u001b[0m \u001b[91m        ~~~~~~~~~\u001b[0m\n\n      \u001b[96mnode_modules/.prisma/client/index.d.ts\u001b[0m:\u001b[93m30806\u001b[0m:\u001b[93m5\u001b[0m\n        \u001b[7m30806\u001b[0m     data: XOR<AppointmentUpdateInput, AppointmentUncheckedUpdateInput>\n        \u001b[7m     \u001b[0m \u001b[96m    ~~~~\u001b[0m\n        The expected type comes from property 'data' which is declared here on type '{ select?: AppointmentSelect<DefaultArgs> | null | undefined; include?: AppointmentInclude<DefaultArgs> | null | undefined; data: (Without<...> & AppointmentUncheckedUpdateInput) | (Without<...> & AppointmentUpdateInput); where: AppointmentWhereUniqueInput; }'\n    \u001b[96msrc/services/appointment.service.ts\u001b[0m:\u001b[93m490\u001b[0m:\u001b[93m21\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'cancelled' does not exist on type '{ id: string; description: string | null; status: string; createdAt: Date; updatedAt: Date; deletedAt: Date | null; organizationId: string; customerId: string; appointmentNumber: string; ... 11 more ...; reminderSentAt: Date | null; }'.\n\n    \u001b[7m490\u001b[0m     if (appointment.cancelled) {\n    \u001b[7m   \u001b[0m \u001b[91m                    ~~~~~~~~~\u001b[0m\n    \u001b[96msrc/services/appointment.service.ts\u001b[0m:\u001b[93m494\u001b[0m:\u001b[93m21\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2339: \u001b[0mProperty 'completed' does not exist on type '{ id: string; description: string | null; status: string; createdAt: Date; updatedAt: Date; deletedAt: Date | null; organizationId: string; customerId: string; appointmentNumber: string; ... 11 more ...; reminderSentAt: Date | null; }'.\n\n    \u001b[7m494\u001b[0m     if (appointment.completed) {\n    \u001b[7m   \u001b[0m \u001b[91m                    ~~~~~~~~~\u001b[0m\n    \u001b[96msrc/services/appointment.service.ts\u001b[0m:\u001b[93m527\u001b[0m:\u001b[93m9\u001b[0m - \u001b[91merror\u001b[0m\u001b[90m TS2353: \u001b[0mObject literal may only specify known properties, and 'confirmed' does not exist in type '(Without<AppointmentUpdateInput, AppointmentUncheckedUpdateInput> & AppointmentUncheckedUpdateInput) | (Without<...> & AppointmentUpdateInput)'.\n\n    \u001b[7m527\u001b[0m         confirmed: false, // Reschedule requires re-confirmation\n    \u001b[7m   \u001b[0m \u001b[91m        ~~~~~~~~~\u001b[0m\n\n      \u001b[96mnode_modules/.prisma/client/index.d.ts\u001b[0m:\u001b[93m30806\u001b[0m:\u001b[93m5\u001b[0m\n        \u001b[7m30806\u001b[0m     data: XOR<AppointmentUpdateInput, AppointmentUncheckedUpdateInput>\n        \u001b[7m     \u001b[0m \u001b[96m    ~~~~\u001b[0m\n        The expected type comes from property 'data' which is declared here on type '{ select?: AppointmentSelect<DefaultArgs> | null | undefined; include?: AppointmentInclude<DefaultArgs> | null | undefined; data: (Without<...> & AppointmentUncheckedUpdateInput) | (Without<...> & AppointmentUpdateInput); where: AppointmentWhereUniqueInput; }'\n","testResults":[]}],"config":{"bail":0,"changedFilesWithAncestor":false,"ci":false,"collectCoverage":false,"collectCoverageFrom":["src/**/*.ts","!src/**/*.d.ts","!src/**/*.interface.ts","!src/**/*.mock.ts","!src/index.ts"],"coverageDirectory":"/home/eric/Projects/accounting-api/coverage/integration","coverageProvider":"babel","coverageReporters":["text","lcov","html","json-summary"],"coverageThreshold":{"global":{"branches":85,"functions":85,"lines":85,"statements":85}},"detectLeaks":false,"detectOpenHandles":true,"errorOnDeprecated":false,"expand":false,"findRelatedTests":false,"forceExit":true,"globalSetup":"/home/eric/Projects/accounting-api/tests/integration/global-setup.ts","globalTeardown":"/home/eric/Projects/accounting-api/tests/integration/global-teardown.ts","json":false,"lastCommit":false,"listTests":false,"logHeapUsage":false,"maxConcurrency":5,"maxWorkers":1,"noStackTrace":false,"nonFlagArgs":[],"notify":false,"notifyMode":"failure-change","onlyChanged":false,"onlyFailures":false,"openHandlesTimeout":1000,"passWithNoTests":false,"projects":[],"reporters":[["default",{}],["/home/eric/Projects/accounting-api/node_modules/jest-junit/index.js",{"outputDirectory":"test-results/integration","outputName":"junit.xml","classNameTemplate":"{classname}","titleTemplate":"{title}","ancestorSeparator":" › ","usePathForSuiteName":true}],["/home/eric/Projects/accounting-api/node_modules/jest-html-reporters/index.js",{"publicPath":"test-results/integration","filename":"integration-report.html","expand":true,"hideIcon":false,"pageTitle":"Integration Test Report"}]],"rootDir":"/home/eric/Projects/accounting-api","runTestsByPath":false,"seed":1887404698,"skipFilter":false,"snapshotFormat":{"escapeString":false,"printBasicPrototype":false},"testFailureExitCode":1,"testPathPattern":"","testSequencer":"/home/eric/Projects/accounting-api/node_modules/@jest/test-sequencer/build/index.js","testTimeout":30000,"updateSnapshot":"new","useStderr":false,"verbose":true,"watch":false,"watchAll":false,"watchman":true,"workerThreads":false},"endTime":1759565236368,"_reporterOptions":{"publicPath":"test-results/integration","filename":"integration-report.html","expand":true,"pageTitle":"Integration Test Report","hideIcon":false,"testCommand":"","openReport":false,"failureMessageOnly":0,"enableMergeData":false,"dataMergeLevel":1,"inlineSource":false,"urlForTestFiles":"","darkTheme":false,"includeConsoleLog":false,"stripSkippedTest":false},"logInfoMapping":{},"attachInfos":{}})